!function(e){"use strict";var t={moduleId:null,moduleData:null,$module:null,open:function(t,i){var o=this,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==t){var d=e("embedded"===i||"social_sharing"===i?"#module-preview-inline-container":"#module-preview-container");e.ajax({url:hustleVars.ajaxurl,type:"POST",data:{action:"hustle_preview_module",id:t,previewData:l}}).then(function(e){if(e.success){if(d.html(e.data.html),o.$module=d.find(".hustle-ui"),o.$module.find(".hustle-select2").length&&HUI.select2(),o.$module.find(".hustle-time").length&&HUI.timepicker(".hustle-time"),o.$module.find(".hustle-date").length){var i=hustleVars.days_and_months;HUI.datepicker(".hustle-date",i.days_full,i.days_short,i.days_min,i.months_full,i.months_short)}HUI.nonSharingSimulation(o.$module),HUI.inputFilled(),e.data.style&&d.append(e.data.style),e.data.script&&d.append(e.data.script),setTimeout(function(){return HUI.maybeRenderRecaptcha(o.$module)},1e3)}return{id:t,data:e.data.module}},function(){}).then(function(e){var t=e.id,i=e.data;o.moduleId=t,o.moduleData=i,o.showModule()})}},showModule:function(){var t="0"!==String(this.$module.data("close-delay"))&&this.$module.data("close-delay");"popup"===this.moduleData.module_type?HUI.popupLoad(this.$module[0],t):"slidein"===this.moduleData.module_type?(HUI.slideinLayouts(this.$module[0]),HUI.slideinLoad(this.$module[0],t),e(window).on("resize",function(){this.$module&&HUI.slideinLayouts(this.$module[0])})):(HUI.inlineResize(this.$module[0]),HUI.inlineLoad(this.$module[0]))},reloadModule:function(){var e=this;if(this.$module.is(":visible")){var t=0;"popup"===this.moduleData.module_type?(HUI.popupClose(this.$module[0],0),t=2e3):"slidein"===this.moduleData.module_type&&(HUI.slideinClose(this.$module[0],0),t=500),setTimeout(function(){return e.showModule()},t)}else this.showModule()},previewClosed:function(){this.$module=null,e("#module-preview-container").empty(),e("#module-preview-inline-container").empty()}};window.addEventListener("message",function(e){if(e.origin!==window.location.origin||e.source!==window.parent)return;var i=e.data.action;"open"===i?t.open(e.data.moduleId,e.data.moduleType,e.data.previewData):"close"===i?t.previewClosed():"reload"===i&&t.reloadModule()},!1),e("a:not(.hustle-button)").on("click",function(e){e.preventDefault()})}(jQuery);
!function(){var e={6018:function(){!function(){"use strict";window.Hustle=function(e,t,i){const s={},n={},a={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g},o=_.extend({},Backbone.Events),l=Backbone.View.extend({initialize(){_.isFunction(this.initMix)&&this.initMix.apply(this,arguments),this.render&&(this.render=_.wrap(this.render,(function(e){this.trigger("before_render"),e.call(this),o.trigger("view.rendered",this),this.trigger("rendered")}))),_.isFunction(this.init)&&this.init.apply(this,arguments)}}),d=_.memoize((function(e){let t;return function(i){return t=t||_.template(document.getElementById(e).innerHTML,null,a),t(i).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}})),r=_.memoize((function(e){let t;return function(i){return t=t||_.template(e,null,a),t(i)}}));return{define:function(s,a){if(s.split(".").length){const o=function(s,n){const l=s.split("."),d=l.splice(0,1)[0];let r;d&&(l.length?n[d]=n[d]||{}:(r=a.call(null,e,t,i),n[d]=_.isFunction(r)||void 0===r?r:_.extend(n[d]||{},r)),l.length&&d&&o(l.join("."),n[d]))};o(s,n)}else{const o=n[s]||{};n[s]=_.extend(o,a.call(null,e,t,i))}},setModule:(e,t)=>{s[e]=t},getModules:function(){return s},getModule:function(e){return s[e]},get:function(e){let t,i;return e.split(".").length?(t=!1,i=function(e,s){const n=e.split("."),a=n.splice(0,1)[0];t=s[a],n.length&&i(n.join("."),s[a])},i(e,n),t):n[e]||!1},Events:o,View:l,template:d,createTemplate:r,getTemplateOptions:function(){return e.extend(!0,{},a)},consts:{ModuleShowCount:"hustle_module_show_count-"}}}(jQuery,document,window)}(jQuery)},5492:function(){!function(e){"use strict";window.Optin={},window.Optin.Models={},window.Optin.NEVER_SEE_PREFIX="inc_optin_never_see_again-",window.Optin.COOKIE_PREFIX="inc_optin_long_hidden-",window.Optin.POPUP_COOKIE_PREFIX="inc_optin_popup_long_hidden-",window.Optin.SLIDE_IN_COOKIE_PREFIX="inc_optin_slide_in_long_hidden-",window.Optin.EMBEDDED_COOKIE_PREFIX="inc_optin_embedded_long_hidden-",window.Optin.template=_.memoize((function(t){let i;const s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(n){return i=i||_.template(e("#"+t).html(),null,s),i(n).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}})),window.Optin.templateCompat=_.memoize((function(t){let i;return function(s){return i=i||_.template(e("#"+t).html()),i(s).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}})),window.Optin.cookie={get(e){let t;const i=document.cookie.split(";"),s=i.length,n=e+"=";for(let e=0;e<s;e+=1){for(t=i[e];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(n)){const e=t.substring(n.length,t.length);return e?JSON.parse(e):e}}return null},set(t,i,s){let n,a;i=Array.isArray(i)||e.isPlainObject(i)?JSON.stringify(i):i,isNaN(s)?a="":(n=new Date,n.setTime(n.getTime()+24*s*60*60*1e3),a="; expires="+n.toGMTString()),document.cookie=t+"="+i+a+"; path=/"}},window.Optin.Mixins={_mixins:{},_servicesMixins:{},_desingMixins:{},_displayMixins:{},add(e,t){this._mixins[e]=t},getMixins(){return this._mixins},addServicesMixin(e,t){this._servicesMixins[e]=t},getServicesMixins(){return this._servicesMixins}}}(jQuery)},1442:function(e,t,i){var s=i(2947),n=i(792);!function(e){"use strict";Backbone.Model.prototype.toJSON=function(){const e=_.clone(this.attributes);let t;for(t in e)(e[t]instanceof Backbone.Model||Backbone.Collection&&e[t]instanceof Backbone.Collection)&&(e[t]=e[t].toJSON());return e},_.mixin({toBool:e=>_.isBoolean(e)?e:_.isString(e)&&-1!==["true","false","1"].indexOf(e.toLowerCase())?"true"===e.toLowerCase()||"1"===e.toLowerCase():_.isNumber(e)?!!e:!(_.isUndefined(e)||_.isNull(e)||_.isNaN(e))&&e,isTrue:e=>!(_.isUndefined(e)||_.isNull(e)||_.isNaN(e))&&(_.isNumber(e)?0!==e:(e=e.toString().toLowerCase(),-1!==["1","true","on"].indexOf(e))),isFalse:e=>!_.isTrue(e),controlBase:(e,t,i)=>(i=_.isUndefined(i)?"checked":i,e=_.toBool(e),t=_.isBoolean(e)?_.isTrue(t):t,_.isEqual(e,t)?i+"="+i:""),checked:(e,t)=>_.controlBase(e,t,"checked"),selected:(e,t)=>_.controlBase(e,t,"selected"),disabled:(e,t)=>_.controlBase(e,t,"disabled"),class:(e,t,i)=>_.isTrue(e)?t:void 0!==i?i:""}),Hustle.Events.on("view.rendered",(function(t){if(t instanceof Backbone.View){const i=e=>{e.hide(),e.prop("tabindex","-1"),e.prop("hidden",!0)},n=e=>{e.show(),e.prop("tabindex","0"),e.removeProp("hidden")};SUI.tabs({callback(e,t){const i=e.closest(".sui-tabs"),s="cta-helper-enable",n="cta-helper-disable";"tab-"+s===e.attr("id")?i.find("#input-"+s).trigger("click"):"tab-"+n===e.attr("id")&&i.find("#input-"+n).trigger("click");"tab-schedule-everyday"===e.attr("id")&&i.find("#input-schedule-everyday").trigger("click"),"tab-schedule-somedays"===e.attr("id")&&i.find("#input-schedule-somedays").trigger("click"),"tab-timezone-server"===e.attr("id")&&i.find("#input-timezone-server").trigger("click"),"tab-timezone-custom"===e.attr("id")&&i.find("#input-timezone-custom").trigger("click")}}),t.$(".sui-side-tabs").each((function(){const t=e(this),s=t.find(".sui-tabs-menu .sui-tab-item input");if(!s.length)return;const a=()=>{let t="";e.each(s,(function(){const s=e(this),a=s.parent("label"),o=s.data("tab-menu"),l=e(`.sui-tabs-content [data-tab-content="${o}"]`),d=e(`[data-tab-dependent="${o}"]`);s[0].checked?(a.addClass("active"),o&&(t=o,l.addClass("active"),n(d))):(a.removeClass("active"),o!==t&&(l.removeClass("active"),i(d)))}))};a(),s.on("change",(()=>a()));t.find("button.sui-tab-item").on("click",(function(){const t=e(this),i=e("#"+t.data("label-for"));i.length&&i.trigger("click").trigger("change")}));const o=t.children(".hustle-tabs-option:checked");if(o.length){const e=o.prop("id");t.find(`button[data-label-for="${e}"]`).trigger("click")}})),t.$(".sui-side-tabs").each((function(){const t=e(this),s=t.children(".hustle-tabs-option");if(!s.length)return;const a=()=>{let a="";e.each(s,(function(){const s=e(this),o=s.attr("id"),l=t.find(`button[data-label-for="${o}"]`),d=l.attr("aria-controls"),r=e(`div[id="${d}"]`);s[0].checked?(l.addClass("active"),d&&(a=d,n(r))):(l.removeClass("active"),d!==a&&i(r))}))};a(),s.on("change",(()=>a()));t.children(".sui-tabs-menu").find("button.sui-tab-item").on("click",(function(){const t=e(this),i=e('input[id="'+t.data("label-for")+'"]');i.length&&i.trigger("click").trigger("change")}))})),t.$(".select-content-switcher-wrapper").each((function(){const t=e(this),s=t.find(".select-content-switcher"),a=s.find("option"),o=()=>{const o=s.find(":selected").data("switcher-menu"),l=t.find(`.select-switcher-content[data-switcher-content="${o}"]`);e.each(a,(function(){const s=e(this);if(s.data("switcher-menu")===o)n(l);else{const e=t.find(`.select-switcher-content[data-switcher-content="${s.data("switcher-menu")}"]`);i(e)}}))};o(),s.on("change",(()=>o()))})),t.$(".hustle-toggle-with-container").each((function(){const t=e(this),i=t.find("input[type=checkbox]"),n=e(`[data-toggle-content="${t.data("toggle-on")}"]`),a=e(`[data-toggle-content="${t.data("toggle-off")}"]`),o=()=>{i[0].checked?(s.accessibleShow(n),s.accessibleHide(a)):(s.accessibleShow(a),s.accessibleHide(n))};o(),i.on("change",o)})),t.$(".hustle-radio-with-dependency-to-disable").each((function(){const t=e(this),i=t.data("disable"),s=e(`[data-disable-content="${i}"]`),n=s.data("disable-off"),a=s.data("disable-on"),o=()=>{t.is(":checked")&&(n?n===t.val()?s.prop("disabled",!1):s.prop("disabled",!0):a&&(a===t.val()?s.prop("disabled",!0):s.prop("disabled",!1)))};o(),t.on("change",o)})),t.$(".hustle-select-with-dependency-to-disable").each((function(){const t=e(this),i=t.data("disable"),s=e(`[data-disable-content="${i}"]`),n=s.data("disable-off"),a=s.data("disable-on"),o=()=>{n?n===t.val()?s.prop("disabled",!1):s.prop("disabled",!0):a&&(a===t.val()?s.prop("disabled",!0):s.prop("disabled",!1))};o(),t.on("change",o)})),s.showHideDependencyOnSelectChange(t.$el)}})),e(document).ready((function(){e(".hustle-delete-module-button").on("click",(function(t){t.preventDefault();const i=e(t.currentTarget),s={id:i.data("id"),nonce:i.data("nonce"),action:"delete",title:i.data("title"),description:i.data("description"),actionClass:"hustle-single-module-button-action"};n.deleteModal.open(s,i[0])})),e(".hustle-module-tracking-reset-button").on("click",(function(t){t.preventDefault();const i=e(t.target),s={id:i.data("module-id"),nonce:optinVars.single_module_action_nonce,action:"reset-tracking",title:i.data("title"),description:i.data("description"),actionClass:"hustle-single-module-button-action"};n.deleteModal.open(s,i[0])})),e(".hustle-copy-shortcode-button").on("click",(function(t){t.preventDefault();const i=e(t.target),s=i.data("shortcode"),a=i.closest(".sui-with-button-inside");if(void 0!==s){const t=e("<input />");e("body").append(t),t.val(s).trigger("select"),document.execCommand("copy"),t.remove(),n.Notification.open("success",optinVars.messages.shortcode_copied)}else if(a.length){a.find('input[type="text"]').trigger("select"),document.execCommand("copy")}})),e(".hustle-dismissible-admin-notice .notice-dismiss, .hustle-dismissible-admin-notice .dismiss-notice").on("click",(function(t){t.preventDefault();const i=e(t.currentTarget).closest(".hustle-dismissible-admin-notice");e.post(ajaxurl,{action:"hustle_dismiss_notification",name:i.data("name"),_ajax_nonce:optinVars.dismiss_notice_nonce}).always(i.fadeOut())})),e("#hustle-tracking-migration-notice .hustle-notice-dismiss").on("click",(function(t){t.preventDefault(),e("#hustle-dismiss-modal-button").on("click",(function(t){t.preventDefault(),e.post(ajaxurl,{action:"hustle_dismiss_notification",name:e(t.currentTarget).data("name"),_ajax_nonce:e(t.currentTarget).data("nonce")}).always((()=>location.reload()))})),SUI.openModal("hustle-dialog--migrate-dismiss-confirmation",e(".sui-header-title"))})),e(".sui-form-field input[type=number]").length&&e(".sui-form-field input[type=number]").on("keydown",(function(t){if(e(this)[0].hasAttribute("min")&&0<=e(this).attr("min")){0!==t.originalEvent.key.replace(/[^0-9^.^,]/,"").length||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.preventDefault()}})),setTimeout((function(){e(".hustle-scroll-to").length&&e("html, body").animate({scrollTop:e(".hustle-scroll-to").offset().top},"slow")}),100),e(".hustle-check-all").on("click",(function(t){const i=e(t.target),s=i.parents(".sui-wrap-hustle").find(".hustle-list"),n=i.is(":checked");s.find(".hustle-listing-checkbox").prop("checked",n),i.parents(".sui-wrap-hustle").find(".hustle-check-all").prop("checked",n),e(".hustle-bulk-apply-button").prop("disabled",!n)})),e(".hustle-list .hustle-listing-checkbox").on("click",(function(t){const i=e(t.target),s=i.parents(".sui-wrap-hustle").find(".hustle-list"),n=i.is(":checked")&&!s.find(".hustle-listing-checkbox:not(:checked)").length,a=0===s.find(".hustle-listing-checkbox:checked").length;e(".hustle-check-all").prop("checked",n),e(".hustle-bulk-apply-button").prop("disabled",a)})),e(".hustle-bulk-apply-button").on("click",(function(t){const i=e(t.target),s=e("select option:selected",i.closest(".hui-bulk-actions")).val(),a=e(".hustle-list .hustle-listing-checkbox:checked");if(0===a.length||"undefined"===s)return!1;const o=[];if(e.each(a,(function(){o.push(e(this).val())})),"delete-all"===s){const e={ids:o.join(","),nonce:i.siblings('input[name="hustle_nonce"]').val(),title:i.data("title"),description:i.data("description"),action:s};return n.deleteModal.open(e,i[0]),!1}}))}))}(jQuery)},7212:function(e,t,i){var s=i(2947),n=i(792);Hustle.define("Modals.Migration",(function(e){"use strict";new(Backbone.View.extend({el:"#hustle-dialog--migrate",data:{},events:{"click #hustle-migrate-start":"migrateStart","click #hustle-create-new-module":"createModule","click .sui-box-selector":"enableContinue","click .hustle-dialog-migrate-skip":"dismissModal"},initialize(){if(!this.$el.length)return;let t="",i="";0===this.$el.data("isFirst")?(t="#hustle-dialog--migrate-slide-2",i="hustle-migrate-start"):(t="#hustle-dialog--migrate-slide-1",i="hustle-migrate-get-started"),this.$(t).addClass("sui-active sui-loaded"),setTimeout((()=>SUI.openModal("hustle-dialog--migrate",i,e(".sui-wrap-hustle")[0],!1)),100),this.$progressBar=this.$el.find(".sui-progress .sui-progress-bar span"),this.$progressText=this.$el.find(".sui-progress .sui-progress-text span"),this.$partialRows=this.$el.find("#hustle-partial-rows")},migrateStart(t){const i=e(t.target),n=this.$el.find("#hustle-dialog--migrate-slide-2"),a=n.find("#hustle-dialog--migrate-slide-2-description");i.addClass("sui-button-onload"),n.find(".hustle-dialog-migrate-skip").remove(),a.text(a.data("migrate-text")),s.accessibleHide(n.find("div[data-migrate-start]")),s.accessibleHide(n.find("div[data-migrate-failed]")),s.accessibleShow(n.find("div[data-migrate-progress]")),SUI.closeNotice("hustle-dialog--migrate-error-notice"),this.migrateTracking(t),i.removeClass("sui-button-onload"),t.preventDefault()},migrateComplete(){const e=this.$("#hustle-dialog--migrate-slide-2"),t=this,i=e.find("#hustle-dialog--migrate-slide-2-title"),n=e.find("#hustle-dialog--migrate-slide-2-description");this.$el.find("sui-button-onload").removeClass("sui-button-onload"),i.text(i.data("done-text")),n.text(n.data("done-text")),s.accessibleHide(e.find("div[data-migrate-progress]")),s.accessibleShow(e.find("div[data-migrate-done]")),this.$el.closest(".sui-modal").on("click",(e=>t.closeDialog(e)))},migrateFailed(){const t=this.$el.find("#hustle-dialog--migrate-slide-2");t.find("#dialogDescription").text(""),s.accessibleHide(t.find("div[data-migrate-start]")),s.accessibleShow(t.find("div[data-migrate-failed]")),s.accessibleHide(t.find("div[data-migrate-progress]"));const i="hustle-dialog--migrate-error-notice",a=e("#"+i).data("message");n.Notification.open("error",a,!1,i,!1)},updateProgress(e,t,i){void 0===this.totalRows&&(this.totalRows=i,this.$el.find("#hustle-total-rows").text(i)),this.$partialRows.text(e);const s=t+"%";this.$progressBar.css("width",s),100>=t&&this.$progressText.text(t+"%")},migrateTracking(t){t.preventDefault();const i=this,s={action:"hustle_migrate_tracking",_ajax_nonce:e(t.currentTarget).data("nonce")};return e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:s,success(e){if(e.success){const s=e.data.migrated_rows,n=e.data.migrated_percentage,a=e.data.total_entries||"0";"done"!==e.data.current_meta?(i.updateProgress(s,n,a),i.migrateTracking(t)):(i.updateProgress(s,n,a),setTimeout((()=>i.migrateComplete()),500))}else i.migrateFailed()},error(){i.migrateFailed()}}),!1},createModule(t){const i=e(t.target),s=this.$el.find(".sui-box-selector input:checked");if(s.length){this.dismissModal(),i.addClass("sui-button-onload");const e=s.val(),t=void 0!==optinVars.module_page[e]?optinVars.module_page[e]:optinVars.module_page.popup;window.location=`?page=${t}&create-module=true`}t.preventDefault()},closeDialog(e){SUI.closeModal(),e.preventDefault(),e.stopPropagation()},enableContinue(){this.$el.find("#hustle-create-new-module").prop("disabled",!1)},dismissModal(t){t&&t.preventDefault(),e.post(ajaxurl,{action:"hustle_dismiss_notification",name:"migrate_modal",_ajax_nonce:this.$el.data("nonce")})}}))}))},8341:function(){Hustle.define("Modals.Preview",(function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--preview",iframeWindow:null,events:{"click .hustle-modal-close":"close","click .hustle-preview-device-button":"previewDeviceSelected","click #hustle-preview-reload-module-button":"reloadModuleClicked"},open(e,t,i,s=!1){this.displayModuleName(s),this.maybeHideReloadButton(t),SUI.openModal("hustle-dialog--preview",i,null,!1,!1);const n={action:"open",moduleId:e,moduleType:t,previewData:s};this.initiateIframe(n)},displayModuleName(e){e&&this.$("#hustle-dialog--preview-description").html(e.module_name||"")},maybeHideReloadButton(e){const t=this.$("#hustle-preview-reload-module-button");"embedded"===e?t.addClass("sui-hidden-important"):t.removeClass("sui-hidden-important")},initiateIframe(e){const t=this.$("#hustle-preview-iframe");void 0===t.attr("src")?(t[0].src=t.data("src"),t.on("load",(()=>{const i=this.$("#hustle-preview-iframe-container");i.show(),i.prop("aria-hidden",!1),this.$("#hustle-preview-loader").remove(),this.iframeWindow=t[0].contentWindow,this.talkToIframe(e)}))):(this.$("#hustle-sr-text-preview-loaded").remove(),this.talkToIframe(e))},close(){setTimeout((()=>this.talkToIframe({action:"close"})),500)},reloadModuleClicked(){this.talkToIframe({action:"reload"})},previewDeviceSelected(t){const i=e(t.currentTarget),s=i.data("device");this.$(".hustle-preview-device-button").removeClass("sui-active"),i.addClass("sui-active"),this.$("#hustle-sr-text-preview-selected-device").html(i.data("selected")),"desktop"===s?(this.$el.removeClass("hustle-preview-mobile"),this.$el.addClass("hustle-preview-desktop")):"mobile"===s&&(this.$el.removeClass("hustle-preview-desktop"),this.$el.addClass("hustle-preview-mobile"))},talkToIframe(e){this.iframeWindow&&this.iframeWindow.postMessage(e,window.location)}})}))},5032:function(){Hustle.define("Modals.ReleaseHighlight",(function(e){"use strict";new(Backbone.View.extend({el:"#hustle-dialog--release-highlight",initialize(){this.$el.length&&(setTimeout((()=>this.show()),100),this.$el.on("close",(()=>this.dismissModal())))},show(){"undefined"!=typeof SUI?SUI.openModal("hustle-dialog--release-highlight",e(".sui-header-title")[0],this.$(".hustle-modal-close"),!0):setTimeout((()=>this.show()),100)},dismissModal(){e.post(ajaxurl,{action:"hustle_dismiss_notification",name:this.$el.data("name"),_ajax_nonce:optinVars.dismiss_notice_nonce})}}))}))},4404:function(){Hustle.define("Modals.ReviewConditions",(function(e){"use strict";new(Backbone.View.extend({el:"#hustle-dialog--review_conditions",events:{"click .hustle-review-conditions-dismiss":"dismissModal"},initialize(){this.$el.length&&setTimeout(this.show,100,this)},show(t){"undefined"!=typeof SUI&&void 0!==SUI.openModal?SUI.openModal("hustle-dialog--review_conditions",e(".sui-header-title")):setTimeout(t.show,100,t)},dismissModal(){e.post(ajaxurl,{action:"hustle_dismiss_notification",name:"41_visibility_behavior_update",_ajax_nonce:this.$el.data("nonce")})}}))}))},262:function(){Hustle.define("Upgrade_Modal",(function(){"use strict";return Backbone.View.extend({el:"#wph-upgrade-modal",opts:{},events:{"click .wpmudev-i_close":"close"},initialize(e){this.opts=_.extend({},this.opts,e)},close(e){e.preventDefault(),e.stopPropagation(),this.$el.removeClass("wpmudev-modal-active")}})}))},527:function(){Hustle.define("Modals.Welcome",(function(e){"use strict";new(Backbone.View.extend({el:"#hustle-dialog--welcome",events:{"click #hustle-new-create-module":"createModule","click .sui-box-selector":"enableContinue","click #getStarted":"dismissModal","click .sui-modal-skip":"dismissModal","click .hustle-button-dismiss-welcome":"dismissModal"},initialize(){this.$el.length&&setTimeout(this.show,100,this)},show(t){"undefined"!=typeof SUI?(SUI.openModal("hustle-dialog--welcome",e(".sui-header-title")[0],t.$("#hustle-dialog--welcome-first .sui-button-icon.hustle-button-dismiss-welcome"),!0),SUI.slideModal("hustle-dialog--welcome-first")):setTimeout(t.show,100,t)},createModule(t){const i=e(t.target),s=this.$el.find(".sui-box-selector input:checked");if(s.length){i.addClass("sui-button-onload");const e=s.val(),t=void 0!==optinVars.module_page[e]?optinVars.module_page[e]:optinVars.module_page.popup;window.location=`?page=${t}&create-module=true`}t.preventDefault()},enableContinue(){this.$el.find("#hustle-new-create-module").prop("disabled",!1)},dismissModal(t){t&&t.preventDefault(),e.post(ajaxurl,{action:"hustle_dismiss_notification",name:"welcome_modal",_ajax_nonce:this.$el.data("nonce")})}}))}))},7373:function(e,t,i){var s=i(2947),n=i(792);Hustle.define("Dashboard.View",(function(e){"use strict";if("toplevel_page_hustle"!==pagenow)return;new(Backbone.View.extend({el:".sui-wrap-hustle",events:{"click .hustle-preview-module-button":"previewModule","click .hustle-delete-module-button":"openDeleteModal","click .hustle-free-version-create":"showUpgradeModal","click .sui-dropdown .hustle-onload-icon-action":"addLoadingIconToActionsButton","click .hustle-single-module-button-action":"handleSingleModuleAction"},initialize(){e("#hustle-dialog--welcome").length?this.openWelcomeDialog():e("#hustle-dialog--migrate").length?this.openMigrateDialog():e("#hustle-dialog--release-highlight").length&&this.openReleaseHighlightDialog(),this.doActionsBasedOnUrl()},doActionsBasedOnUrl(){if(s.getUrlParam("show-notice")){const e="success"===s.getUrlParam("show-notice")?"success":"error",t=s.getUrlParam("notice"),i=t&&"undefined"!==optinVars.messages[t]?optinVars.messages[t]:s.getUrlParam("notice-message");void 0!==i&&i.length&&n.Notification.open(e,i)}},previewModule(t){t.preventDefault();const i=e(t.currentTarget);this.getPreviewView().open(i.data("id"),i.data("type"),i,{module_name:i.data("name")})},getPreviewView(){if(!this.previewView){const e=Hustle.get("Modals.Preview");this.previewView=new e}return this.previewView},showUpgradeModal(t){void 0!==t&&t.preventDefault();e("#wph-upgrade-modal").addClass("wpmudev-modal-active")},openDeleteModal(t){t.preventDefault();const i=e(t.currentTarget),s={id:i.data("id"),nonce:i.data("nonce"),action:"delete",title:i.data("title"),description:i.data("description")};n.deleteModal.open(s,i[0])},addLoadingIconToActionsButton(t){e(t.currentTarget).closest(".sui-dropdown").find(".sui-dropdown-anchor").addClass("sui-button-onload")},openWelcomeDialog(){Hustle.get("Modals.Welcome")},openMigrateDialog(){Hustle.get("Modals.Migration")},openReleaseHighlightDialog(){Hustle.get("Modals.ReleaseHighlight")},handleSingleModuleAction(e){s.moduleActionHandler.initAction(e,"dashboard",this)}}))}))},6415:function(e,t,i){var s=i(5533);!function(){"use strict";!function(){const e="_page_hustle_embedded_listing";e===pagenow.substr(pagenow.length-e.length)&&new Optin.listingBase({moduleType:optinVars.current.module_type})}(),function(){const e="_page_hustle_embedded";if(e!==pagenow.substr(pagenow.length-e.length))return;const t=Hustle.View.extend(Hustle.get("Mixins.Wizard_View")),i=Hustle.View.extend(Hustle.get("Mixins.Module_Content")),n=Hustle.View.extend(Hustle.get("Mixins.Module_Emails")),a=Hustle.View.extend(Hustle.get("Mixins.Module_Design")),o=Hustle.View.extend(Hustle.get("Mixins.Module_Display")),l=Hustle.View.extend(Hustle.get("Mixins.Module_Visibility")),d=Hustle.View.extend(Hustle.get("Mixins.Module_Settings")),r=Hustle.get("Module.IntegrationsView"),c=s.Model,u=Hustle.get("Models.M");new t({model:new c(optinVars.current.data||{}),contentView:new i({BaseModel:u}),emailsView:new n({BaseModel:u}),designView:new a({BaseModel:u}),integrationsView:new r({BaseModel:u}),displayView:new o({BaseModel:u}),visibilityView:new l({BaseModel:u}),settingsView:new d({BaseModel:u})})}()}()},981:function(e,t,i){var s=i(792);Hustle.define("Entries.View",(function(e){"use strict";const t="_page_hustle_entries";if(t!==pagenow.substr(pagenow.length-t.length))return;new(Backbone.View.extend({el:".sui-wrap-hustle",events:{"click .sui-pagination-wrap .hustle-open-inline-filter":"openFilterInline","click .sui-pagination-wrap .hustle-open-dialog-filter":"openFilterModal","click .hustle-delete-entry-button":"openDeleteModal","click .sui-active-filter-remove":"removeFilter","change input[name=search_email]":"toggleClearButton","change input[name=date_range]":"toggleClearButton","apply.daterangepicker input[name=date_range]":"toggleClearButton","click .hustle-entries-clear-filter":"clearFilter"},initialize(){this.initializeDaterangepicker();const t=e(".hui-entries-alert");t.length&&(t.attr("colspan",t.closest(".sui-table").find("> thead tr th").length),t.find("i").hide(),t.find("span").removeClass("sui-screen-reader-text")),e("input[name=search_email]").trigger("change")},initializeDaterangepicker(){const t=this.$(".hui-box-actions input.hustle-entries-filter-date"),i=this.$("#hustle-dialog--filter-entries input.hustle-entries-filter-date"),s=function(t,i){e(this).val(i.startDate.format("MM/DD/YYYY")+" - "+i.endDate.format("MM/DD/YYYY"))},n={autoUpdateInput:!1,autoApply:!0,alwaysShowCalendars:!0,locale:optinVars.daterangepicker,ranges:this.getDaterangepickerRanges()};t.daterangepicker(n),t.on("apply.daterangepicker",s);const a=Object.assign({parentEl:"#hustle-dialog--filter-entries .sui-box-body"},n);i.daterangepicker(a),i.on("apply.daterangepicker",s)},getDaterangepickerRanges(){const e={},t=optinVars.daterangepicker.ranges,i={today:[moment(),moment()],yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],last_seven_days:[moment().subtract(6,"days"),moment()],last_thirty_days:[moment().subtract(29,"days"),moment()],this_month:[moment().startOf("month"),moment().endOf("month")],last_month:[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]};for(const s in i){const n=t[s],a=i[s];e[n]=a}return e},openFilterInline(e){const t=this.$(e.target),i=t.closest(".sui-pagination-wrap").find(".sui-button-icon"),s=t.closest(".hui-actions-bar").next(".sui-pagination-filter");i.toggleClass("sui-active"),s.toggleClass("sui-open"),e.preventDefault(),e.stopPropagation()},openFilterModal(t){t.preventDefault(),SUI.openModal("hustle-dialog--filter-entries",e(t.currentTarget)[0],this.$("#hustle-dialog--filter-entries .hustle-modal-close")[0],!0)},removeFilter(e){const t=this.$(e.target).data("filter"),i=new RegExp("&"+t+"=[^&]*","i");-1!==["order_by","search_email","date_range"].indexOf(t)&&(location.href=location.href.replace(i,""))},openDeleteModal(t){t.preventDefault();const i=e(t.target),n={id:i.data("id"),nonce:i.data("nonce"),action:"delete",title:i.data("title"),description:i.data("description"),actionClass:""};s.deleteModal.open(n,i[0])},toggleClearButton(t){const i=e(t.target).closest("form"),s=i.find(".hustle-entries-clear-filter");i.find("input[name=search_email]").val()||i.find("input[name=date_range]").val()?s.prop("disabled",!1):s.prop("disabled",!0)},clearFilter(e){e.preventDefault(),this.$("input[name=search_email]").val(""),this.$("input[name=date_range]").val(""),this.toggleClearButton(e)}}))}))},4475:function(e,t,i){var s=i(792);Hustle.define("Integrations.View",(function(e){"use strict";const t="_page_hustle_integrations";if(t!==pagenow.substr(pagenow.length-t.length))return;new(Backbone.View.extend({el:".sui-wrap-hustle",events:{"click .connect-integration":"connectIntegration","keypress .connect-integration":"preventEnterKeyFromDoingThings"},initialize(){this.stopListening(Hustle.Events,"hustle:providers:reload",this.renderProvidersTables),this.listenTo(Hustle.Events,"hustle:providers:reload",this.renderProvidersTables),this.render()},render(){const e=this.$el.find("#hustle-not-connected-providers-section"),t=this.$el.find("#hustle-connected-providers-section");0<e.length&&0<t.length&&this.renderProvidersTables(),optinVars.integration_redirect&&this.handleIntegrationRedirect()},renderProvidersTables(){const t=this,i={};this.$el.find(".hustle-integrations-display").html(`<div class="sui-notice hustle-integration-loading-notice">\n\t\t\t\t\t\t<div class="sui-notice-content">\n\t\t\t\t\t\t\t<div class="sui-notice-message">\n\n\t\t\t\t\t\t\t\t<span class="sui-notice-icon sui-icon-loader sui-loading sui-md" aria-hidden="true"></span>\n\t\t\t\t\t\t\t\t<p>${optinVars.fetching_list}</p>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`),i.action="hustle_provider_get_providers",i._ajax_nonce=optinVars.providers_action_nonce,i.data={};e.post({url:ajaxurl,type:"post",data:i}).done((function(e){e&&e.success&&(t.$el.find("#hustle-not-connected-providers-section").html(e.data.not_connected),t.$el.find("#hustle-connected-providers-section").html(e.data.connected))})).always((function(){t.$el.find(".hustle-integration-loading-notice").remove()}))},preventEnterKeyFromDoingThings(e){13===e.which&&e.preventDefault()},connectIntegration(e){s.integrationsModal.open(e)},handleIntegrationRedirect(){const e=optinVars.integration_redirect,t=optinVars.integrations_migrate;if(window.history.pushState({},document.title,optinVars.integrations_url),"notification"===e.action){const t="success"===e.status?"success":"error",i=e.delay?e.delay:1e4;s.Notification.open(t,e.message,i)}if(t.hasOwnProperty("provider_modal")&&"aweber"===t.provider_modal&&s.ProviderMigration.open(t.provider_modal,t.integration_id),t.hasOwnProperty("migration_notificaiton")){const e="success"===t.migration_notificaiton.status?"success":"error",i=t.migration_notificaiton.delay?t.migration_notificaiton.delay:1e4;s.Notification.open(e,t.migration_notificaiton.message,i)}}}))}))},3379:function(e,t,i){var s=i(2947),n=i(792);!function(e){"use strict";Optin.listingBase=Hustle.View.extend({el:".sui-wrap-hustle",logShown:!1,moduleType:"",previewView:null,_events:{"click .hustle-create-module":"openCreateModal","click .hustle-manage-tracking-button":"openManageTrackingModal","click .hustle-import-module-button":"openImportModal","click .hustle-upgrade-modal-button":"openUpgradeModal","click .hustle-single-module-button-action":"handleSingleModuleAction","click .hustle-preview-module-button":"previewModule","click form.sui-bulk-actions .hustle-bulk-apply-button":"bulkActionCheck","click #hustle-dialog--delete .hustle-delete":"bulkActionSend","click #hustle-bulk-action-reset-tracking-confirmation .hustle-delete":"bulkActionSend","click .sui-accordion-item-action .hustle-onload-icon-action":"addLoadingIconToActionsButton"},initialize(t){this.events=e.extend(!0,{},this.events,this._events),this.delegateEvents(),this.moduleType=t.moduleType;const i=Hustle.get("Modals.New_Module"),s=Hustle.get("Modals.ImportModule");this.newModuleModal=new i(this.moduleType,this.getPreviewView()),this.ImportModal=new s,e(".sui-accordion-item-header").on("click",(e=>this.openTrackingChart(e))),e(".hustle-display-chart").length&&this.openTrackingChart(e(".hustle-display-chart")),this.doActionsBasedOnUrl()},doActionsBasedOnUrl(){if("true"===s.getUrlParam("create-module")&&setTimeout((()=>{e(".hustle-create-module").trigger("click")}),100),"true"===s.getUrlParam("requires-pro")){const e=this;setTimeout((()=>e.openUpgradeModal()),100)}if(s.getUrlParam("show-notice")){const e="success"===s.getUrlParam("show-notice")?"success":"error",t=s.getUrlParam("notice"),i=t&&"undefined"!==optinVars.messages[t]?optinVars.messages[t]:s.getUrlParam("notice-message"),a=s.getUrlParam("notice-close",null),o="false"!==a&&a;void 0!==i&&i.length&&n.Notification.open(e,i,o)}const t=s.getUrlParam("view-stats");if(t){const i=e('.hustle-list .sui-accordion-item-header[data-id="'+t+'"]');i.trigger("click"),e("html, body").animate({scrollTop:i.closest(".sui-accordion-item").offset().top-40},1e3)}},handleSingleModuleAction(e){this.addLoadingIcon(e),s.moduleActionHandler.initAction(e,"listing",this)},previewModule(t){t.preventDefault();const i=e(t.currentTarget);this.getPreviewView().open(i.data("id"),i.data("type"),i,{module_name:i.data("name")})},getPreviewView(){if(!this.previewView){const e=Hustle.get("Modals.Preview");this.previewView=new e}return this.previewView},openTrackingChart(t){let i="";if(t.target){if(e(t.target).closest(".sui-accordion-item-action").length)return!0;t.preventDefault(),t.stopPropagation(),i=e(t.currentTarget)}else i=t;const s=this,n=i.parent();let a=n.find(".sui-chartjs-animated");if(n.hasClass("sui-accordion-item--disabled")||n.hasClass("sui-accordion-item--open")?n.removeClass("sui-accordion-item--open"):n.addClass("sui-accordion-item--open"),n.find(".sui-accordion-item-data").addClass("sui-onload"),a.removeClass("sui-chartjs-loaded"),n.hasClass("sui-accordion-item--open")){const t={id:i.data("id"),_ajax_nonce:i.data("nonce"),action:"hustle_tracking_data"};e.ajax({url:ajaxurl,type:"POST",data:t,success(e){e.success&&e.data&&(n.find(".sui-accordion-item-body").html(e.data.html),s.trackingChart.init(n,e.data.charts_data),a=n.find(".sui-chartjs-animated"),SUI.suiTabs()),n.find(".sui-accordion-item-data").removeClass("sui-onload"),a.addClass("sui-chartjs-loaded")},error(){n.find(".sui-accordion-item-data").removeClass("sui-onload"),a.addClass("sui-chartjs-loaded")}})}},getChecked(t){let i=".sui-wrap-hustle .sui-accordion-item-title input[type=checkbox]";return"checked"===t&&(i+=":checked"),e(i)},bulkActionCheck(t){const i=e(t.target),s=i.closest(".hustle-bulk-actions-container").find('select[name="hustle_action"] option:selected').val();if(0===this.getChecked("checked").length||"undefined"===s)return!1;if("delete"===s){const e={actionClass:"hustle-delete",action:"delete",title:i.data("delete-title"),description:i.data("delete-description")};return n.deleteModal.open(e,i[0]),!1}if("reset-tracking"===s){const e={actionClass:"hustle-delete",action:"reset-tracking",title:i.data("reset-title"),description:i.data("reset-description")};return n.deleteModal.open(e,i[0]),!1}this.bulkActionSend(t,s)},bulkActionSend(t,i){t.preventDefault(),this.addLoadingIcon(t);const s=i||e(t.target).data("hustle-action"),n=this.getChecked("checked");if(0===n.length)return!1;const a=[];e.each(n,(function(){a.push(e(this).val())}));const o=e(".sui-bulk-actions .hustle-bulk-apply-button"),l={ids:a,hustle:s,type:o.data("type"),_ajax_nonce:o.data("nonce"),action:"hustle_listing_bulk"};e.ajax({url:ajaxurl,type:"POST",data:l,success(e){e.success?location.reload():SUI.closeModal()}})},addLoadingIcon(t){const i=e(t.currentTarget);i.hasClass("sui-button")&&i.addClass("sui-button-onload")},addLoadingIconToActionsButton(t){e(t.currentTarget).closest(".sui-accordion-item-action").find(".sui-dropdown-anchor").addClass("sui-button-onload")},openCreateModal(t){!1===e(t.currentTarget).data("enabled")?this.openUpgradeModal():this.newModuleModal.open()},openUpgradeModal(t){let i=this.$("#hustle-create-new-module")[0];t&&(t.preventDefault(),t.stopPropagation(),i=t.currentTarget),e(".sui-button-onload").removeClass("sui-button-onload"),e("#hustle-modal--upgrade-to-pro").length&&SUI.openModal("hustle-modal--upgrade-to-pro",i,"hustle-button--upgrade-to-pro",!0)},openImportModal(t){!1===e(t.currentTarget).data("enabled")?this.openUpgradeModal():this.ImportModal.open(t)},openManageTrackingModal(t){const i=Optin.template("hustle-manage-tracking-form-tpl"),s=e("#hustle-dialog--manage-tracking"),n=e(t.currentTarget),a=n.data("module-id"),o={enabledTrackings:n.data("tracking-types").split(",")};s.find("#hustle-manage-tracking-form-container").html(i(o)),s.find("#hustle-button-toggle-tracking-types").data("module-id",a),SUI.openModal("hustle-dialog--manage-tracking",n,"hustle-module-tracking--inline",!0)},trackingChart:{chartsData:{},theCharts:{},init(t,i){t.find("select.hustle-conversion-type").each(((i,s)=>{SUI.select.init(e(s)),e(s).on("change.select2",(e=>this.conversionTypeChanged(e,t)))})),this.chartsData=i,Object.values(i).forEach((e=>this.updateChart(e)))},conversionTypeChanged(t,i){const s=e(t.currentTarget),n=s.val(),a=s.data("moduleType"),o=this.chartsData[a],l=i.find(`.hustle-tracking-${a}-conversions-count`),d=i.find(`.hustle-tracking-${a}-conversions-rate`);l.text(o[n].conversions_count),d.text(o[n].conversion_rate+"%"),this.updateChart(o,n,!1)},updateChart(e,t="all",i=!0){const s=e.views,n=[{label:"Submissions",data:e[t].conversions,backgroundColor:["#E1F6FF"],borderColor:["#17A8E3"],borderWidth:2,pointRadius:0,pointHitRadius:20,pointHoverRadius:5,pointHoverBorderColor:"#17A8E3",pointHoverBackgroundColor:"#17A8E3"},{label:"Views",data:s,backgroundColor:["#F8F8F8"],borderColor:["#DDDDDD"],borderWidth:2,pointRadius:0,pointHitRadius:20,pointHoverRadius:5,pointHoverBorderColor:"#DDDDDD",pointHoverBackgroundColor:"#DDDDDD"}];void 0!==this.theCharts[e.id]?i?(this.theCharts[e.id].destroy(),this.createNewChart(e,n)):(this.theCharts[e.id].data.datasets=n,this.theCharts[e.id].update()):this.createNewChart(e,n)},createNewChart(e,t){let i=Math.max(...e.views)+2;const s=document.getElementById(e.id);if(Math.max(...e.views)<Math.max(...e.conversions)&&(i=Math.max(...e.conversions)+2),!s)return;const n={labels:e.days,datasets:t},a={maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1,gridLines:{color:"rgba(0, 0, 0, 0)"}}],yAxes:[{display:!1,gridLines:{color:"rgba(0, 0, 0, 0)"},ticks:{beginAtZero:!1,min:0,max:i,stepSize:1}}]},elements:{line:{tension:0},point:{radius:.5}},tooltips:{custom(e){e&&(e.displayColors=!1)},callbacks:{title:e=>0===e[0].datasetIndex?optinVars.labels.submissions.replace("%d",e[0].yLabel):1===e[0].datasetIndex?optinVars.labels.views.replace("%d",e[0].yLabel):void 0,label:e=>e.xLabel,labelTextColor:()=>"#AAAAAA"}}};this.theCharts[e.id]=new Chart(s,{type:"line",fill:"start",data:n,options:a})}}})}(jQuery)},5013:function(e,t,i){var s=i(792);Hustle.define("Modals.New_Module",(function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--create-new-module",previewView:null,moduleType:"",moduleName:!1,moduleMode:"optin",moduleTemplate:"none",$moveForwardButton:null,data:{},mainDialogLabelId:"hustle-create-new-module-dialog-label",mainDialogDescriptionId:"hustle-create-new-module-dialog-description",events:{'keydown input[name="name"]':"nameChanged","click #hustle-create-module":"createModule",'change input[name="mode"]':"modeChanged","click #hustle-go-to-templates-button":"goToTemplatesStep","click .hustle-template-select-button":"createNonSshare","click .hustle-template-preview-button":"previewTemplate","click .hustle-modal-go-back":"goToStepOne"},initialize(e,t){this.moduleType=e,this.previewView=t;const i="social_sharing"!==this.moduleType?"#hustle-go-to-templates-button":"#hustle-create-module";this.$moveForwardButton=this.$(i)},open(){SUI.openModal("hustle-dialog--create-new-module","hustle-create-new-module","hustle-module-name"),"social_sharing"!==this.moduleType&&this.goToStepOne()},nameChanged(t){setTimeout((()=>{this.$(".sui-error-message").hide();const i=e(t.currentTarget).val().trim();0===i.length?(this.moduleName=!1,this.$moveForwardButton.prop("disabled",!0),this.$("#error-empty-name").closest(".sui-form-field").addClass("sui-form-field-error"),this.$("#error-empty-name").show()):(this.moduleName=i,this.$moveForwardButton.prop("disabled",!1),this.$("#error-empty-name").closest(".sui-form-field").removeClass("sui-form-field-error"),this.$("#error-empty-name").hide())}),300)},modeChanged(t){const i=e(t.currentTarget).val();this.moduleMode=i},goToStepOne(e){const t=e?"back":null;this.$el.attr("aria-labelledby",this.mainDialogLabelId),this.$el.attr("aria-describedby",this.mainDialogDescriptionId),SUI.slideModal("hustle-create-new-module-step-1","hustle-module-name",t)},goToTemplatesStep(e){if(e.preventDefault(),this.isNameValid()&&this.isModeValid()){const e="optin"===this.moduleMode?"optin-templates":"informational-templates",t=`hustle-create-new-module-dialog-step-${e}-label`,i=`hustle-create-new-module-dialog-step-${e}-description`;this.$el.attr("aria-labelledby",t),this.$el.attr("aria-describedby",i),SUI.slideModal(`hustle-create-new-module-step-${e}`,this.$el.find(`#hustle-create-new-module-step-${e} .hustle-template-option--none`)[0],"next")}},isNameValid(){return!1!==this.moduleName},isModeValid(){return"optin"===this.moduleMode||"informational"===this.moduleMode},createNonSshare(t){const i=e(t.currentTarget).data("template");this.moduleTemplate=i,this.createModule(t)},createModule(t){const i=this.$el.data("nonce"),n=this.$el.data("error-message"),a=e(t.currentTarget),o={module_name:this.moduleName,module_type:this.moduleType,module_mode:this.moduleMode,module_template:this.moduleTemplate,action:"hustle_create_new_module",_ajax_nonce:i};a.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:o}).done((function(e){e&&e.data&&e.data.redirect_url?window.location.replace(e.data.redirect_url):(a.removeClass("sui-button-onload"),s.Notification.open("error",n,!1))})).fail((function(){a.removeClass("sui-button-onload"),s.Notification.open("error",n,!1)}))},previewTemplate(t){const i=e(t.currentTarget);this.previewView.open(0,i.data("module-type"),i,{module_name:i.data("name"),module_type:i.data("module-type"),template_name:i.data("template"),template_mode:i.data("module-mode")})}})}))},7580:function(){Hustle.define("Modals.ImportModule",(function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--import",events:{"change #hustle-import-file-input":"selectUploadFile","click .sui-upload-file":"changeFile","click .sui-upload-file button":"resetUploadFile","click .hustle-import-check-all-checkbox":"checkAll","change .hustle-module-meta-checkbox":"uncheckAllOption"},initialize(){},open(t){const i=e(t.currentTarget),s=i.data("module-id"),n=Optin.template("hustle-import-modal-options-tpl"),a=e("#hustle-dialog--import"),o=a.find("#hustle-import-module-submit-button"),l=void 0===s,d={isNew:l,isOptin:"optin"===i.data("module-mode")};a.find("#hustle-import-modal-options").html(n(d)),l?(o.removeAttr("data-module-id"),SUI.tabs(),a.find(".sui-tab-item").on("click",(function(){const t=e(this);e("#"+t.data("label-for")).trigger("click")}))):o.attr("data-module-id",s),SUI.openModal("hustle-dialog--import",t.currentTarget,"hustle-import-file-input",!0)},selectUploadFile(t){t.preventDefault();const i=e(t.target).val().replace(/C:\\fakepath\\/i,"");SUI.closeNotice("hustle-dialog--import-error-notice"),i?(e(".sui-upload-file span:first").text(i),e(".sui-upload").addClass("sui-has_file"),e("#hustle-import-module-submit-button").prop("disabled",!1)):(e(".sui-upload").removeClass("sui-has_file"),e(".sui-upload-file span:first").text(""),e("#hustle-import-module-submit-button").prop("disabled",!0))},resetUploadFile(t){t.stopPropagation(),e("#hustle-import-file-input").val("").trigger("change")},changeFile(){e("#hustle-import-file-input").trigger("click")},checkAll(t){const i=e(t.currentTarget),s=i.is(":checked");i.closest(".hui-inputs-list").find("input.hustle-module-meta-checkbox:not(.hustle-import-check-all-checkbox)").prop("checked",s)},uncheckAllOption(t){const i=e(t.currentTarget).closest(".hui-inputs-list").find(".hustle-import-check-all-checkbox");i.is(":checked")&&i.prop("checked",!1)}})}))},8327:function(){Hustle.define("Mixins.Model_Updater",(function(e){"use strict";return{initMix(){this.events=_.extend({},this.events,this._events),this.delegateEvents()},_events:{"change textarea":"_updateText",'change input[type="text"]':"_updateText",'change input[type="url"]':"_updateText",'change input[type="hidden"]':"_updateText",'change input[type="number"]':"_updateText",'change input[type="checkbox"]':"_updateCheckbox","change input[type=radio]":"_updateRadios","change select":"_updateSelect"},_updateText(t){const i=e(t.target),s=i.data("attribute"),n=this[i.data("model")||"model"],a=_.isTrue(i.data("silent"))?{silent:!0}:{};n&&s&&(t.stopPropagation(),n.set.call(n,s,t.target.value,a))},_updateCheckbox(t){const i=e(t.target),s=i.data("attribute"),n=i.val(),a=this[i.data("model")||"model"],o=_.isTrue(i.data("silent"))?{silent:!0}:{};if(a&&s)if(t.stopPropagation(),"on"!==n){let e=[];const t=a.get.call(a,s);i.is(":checked")?(e=[...t],e.push(n)):e=_.without(t,n),a.set.call(a,s,e,o)}else a.set.call(a,s,i.is(":checked")?"1":"0",o)},_updateRadios(t){const i=e(t.target),s=i.data("attribute"),n=this[i.data("model")||"model"],a=_.isTrue(i.data("silent"))?{silent:!0}:{};n&&s&&(t.stopPropagation(),n.set.call(n,s,t.target.value,a))},_updateSelect(t){const i=e(t.target),s=i.data("attribute"),n=this[i.data("model")||"model"],a=_.isTrue(i.data("silent"))?{silent:!0}:{};n&&s&&(t.stopPropagation(),n.set.call(n,s,i.val(),a))}}}))},4484:function(){Hustle.define("Mixins.Module_Settings",(function(e){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-wizard-behaviour",events:{},triggersModel:null,init(e){const t=this,i=e.BaseModel.extend({defaults:{},initialize(e){_.extend(this,e);const i=Hustle.get("Models.Trigger");this.get("triggers")instanceof Backbone.Model||(this.set("triggers",new i(this.triggers),{silent:!0}),t.triggersModel=this.get("triggers"))}});this.model=new i(optinVars.current.settings||{}),this.moduleType=optinVars.current.data.module_type;const s=Hustle.get("Modals.EditSchedule");this.editScheduleView=new s({model:this.model}),this.listenTo(this.model,"change",this.viewChanged),"embedded"!==this.moduleType&&this.listenTo(this.model.get("triggers"),"change",this.triggersViewChanged),this.render()},render(){this.renderScheduleSection(),this.editScheduleView.on("schedule:updated",(()=>this.renderScheduleSection())),this.initTriggerAccordionsTag(),this.toggleTriggerAccordionsDisabled()},renderScheduleSection(){const t=Optin.template("hustle-schedule-row-tpl"),i=e("#hustle-schedule-row"),s=this.model.get("schedule"),n=Object.assign({},s),a={startDate:"",startTime:"",endDate:"",endTime:"",activeDays:"",activeTime:""};let o=!1;if(n.is_schedule=this.model.get("is_schedule"),n.is_schedule){const e=Object.assign({},optinVars.schedule.months),t=optinVars.schedule.meridiem;if("0"===n.not_schedule_start){const i=n.start_date.split("/"),s=e[i[0]-1],o=t[n.start_meridiem_offset];a.startDate=`${i[1]} ${s} ${i[2]}`,a.startTime=`(${n.start_hour}:${n.start_minute} ${o})`}if("0"===n.not_schedule_end){const i=n.end_date.split("/"),s=e[i[0]-1],l=t[n.end_meridiem_offset];a.endDate=`${i[1]} ${s} ${i[2]}`,a.endTime=`(${n.end_hour}:${n.end_minute} ${l})`,o=this.isScheduleFinished(n)}if("week_days"===n.active_days){const e=optinVars.schedule.week_days,t=n.week_days.map((t=>e[t].toUpperCase()));a.activeDays=t.join(", ")}if("0"===n.is_active_all_day){const e=t[n.day_start_meridiem_offset],i=t[n.day_end_meridiem_offset],s=`${n.day_start_hour}:${n.day_start_minute} ${e}`,o=`${n.day_end_hour}:${n.day_end_minute} ${i}`;a.activeTime=s+" - "+o}}n.strings=a,n.hasFinished=o,i.html(t(n)),i.find(".hustle-button-open-schedule-dialog").on("click",(()=>this.editScheduleView.open()))},isScheduleFinished(e){const t=(new Date).getTime(),{time_to_use:i,end_date:s,end_hour:n,end_minute:a,end_meridiem_offset:o}=e,l=`${s} ${n}:${a} ${o}`;let d=!1,r=!1;if("server"===i)r=optinVars.schedule.wp_gmt_offset;else{const t=e.custom_timezone;if(t.includes("UTC")){const e=t.replace("UTC","");r=e.length?parseFloat(e):0}else{d=moment.tz(l,"MM/DD/YYYY hh:mm aa",t).format("x")}}if(!1===d&&!1!==r){const e=60*r,t=0<e?"+":"-",i=Math.abs(e),s=sprintf("%s%02d:%02d",t,i/60,i%60);d=moment.parseZone(l+" "+s,"MM/DD/YYYY hh:mm a Z").format("x")}return t>d},viewChanged(e){const t=e.changed;if("on_submit"in t){const e=this.$("#hustle-on-submit-delay-wrapper");e.length&&("nothing"!==t.on_submit?e.removeClass("sui-hidden"):e.addClass("sui-hidden"))}},triggersViewChanged(e){const t=e.changed,i=Object.keys(t)[0];if("trigger"===i)this.toggleTriggerAccordionsDisabled();else{let e=this.$(`[name="trigger_${i}"]`);if(e.length||(e=this.$(`[name="triggers.${i}"]`)),this.updateTriggerTag(e.closest(".hustle-trigger-accordion-item")),"on_scroll"===i){const e=this.triggersModel.get("on_scroll"),t="scrolled"===e?"selector":"scrolled",i="scrolled"===e?"scrolled":"selector";this.$(`#hustle-on-scroll--${t}-toggle-wrapper`).addClass("sui-hidden"),this.$(`#hustle-on-scroll--${i}-toggle-wrapper`).removeClass("sui-hidden")}}},toggleTriggerAccordionsDisabled(){const t=this.$(".hustle-trigger-accordion-item"),i=this.triggersModel.get("trigger"),s=e=>{const t=e.data("trigger"),s=e.find(".hustle-trigger-tag");i.includes(t)?(s.show(),e.removeClass("sui-accordion-item--disabled")):(s.hide(),e.addClass("sui-accordion-item--disabled"))};for(const i of t)s(e(i))},initTriggerAccordionsTag(){const t=this.$(".hustle-trigger-accordion-item");for(const i of t)this.updateTriggerTag(e(i))},updateTriggerTag(e){const t=e.data("trigger"),i=e.find(".sui-accordion-item-title"),s=e.find(".hustle-trigger-tag");s.length&&s.remove();const n=this.getTriggerTagText(t);for(const e of n)if(e.trim().length){const t=`<span class="sui-tag hustle-trigger-tag">${e}</span>`;i.append(t)}},getTriggerTagText(e){let t=[];return t="scroll"===e?this.getTriggerTagTextForScroll():"click"===e?this.getTriggerTagTextForClick():this.getTriggerTagTextForDelays(e),t},getTriggerTagTextForScroll(){let e,t;"selector"===this.triggersModel.get("on_scroll")?(e=_.escape(this.triggersModel.get("on_scroll_css_selector")),t=optinVars.triggers.scroll_element_tag):(e=this.triggersModel.get("on_scroll_page_percent"),t=optinVars.triggers.scroll_percentage_tag);return[t.replace("{value}",e)]},getTriggerTagTextForClick(){const e=[],t="1"===this.triggersModel.get("enable_on_click_element"),i="1"===this.triggersModel.get("enable_on_click_shortcode");if(t){const t=_.escape(this.triggersModel.get("on_click_element"));e.push(t)}return i&&e.push("[wd_hustle]"),e},getTriggerTagTextForDelays(e){const t={time:{time:"on_time_delay",unit:"on_time_unit"},exit_intent:{time:"on_exit_intent_delayed_time",unit:"on_exit_intent_delayed_unit"},adblock:{time:"on_adblock_delay",unit:"on_adblock_delay_unit"}}[e],i=this.triggersModel.get(t.time);let s=optinVars.triggers.immediately_tag;if("0"!==i){const e=this.triggersModel.get(t.unit),n=optinVars.triggers[e];s=optinVars.triggers.delayed_tag.replace("{time}",i).replace("{unit}",n)}return[s]}})}))},831:function(e,t,i){var s=i(2947),n=i(792);Hustle.define("Mixins.Module_Content",(function(){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-wizard-content",events:{},init(e){this.model=new e.BaseModel(optinVars.current.content||{}),this.moduleType=optinVars.current.data.module_type,this.listenTo(this.model,"change",this.modelUpdated),this.render()},render(){this.initImageUploaders(),"true"===s.getUrlParam("new")&&n.Notification.open("success",optinVars.messages.module_created,1e4)},initImageUploaders(){const e=Hustle.get("imageUploader"),t=["feature_image","background_image"];for(const i of t){const t=this.$("#hustle-choose-"+i);t.length&&new e({el:t,model:this.model,attribute:i,moduleType:this.moduleType})}},updateLabelledbyCtaContent(){const e=this.$('input[name="show_cta"]:checked').attr("id"),t=this.$(`[data-label-for="${e}"]`).attr("id");this.$("#tab-content-cta-button-one").attr("aria-labelledby",t)},modelUpdated(e){const t=Object.keys(e.changed)[0],i=this.getActionOnModelUpdated(t);void 0!==i&&i(e.changed),Hustle.Events.trigger("modules.view.contentUpdate",e.changed)},getActionOnModelUpdated(e){return{show_cta:e=>{"0"!==e.show_cta&&s.showHideDependencyOnSelectChange(this.$("#hustle-content-cta-options-container"))}}[e]}})}))},9547:function(e,t,i){var s=i(792),n=i(2947);Hustle.define("Mixins.Module_Design",(function(e){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-wizard-appearance",cssEditor:!1,fontFamilies:{},fontFamiliesOptions:[],updatedProperties:{},contentPropIsShown:{title:!0,sub_title:!0,main_content:!0,feature_image:!0,background_image:!0,show_never_see_link:!0,show_cta:!0},events:{"click .hustle-css-stylable":"insertSelector","click .hustle-reset-settings-block > button":"resetSettingsBlock","change [data-link-fields]":"linkFieldsChanged","change [data-linked-fields]":"linkedFieldsChanged","change .hustle-font-family-select":"fontFamilyUpdated",'change select[name="feature_image_width_option"]':"updateFeatureImageWidth","click .hustle-button-apply-global-font":"applyGlobalFontClicked","change .hustle-required-field":"requiredFieldChanged"},init(e){this.model=new e.BaseModel(optinVars.current.design||{}),this.beforeRender(),this.render()},beforeRender(){this.listenTo(this.model,"change",this.modelUpdated),Hustle.Events.on("modules.view.contentUpdate",(e=>this.contentModelUpdated(e))),Hustle.Events.on("modules.view.emailsUpdate",(e=>this.emailsModelUpdated(e))),Hustle.Events.on("modules.view.integrationsUpdate",(e=>this.integrationsModelUpdate(e))),this.$("#hustle-color-palettes-list").on("select2:open",(()=>this.addCreatePalettesLink())),this.$("#tab-content-customize_colors-custom .sui-accordion-item").on("click",(e=>this.initiateColorPickers(e))),this.$(".hustle-typography-elements-row .sui-accordion-item-header").on("click",(e=>this.initiateFontFamilySelectOnAccordionClick(e))),this.setFontFamilyOptions(),this.setVisibilityOnRender()},render(){this.toggleDeviceTabs(),this.toggleCtaButtonsTextAlignment(),this.setImageAligmentOptions(),this.toggleFeatureImageSizeSettingRow(),this.toggleFeatureImageSizeRows(),this.cssEditor=this.createEditor("hustle_custom_css"),this.setVanillaThemeVisibility(),this.hideOtherOptionsInAcordionItem("feature_image_hide_on_mobile","1"===this.model.get("feature_image_hide_on_mobile")),this.hideOtherOptionsInAcordionItem("feature_image_position",!this.contentPropIsShown.feature_image),optinVars.current.is_optin?(this.setSucccessfulMessageOptionVisibility(optinVars.current.emails),this.formFieldsUpdated(optinVars.current.emails),this.updateMailchimpRelatedAccordions(optinVars.current.integrations_settings)):this.handleStyleChange();const t=this;e.each(["title","sub_title","feature_image","background_image","show_cta","show_never_see_link","main_content"],(function(e,i){t.updateElementsRow(i)}))},setFontFamilyOptions(){this.fetchFontFamilyOptions().done((t=>{this.fontFamilies=t.data,e.each(this.fontFamilies,((e,t)=>{this.fontFamiliesOptions.push({id:e,text:t.label})}));const i=this.$('.hustle-font-family-select[name="global_font_family"]');this.initiateFontFamilySelects(i,!0),this.toggleCustomFontInput(i)}))},fetchFontFamilyOptions(){const t={action:"hustle_fetch_font_families",_ajax_nonce:optinVars.typography.fetch_nonce};return e.post({url:ajaxurl,type:"post",data:t})},initiateFontFamilySelectOnAccordionClick(t){const i=this;e(t.currentTarget).siblings(".sui-accordion-item-body").find(".hustle-font-family-select.sui-disabled").each((function(){i.initiateFontFamilySelects(e(this)),i.toggleCustomFontInput(e(this))}))},initiateFontFamilySelects(e,t=!1){(!1===e.data("fonts-loaded")||t)&&(e.SUIselect2("destroy"),e.SUIselect2({data:this.fontFamiliesOptions}),e.removeClass("sui-disabled"),e.prop("disabled",!1),e.data("fonts-loaded",!0))},fontFamilyUpdated(t){const i=e(t.currentTarget),s=i.data("weight"),n=this.$(`[name="${s}"]`),a=this.$(`[name="${s}_mobile"]`),o=i.val(),l=[];let d;o&&(d=this.fontFamilies[o].variants);let r=!0;if(void 0!==d){for(const e of d)l.push({id:e,text:e,selected:r}),!0===r&&(r=!1);n.html(l),n.SUIselect2("destroy"),n.SUIselect2({data:l}),a.html(l),a.SUIselect2("destroy"),a.SUIselect2({data:l})}this.toggleCustomFontInput(i)},applyGlobalFontClicked(t){const i=e(t.currentTarget);i.addClass("sui-button-onload"),setTimeout((()=>{this.applyGlobalFont(),i.removeClass("sui-button-onload"),s.Notification.open("success",optinVars.typography.global_font_applied,4e3)}),0)},applyGlobalFont(){const t=this,i=this.$('.hustle-font-family-select:not([name="global_font_family"])'),s=this.model.get("global_font_family"),n="custom"===s,a=this.model.get("global_custom_font_family");let o;i.each((function(){const i=e(this);if(0===i.find('option[value="'+s+'"]').length?(o=new Option(s,s,!0,!1),i.empty().val(null).append(o)):i.val(s),i.trigger("change"),n){const e=i.data("custom");t.$(`input[name="${e}"]`).val(a).trigger("change")}t.toggleCustomFontInput(i)})),this.globalFontVariantsUpdated(s)},globalFontVariantsUpdated(e){const t=this.$(".hustle-font-weight"),i=this.fontFamilies[e].variants,s=[];let n=!0;if(void 0!==i){for(const e of i)s.push({id:e,text:e,selected:n}),!0===n&&(n=!1);t.html(s),t.SUIselect2("destroy"),t.SUIselect2({data:s})}},toggleCustomFontInput(e){const t=e.val(),i=e.data("custom"),s=this.$(`input[name="${i}"]`).closest(".sui-form-field");"custom"===t?n.accessibleShow(s):n.accessibleHide(s)},toggleDeviceTabs(){const e=this.$("#hustle-device_settings-tabs > .sui-tabs-menu"),t=this.$("#hustle-device_settings-tabs > .sui-tabs-content"),i=this.$("#hustle-device_settings-tabs");"1"===this.model.get("enable_mobile_settings")?(i.addClass("hustle-mobile-enabled"),e.prop("aria-hidden",!1),e.prop("hidden",!1),t.find("#tab-content-device_settings-desktop").attr("role","tabpanel"),t.find("#tab-content-device_settings-mobile").prop("aria-hidden",!1)):(i.removeClass("hustle-mobile-enabled"),e.find("#tab-device_settings-desktop").trigger("click"),e.attr("aria-hidden",!0),e.attr("hidden",!0),t.find("#tab-content-device_settings-desktop").removeAttr("role"),t.find("#tab-content-device_settings-mobile").attr("aria-hidden",!0))},initiateColorPickers(t){const i=e(t.currentTarget),s="hustle-colorpickers-initialized",n=i.find(".sui-colorpicker-input");!i.hasClass(s)&&n.length&&(i.addClass(s),this.createPickers(n))},createPickers(t){const i=this;t.wpColorPicker({change(t,i){const s=e(this);s.val()!==i.color.toCSS()&&s.val(i.color.toCSS()).trigger("change")},palettes:["#333333","#FFFFFF","#17A8E3","#E1F6FF","#666666","#AAAAAA","#E6E6E6"]}),t.hasClass("wp-color-picker")&&t.each((function(){let t="hex";const s=e(this),n=s.closest(".wp-picker-container").find(".wp-color-result"),a=n.find(".color-alpha"),o=s.closest(".sui-colorpicker-wrap"),l=o.find(".sui-colorpicker-value span[role=button]"),d=o.find(".sui-colorpicker-value"),r=d.find("button"),c=d.find(".hustle-colorpicker-input");!0===s.data("alpha")?(t="rgba",s.on("change",(function(e,t){l.find("span").css({"background-color":a.css("background")}),void 0===t&&c.val(s.val())}))):s.on("change",(function(e,t){l.find("span").css({"background-color":n.css("background-color")}),void 0===t&&c.val(s.val())})),c.on("change",(function(){s.val(c.val()),s.trigger("change",[{triggeredByUs:!0}])})),o.find(".sui-colorpicker").addClass("sui-colorpicker-"+t),o.find(".sui-button, span[role=button]").on("click",(function(e){n.trigger("click"),e.preventDefault(),e.stopPropagation()})),r.on("click",(e=>i.colorPickerCleared(e,s,i)))}))},colorPickerCleared(e,t,i){const s=t.data("attribute"),n=i.model.get("color_palette"),a=optinVars.palettes[n][s],o=t.closest(".sui-colorpicker-wrap"),l=o.find(".sui-colorpicker-value"),d=o.find(".sui-colorpicker-value span[role=button]");t.closest(".wp-picker-container").find(".wp-picker-clear").trigger("click"),l.find("input").val(a),t.val(a).trigger("change"),d.find("span").css({"background-color":a}),e.preventDefault(),e.stopPropagation()},updatePickers(e){const t=this;if(void 0!==optinVars.palettes[e]){const i=optinVars.palettes[e];_.each(i,(function(e,i){t.$('input[data-attribute="'+i+'"]').val(e).trigger("change")}))}},resetSettingsBlock(t){const i=e(t.target);if(i.addClass("sui-button-onload").prop("disabled",!0),i.closest("#hustle-color-palette").length){const t=e('select[data-attribute="color_palette"]').val();this.updatePickers(t)}else{const t=i.closest(".sui-accordion"),s=jQuery.Event("click");s.currentTarget=t,this.initiateFontFamilySelectOnAccordionClick(s);t.find("[data-attribute]").each((function(){const t=e(this),i=t.attr("name");if(void 0!==optinVars.defaults[i]){const s=optinVars.defaults[i],n=t.parent(".sui-tabs");t.val(s),"radio"===t.prop("type")&&t.parent(".sui-tabs")?e("#tab-"+i+"-"+s,n).trigger("click"):t.trigger("sui:change").trigger("change")}}))}setTimeout((function(){i.removeClass("sui-button-onload").prop("disabled",!1)}),500)},addCreatePalettesLink(){setTimeout((()=>{const t=this.$("#hustle-create-palette-link li"),i=e("#select2-hustle-color-palettes-list-results");i.find(".hui-button").length||t.clone().appendTo(i)}),500)},createEditor(e){const t=ace.edit(e);return t.getSession().setMode("ace/mode/css"),t.$blockScrolling=1/0,t.setTheme("ace/theme/sui"),t.getSession().setUseWrapMode(!0),t.getSession().setUseWorker(!1),t.setShowPrintMargin(!1),t.renderer.setShowGutter(!0),t.setHighlightActiveLine(!0),t},updateCustomCss(){this.cssEditor&&this.model.set("custom_css",this.cssEditor.getValue())},insertSelector(t){const i=e(t.target).data("stylable")+"{}",s=this.cssEditor;s.navigateFileEnd(),s.insert(i),s.navigateLeft(1),s.focus(),t.preventDefault()},modelUpdated(){this.addUpdatedProperty(),this.updateViewOnModelUpdate()},addUpdatedProperty(){_.extend(this.updatedProperties,this.model.changed)},updateViewOnModelUpdate(){const e=this.model,t=Object.keys(e.changed)[0],i=this.getActionOnModelUpdated(t);void 0!==i&&i(t)},getActionOnModelUpdated(e){return{color_palette:()=>this.updatePickers(this.model.changed.color_palette),cta_buttons_alignment:()=>this.toggleCtaButtonsTextAlignment(),cta_buttons_alignment_mobile:()=>this.toggleCtaButtonsTextAlignment(),enable_mobile_settings:()=>this.toggleDeviceTabs(),feature_image_hide_on_mobile:e=>this.hideOtherOptionsInAcordionItem(e,"1"===this.model.get(e)),feature_image_fit:e=>this.toggleFeatureImageSizeSettingRow(e),feature_image_fit_mobile:e=>this.toggleFeatureImageSizeSettingRow(e),feature_image_position:()=>this.toggleFeatureImageSizeRows(),form_layout:()=>{this.setImageAligmentOptions(),this.toggleFeatureImageSizeRows()},style:()=>this.handleStyleChange(),use_vanilla:()=>this.setVanillaThemeVisibility()}[e]},toggleCtaButtonsTextAlignment(){const e=this.$("#hustle-cta_alignment-form-field"),t=this.$("#hustle-cta_alignment_mobile-form-field");"full"===this.model.get("cta_buttons_alignment")?n.accessibleShow(e):n.accessibleHide(e),"full"===this.model.get("cta_buttons_alignment_mobile")?n.accessibleShow(t):n.accessibleHide(t)},hideOtherOptionsInAcordionItem(e,t){const i=this.$('[name="'+e+'"]').closest(".sui-box"),s=i.find(".sui-box-settings-row").slice(0,1),n=i.find(".sui-box-settings-row").slice(1);t?(n.addClass("sui-hidden-important"),s.addClass("hustle-no-bottom-line")):(n.removeClass("sui-hidden-important"),s.removeClass("hustle-no-bottom-line"))},toggleFeatureImageSizeSettingRow(e=!1){if(!e||"feature_image_fit"===e){const e=this.$("#hustle-feature-image-size-settings-row");"none"!==this.model.get("feature_image_fit")?e.show():e.hide()}if(!e||"feature_image_fit_mobile"===e){const e=this.$("#hustle-feature-image-size-mobile-settings-row");"none"!==this.model.get("feature_image_fit_mobile")?e.show():e.hide()}},handleStyleChange(){const e=this.model.get("style"),t=this.$('[data-name="module_cont"]'),i=this.$('[data-name="layout_header"]'),s=this.$('[data-name="layout_content"]'),a=this.$('[data-name="layout_footer"]');"cabriolet"===e?t.find(".sui-accordion-item-title .sui-accordion-note").text(".hustle-layout-body"):t.find(".sui-accordion-item-title .sui-accordion-note").text(".hustle-layout"),"minimal"!==e?(n.accessibleHide(s),n.accessibleHide(a)):(n.accessibleShow(s),n.accessibleShow(a)),"simple"!==e?n.accessibleShow(i):n.accessibleHide(i)},setVanillaThemeVisibility(){const e=this.$('[data-toggle-content="use-vanilla"]'),t=this.$('[data-toggle-content="not-use-vanilla"]');"0"===this.model.get("use_vanilla")?(n.accessibleShow(e,!0),n.accessibleHide(t,!0)):(n.accessibleHide(e,!0),n.accessibleShow(t,!0))},linkFieldsChanged(t){const i=e(t.currentTarget);if("0"===i.val())return;const s=i.attr("name"),n=this.$(`[data-linked-fields=${s}]`),a=n[0].value;n.val(a).trigger("change",{updatedByUs:!0})},linkedFieldsChanged(t,i){if(i)return;const s=e(t.currentTarget),n=s.data("linked-fields");if("1"!==this.model.get(n))return;this.$(`[data-linked-fields=${n}]`).val(s.val()).trigger("change",{updatedByUs:!0})},requiredFieldChanged(t){const i=e(t.currentTarget);if(0===i.val().trim().length){const e=i.attr("name");void 0!==optinVars.defaults[e]&&i.val(optinVars.defaults[e])}},setImageAligmentOptions(){const e=this.$("#tab-feature_image_position-alignment-above"),t=this.$("#tab-feature_image_position-alignment-below");if("one"===this.model.get("form_layout"))n.accessibleShow(e,!0),n.accessibleShow(t,!0);else{const i=this.model.get("feature_image_position");"left"!==i&&"right"!==i&&(this.$("#tab-feature_image_position-alignment-left").trigger("click"),this.toggleFeatureImageSizeRows()),n.accessibleHide(e,!0),n.accessibleHide(t,!0)}},toggleFeatureImageSizeRows(){const e=this.$("#hustle-feature_image_width-row"),t=this.$("#hustle-feature-image-desktop-width-description"),i=this.$("#hustle-feature_image_height-row"),s=this.$("#hustle-feature-image-desktop-height-description"),n=["title","sub_title","show_cta","main_content"],a=this.model.get("form_layout"),o=()=>{i.show(),s.show(),e.hide(),t.hide()},l=()=>{i.hide(),s.hide(),e.show(),t.show()};let d=!0;for(const e of n)this.contentPropIsShown[e]&&(d=!1);if(d&&"two"!==a&&"four"!==a)return void o();if(!optinVars.current.is_optin)return void l();if("three"===a)return void o();if("four"===a)return void(d?l():(i.show(),s.hide(),e.show(),t.show()));const r=this.model.get("feature_image_position");"below"===r||"above"===r?o():l()},updateFeatureImageWidth(t){const i=e(t.currentTarget).val(),s=this.$('input[name="feature_image_width"]');if("custom"!==i){this.$('select[name="feature_image_width_unit"]').val("%").trigger("sui:change").trigger("change"),s.prop("disabled",!0),s.val(i).trigger("change")}else s.prop("disabled",!1)},contentModelUpdated(e){const t=Object.keys(e)[0],i=this.getActionOnContentModelUpdated(t);void 0!==i&&(i(e,t),this.toggleFeatureImageSizeRows(),this.updateElementsRow(t))},setVisibilityOnRender(){this.contentPropIsShown.feature_image=""!==optinVars.current.content.feature_image,this.contentPropIsShown.background_image=""!==optinVars.current.content.background_image,this.contentPropIsShown.show_cta="0"!==optinVars.current.content.show_cta,this.contentPropIsShown.title=""!==optinVars.current.content.title,this.contentPropIsShown.sub_title=""!==optinVars.current.content.sub_title,this.contentPropIsShown.show_never_see_link="0"!==optinVars.current.content.show_never_see_link,this.contentPropIsShown.optin_form=optinVars.current.is_optin,this.contentPropIsShown.main_content=""!==optinVars.current.content.main_content},getActionOnContentModelUpdated(e){return{background_image:e=>this.contentPropIsShown.background_image=""!==e.background_image,feature_image:e=>{this.contentPropIsShown.feature_image=""!==e.feature_image,this.hideOtherOptionsInAcordionItem("feature_image_position",!this.contentPropIsShown.feature_image)},main_content:e=>this.contentPropIsShown.main_content=""!==e.main_content,show_cta:e=>this.contentPropIsShown.show_cta="0"!==e.show_cta,show_never_see_link:e=>this.contentPropIsShown.show_never_see_link="0"!==e.show_never_see_link,sub_title:e=>this.contentPropIsShown.sub_title=""!==e.sub_title,title:e=>this.contentPropIsShown.title=""!==e.title}[e]},updateElementsRow(e){const t=this.$("#hustle-wizard-appearance-desktop, #hustle-wizard-appearance-mobiles").find(`.sui-accordion-item[data-name="${e}"]`);this.contentPropIsShown[e]?t.show():t.hide(),optinVars.current.is_optin?this.handleTypographyTabs(e):this.updateRow(e)},updateRow(t){const i=this;e.each({"hustle-typography-elements-row":["show_cta","title","sub_title","main_content"],"hustle-appearance-customize-elements-row":["feature_image","background_image","show_cta"]},(function(s,n){if(n.includes(t)){let t=!1;for(const e of n)i.contentPropIsShown[e]&&(t=!0);t?e("."+s).show():e("."+s).hide()}}))},handleTypographyTabs(e){const t=["show_cta","title","sub_title","main_content"];if("embedded"!==optinVars.current.data.module_type&&t.push("show_never_see_link"),t.includes(e)){const e=this.$(".hustle-typography-tabs"),i=e.find(".sui-tabs-menu");let s=!1;for(const e of t)this.contentPropIsShown[e]&&(s=!0);s?n.accessibleShow(i):(n.accessibleHide(i),e.find("#tab-custom-typography-optin").trigger("click"),e.find("#tab-custom-typography_mobile-optin").trigger("click"))}},emailsModelUpdated(e){const t=Object.keys(e)[0],i=this.getActionOnEmailsModelUpdated(t);void 0!==i&&i(e,t)},getActionOnEmailsModelUpdated(e){return{form_elements:e=>this.formFieldsUpdated(e),after_successful_submission:e=>this.setSucccessfulMessageOptionVisibility(e)}[e]},setSucccessfulMessageOptionVisibility(e){const t=this.$('[data-name="success_message"]');t.length>0&&("show_success"===e.after_successful_submission?t.show():t.hide())},formFieldsUpdated(e){this.handleRecaptcha(e.form_elements),this.handleGdpr(e.form_elements),this.handleCalendar(e.form_elements)},handleRecaptcha(e){const t=this.$('[data-name="recaptcha"]');let i=!1;void 0!==e.recaptcha&&(i="v3_recaptcha"===e.recaptcha.version&&"0"===e.recaptcha.v3_recaptcha_show_badge||"v2_invisible"===e.recaptcha.version&&"0"===e.recaptcha.v2_invisible_show_badge),i?t.show():t.hide()},handleGdpr(e){const t=this.$('[data-name="gdpr"]');void 0!==e.gdpr?t.show():t.hide()},handleCalendar(e){let t=!1;for(const i in e){if("calendar"===e[i].type){t=!0;break}}t?this.$('[data-name="calendar"]').show():this.$('[data-name="calendar"]').hide()},integrationsModelUpdate(e){"active_integrations"in e.changed&&this.updateMailchimpRelatedAccordions(e.changed)},updateMailchimpRelatedAccordions(e){const t=e.active_integrations.split(",").includes("mailchimp"),i=["form_extras","checkbox","dropdown","select"];for(const e of i)t?this.$(`[data-name="${e}"]`).show():this.$(`[data-name="${e}"]`).hide()}})}))},4114:function(){Hustle.define("Mixins.Module_Display",(function(){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-wizard-display",events:{},init(e){this.model=new e.BaseModel(optinVars.current.display||{}),this.moduleType=optinVars.current.data.module_type,this.listenTo(this.model,"change",this.viewChanged),this.render()},render(){},viewChanged(){}})}))},4592:function(){Hustle.define("Mixins.Module_Emails",(function(e){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-wizard-emails",events:{"click .hustle-optin-field--add":"addFields","click .hustle-optin-field--edit":"editField","click .sui-builder-field":"maybeEditField","click .hustle-optin-field--delete":"deleteFieldOnClick","click ul.list-results li":"setFieldOption","click .hustle-optin-field--copy":"duplicateField"},init(e){this.model=new e.BaseModel(optinVars.current.emails||{}),this.listenTo(this.model,"change",this.modelUpdated),this.render()},render(){const t=this,i=this.model.get("form_elements");for(const e in i){const s=i[e];i[e]=_.extend({},this.getFieldDefaults(s.type),s),"submit"!==e&&t.addFieldToPanel(i[e])}this.model.set("form_elements",i,{silent:!0});const s=this.$("#hustle-form-fields-container").sortable({axis:"y",containment:".sui-box-builder"});return s.on("sortupdate",(()=>this.fieldsOrderChanged(s))),this.$("#hustle-email-day").datepicker({beforeShow(){e("#ui-datepicker-div").addClass("sui-calendar")},dateFormat:"MM dd, yy"}),this.$("#hustle-email-time").timepicker({timeFormat:"h:mm p",interval:"1",minTime:"0",maxTime:"11:59pm",defaultTime:null,startTime:"00:00",dynamic:!1,dropdown:!0,scrollbar:!0,change(){e("#hustle-email-time").trigger("change")}}),this.updateDynamicValueFields(),this},modelUpdated(e){const t=e.changed,i=Object.keys(t)[0],s=this.getActionOnModelUpdated(i);void 0!==s&&s(t),Hustle.Events.trigger("modules.view.emailsUpdate",t)},getActionOnModelUpdated(e){return{auto_close_success_message:()=>this.autoCloseSuccessMessageUpdated(),form_elements:()=>this.updateDynamicValueFields()}[e]},autoCloseSuccessMessageUpdated(){const e=this.$("#section-auto-close-success-message .sui-row");"1"===this.model.get("auto_close_success_message")?e.removeClass("sui-hidden"):e.addClass("sui-hidden")},resetDynamicValueFieldsPlaceholders(){this.$("select.hustle-field-options").html(""),this.$(".hustle-fields-placeholders-options").length&&this.$(".hustle-fields-placeholders-options").html("")},updateDynamicValueFields(){const t=this.model.get("form_elements");this.resetDynamicValueFieldsPlaceholders();for(const e in t)"submit"!==e&&"recaptcha"!==e&&"gdpr"!==e&&(this.addFieldToDynamicValueFields(t[e]),this.$("select.hustle-field-options").trigger("sui:change"));this.$("div.select-list-container .list-results:empty").each((function(){const t=e(this).closest(".select-container").find("select.hustle-field-options").data("type");e(this).html('<li style="cursor: default; pointer-events: none;">'+optinVars.form_fields.no_fields_of_type_notice.replace("{field_type}",t)+"</li>")}))},fieldsOrderChanged(e){const t=this.model.get("form_elements"),i=e.sortable("toArray",{attribute:"data-field-id"});let s={};for(const e of i)s[e]=t[e];s=_.extend({},s,t),this.model.set("form_elements",s)},addFields(t){SUI.openModal("hustle-dialog--optin-fields",e(t.currentTarget)[0],this.$("#hustle-dialog--optin-fields .sui-box-header .sui-button-icon")[0],!0);new(Hustle.get("Modals.Optin_Fields"))({model:this.model}).on("fields:added",((e,t,i)=>this.addNewFields(e,t,i)))},maybeEditField(t){e(t.target).closest(".sui-dropdown").length||this.editField(t)},editField(t){const i=e(t.target),s=i.closest(".sui-builder-field").data("field-id"),n=this.model.get("form_elements")[s],a=Object.assign({},this.getFieldViewDefaults(n.type),n);new(Hustle.get("Modals.Edit_Field"))({field:n,fieldData:a,model:this.model}).on("field:updated",((e,t,i)=>this.formFieldUpdated(e,t,i))),SUI.openModal("hustle-dialog--edit-field",i[0],this.$("#hustle-dialog--edit-field .sui-box-header .sui-button-icon")[0],!0)},formFieldUpdated(e,t,i){if(!Object.keys(t).length)return;if("name"in t)return this.addNewFields(e.type,e,i.name),void this.deleteField(i.name);const s=this.$("#hustle-optin-field--"+e.name);if("required"in t){const t=s.find(".sui-error"),i=e.required;_.isTrue(i)?t.show():_.isFalse(i)&&t.hide()}if("label"in t){this.updateDynamicValueFields();s.find(".hustle-field-label-text").text(e.label)}},deleteFieldOnClick(t){const i=e(t.target).closest(".sui-builder-field").data("field-id");this.deleteField(i)},setFieldOption(t){const i=e(t.target),s=i.find("span:eq(1)").text();i.closest(".sui-insert-variables").find('input[type="text"]').val(s).trigger("change")},deleteField(t){const i=this.$("#hustle-optin-field--"+t),s=Object.assign({},this.model.get("form_elements"));delete s[t],this.model.set("form_elements",s),-1!==jQuery.inArray(t,["gdpr","recaptcha"])?(i.addClass("sui-hidden"),e("#hustle-optin-insert-field--"+t).prop("disabled",!1).prop("checked",!1)):i.remove()},duplicateField(t){const i=e(t.target).closest(".sui-builder-field").data("field-id"),s=Object.assign({},this.model.get("form_elements")),n=Object.assign({},s[i]);delete n.name,n.can_delete=!0,this.addNewFields(n.type,n)},addNewFields(e,t,i=null){const s=this;let n=Object.assign({},this.model.get("form_elements"));if(Array.isArray(e))for(const i of e){const e=s.getFieldDefaults(i);t&&i in t&&_.extend(e,t[i]),s.addFieldToPanel(e),n[e.name]=e}else{const a=s.getFieldDefaults(e);if(t&&_.extend(a,t),s.addFieldToPanel(a,i),null===i)n[a.name]=a;else{const e=[];jQuery.each(n,(function(t,s){e[t]=s,t===i&&(e[a.name]=a)})),n=e}}this.model.set("form_elements",n)},addFieldToDynamicValueFields(t){let i;i=e("<div>"+t.name+"</div>"),i.find("script").remove(),t.name=i.html(),i=e("<div>"+t.label+"</div>"),i.find("script").remove(),t.label=i.html();const s=e("<option/>",{value:t.name,"data-content":"{"+t.name+"}"}).text(t.label),n=`<li><button value="{${t.name}}">${t.label}</button></li>`;this.$('select.hustle-field-options:not([data-type]), select.hustle-field-options[data-type="'+t.type+'"]').append(s),this.$(".hustle-fields-placeholders-options").length&&this.$(".hustle-fields-placeholders-options").append(n)},addFieldToPanel(t,i=null){const s=Optin.template("hustle-form-field-row-tpl"),n=this.$("#hustle-form-fields-container");if(t=_.extend({},this.getFieldViewDefaults(t.type),t),-1!==jQuery.inArray(t.type,["gdpr","recaptcha"]))this.$("#hustle-optin-field--"+t.type).removeClass("sui-hidden"),e("#hustle-optin-insert-field--"+t.type).prop("checked",!0).prop("disabled",!0);else if(null===i)n.append(s(t));else{const e=this.$("#hustle-optin-field--"+i);0<e.length?e.after(s(t)):n.append(s(t))}},getNewFieldId(e){const t=Object.assign({},this.model.get("form_elements"));let i=e;for(;i in t&&-1===jQuery.inArray(i,["gdpr","recaptcha","submit"]);)i=e+"-"+Math.floor(99*Math.random());return i},getFieldDefaults(e){const t=this.getNewFieldId(e),i={label:optinVars.form_fields.label[e+"_label"],required:"false",css_classes:"",type:e,name:t,required_error_message:optinVars.form_fields.required_error_message.replace("{field}",e),validation_message:optinVars.form_fields.validation_message.replace("{field}",e),placeholder:""};switch(e){case"timepicker":i.time_format="12",i.time_hours="9",i.time_minutes="30",i.time_period="am",i.validation_message=optinVars.form_fields.time_validation_message,i.required_error_message=optinVars.form_fields.is_required.replace("{field}",i.label),i.validate="false";break;case"datepicker":i.date_format="mm/dd/yy",i.validation_message=optinVars.form_fields.date_validation_message,i.required_error_message=optinVars.form_fields.is_required.replace("{field}",i.label),i.validate="false";break;case"recaptcha":i.threshold="0.5",i.version="v2_checkbox",i.recaptcha_type="compact",i.recaptcha_theme="light",i.v2_invisible_theme="light",i.recaptcha_language="automatic",i.v2_invisible_show_badge="1",i.v2_invisible_badge_replacement=optinVars.form_fields.recaptcha_badge_replacement,i.v3_recaptcha_show_badge="1",i.v3_recaptcha_badge_replacement=optinVars.form_fields.recaptcha_badge_replacement,i.validation_message=optinVars.form_fields.recaptcha_validation_message,i.error_message=optinVars.form_fields.recaptcha_error_message;break;case"gdpr":i.gdpr_message=optinVars.form_fields.gdpr_message,i.required="true",i.required_error_message=optinVars.form_fields.gdpr_required_error_message;break;case"email":i.validate="true";break;case"url":i.required_error_message=optinVars.form_fields.url_required_error_message,i.validate="true";break;case"phone":i.validate="false";break;case"hidden":i.default_value="user_ip",i.custom_value="";break;case"number":case"text":i.required_error_message=optinVars.form_fields.cant_empty}return i},getFieldViewDefaults(e){const t={required:"false",validated:"false",placeholder_placeholder:optinVars.form_fields.label.placeholder,label_placeholder:"",name_placeholder:"",icon:"send",css_classes:"",type:e,name:e,placeholder:optinVars.form_fields.label[e+"_placeholder"],can_delete:!0,fieldId:this.getNewFieldId(e)};switch(e){case"email":t.icon="mail";break;case"name":t.icon="profile-male";break;case"phone":t.icon="phone";break;case"address":t.icon="pin";break;case"url":t.icon="web-globe-world";break;case"text":t.icon="style-type";break;case"number":t.icon="element-number";break;case"timepicker":t.icon="clock";break;case"datepicker":t.icon="calendar";break;case"recaptcha":t.icon="recaptcha";break;case"gdpr":t.icon="gdpr";break;case"hidden":t.icon="eye-hide"}return t}})}))},8567:function(e,t,i){var s=i(792);Hustle.define("Module.IntegrationsView",(function(e){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-box-section-integrations",events:{"click .connect-integration":"connectIntegration","keypress .connect-integration":"preventEnterKeyFromDoingThings"},init(e){this.model=new e.BaseModel(optinVars.current.integrations_settings||{}),this.moduleId=optinVars.current.data.module_id,this.listenTo(this.model,"change",(e=>Hustle.Events.trigger("modules.view.integrationsUpdate",e))),this.listenTo(Hustle.Events,"hustle:providers:reload",this.renderProvidersTables),this.render()},render(){const e=this.$el.find("#hustle-not-connected-providers-section"),t=this.$el.find("#hustle-connected-providers-section");0<e.length&&0<t.length&&this.renderProvidersTables()},renderProvidersTables(){const t=this,i={};this.$el.find(".hustle-integrations-display").html(`<div class="sui-notice hustle-integration-loading-notice">\n\t\t\t\t\t\t<div class="sui-notice-content">\n\t\t\t\t\t\t\t<div class="sui-notice-message">\n\n\t\t\t\t\t\t\t\t<span class="sui-notice-icon sui-icon-loader sui-loading sui-md" aria-hidden="true"></span>\n\t\t\t\t\t\t\t\t<p>${optinVars.integrations.fetching_list}</p>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`),i.action="hustle_provider_get_form_providers",i._ajax_nonce=optinVars.integrations.action_nonce,i.data={moduleId:this.moduleId};e.post({url:ajaxurl,type:"post",data:i}).done((function(e){if(e&&e.success){const i=t.$el.find("#hustle-integrations-active-integrations"),s=t.$el.find("#hustle-integrations-active-count");t.$el.find("#hustle-not-connected-providers-section").html(e.data.not_connected),t.$el.find("#hustle-connected-providers-section").html(e.data.connected),i.val()!==e.data.list_connected&&i.val(e.data.list_connected).trigger("change"),s.val()!==String(e.data.list_connected_total)&&s.val(e.data.list_connected_total).trigger("change")}})).always((function(){t.$el.find(".sui-box-body").removeClass("sui-block-content-center"),t.$el.find(".hustle-integration-loading-notice").remove()}))},preventEnterKeyFromDoingThings(e){13===e.which&&e.preventDefault()},connectIntegration(e){s.integrationsModal.open(e)}}))}))},5229:function(e,t,i){var s=i(5533),n=i(792),a=i(2947);Hustle.define("Mixins.Wizard_View",(function(e,t,i){"use strict";return{moduleType:"",el:".sui-wrap-hustle",publishModal:{},previewView:null,events:{"click .sui-sidenav .sui-vertical-tab a":"sidenav","change select.sui-mobile-nav":"sidenavMobile","click a.hustle-go-to-tab":"sidenav","click a.notify-error-tab":"sidenav","click .hustle-action-save":"saveChanges","click .wpmudev-button-navigation":"doButtonNavigation","change #hustle-module-name":"updateModuleName","click #hustle-preview-module":"previewModule","blur input.sui-form-control":"removeErrorMessage","click .hustle-single-module-button-action":"handleSingleModuleAction"},init(t){this.setTabsViews(t),Hustle.Events.on("modules.view.switch_status",(e=>this.switchStatusTo(e))),e(i).off("popstate",(e=>this.updateTabOnPopstate(e))),e(i).on("popstate",(e=>this.updateTabOnPopstate(e))),e(document).off("tinymce-editor-init",((e,t)=>this.tinymceReady(e,t))),e(document).on("tinymce-editor-init",((e,t)=>this.tinymceReady(e,t))),void 0!==this._events&&(this.events=e.extend(!0,{},this.events,this._events),this.delegateEvents());const s=Hustle.get("Modals.PublishFlow");return this.publishModal=new s,this.renderTabs(),this},setTabsViews(e){this.contentView=e.contentView,this.emailsView=e.emailsView,this.designView=e.designView,this.integrationsView=e.integrationsView,this.visibilityView=e.visibilityView,this.settingsView=e.settingsView,this.moduleType=this.model.get("module_type"),"embedded"===this.moduleType&&(this.displayView=e.displayView)},renderTabs(){this.contentView.delegateEvents(),this.emailsView.delegateEvents(),this.integrationsView.delegateEvents(),this.designView.delegateEvents(),"embedded"===this.moduleType&&this.displayView.delegateEvents(),this.visibilityView.delegateEvents(),this.visibilityView.afterRender(),this.settingsView.delegateEvents()},sidenav(t){t.preventDefault();const i=e(t.target).data("tab");i&&this.goToTab(i,!0)},sidenavMobile(t){const i=e(t.currentTarget).val();i&&this.goToTab(i,!0)},goToTab(t,i){const s=this.$el.find('a[data-tab="'+t+'"]'),n=s.closest(".sui-vertical-tabs").find(".sui-vertical-tab a"),a=this.$el.find(".sui-box[data-tab]"),o=this.$el.find('.sui-box[data-tab="'+t+'"]');if(i){const e={tabName:t},i=this.model.get("module_id");history.pushState(e,"Hustle "+this.moduleType+" wizard","admin.php?page="+optinVars.current.wizard_page+"&id="+i+"&section="+t)}n.removeClass("current"),a.hide(),s.addClass("current"),o.show(),e(".sui-wrap-hustle")[0].scrollIntoView()},updateTabOnPopstate(e){const t=e.originalEvent.state;t&&this.goToTab(t.tabName)},doButtonNavigation(t){t.preventDefault();const i="prev"===e(t.target).data("direction")?"prev":"next",s=this.getNextOrPrevTabName(i);this.goToTab(s,!0)},getNextOrPrevTabName(t){const i=e("#hustle-module-wizard-view .sui-sidenav ul li a.current");let s=i.data("tab");return s="prev"===t?i.parent().prev().find("a").data("tab"):i.parent().next().find("a").data("tab"),s},tinymceReady(e,t){t.on("change",(()=>{("main_content"===t.id?this.contentView.model:this.emailsView.model).set(t.id,t.getContent())}))},setContentFromTinymce(e=!1){if("social_sharing"!==this.moduleType&&"undefined"!=typeof tinyMCE){const t=tinyMCE.get("main_content"),i=this.$("textarea#main_content"),s="true"===i.attr("aria-hidden")?t.getContent():i.val();this.contentView.model.set("main_content",s,{silent:e});const n=tinyMCE.get("success_message"),a=this.$("textarea#success_message"),o="true"===a.attr("aria-hidden")?n.getContent():a.val();this.emailsView.model.set("success_message",o,{silent:e});const l=tinyMCE.get("email_body"),d=this.$("textarea#email_body"),r="true"===a.attr("aria-hidden")?l.getContent():d.val();this.emailsView.model.set("email_body",r,{silent:e})}},sanitizeData(){let e=this.contentView.model.get("cta_url");0!==e.indexOf("mailto:")&&0!==e.indexOf("tel:")&&(/^(f|ht)tps?:\/\//i.test(e)||(e="https://"+e,this.contentView.model.set("cta_url",e,{silent:!0})))},save(){this.setContentFromTinymce(!0),this.sanitizeData();const t=this.$el.find("#hustle-module-wizard-view"),i=t.data("id"),s={action:"hustle_save_module",_ajax_nonce:t.data("nonce"),id:i,module:this.model.toJSON()};return _.extend(s,this.getDataToSave()),e.ajax({url:ajaxurl,type:"POST",data:s,dataType:"json"})},getDataToSave(){const e={content:this.contentView.model.toJSON(),emails:this.emailsView.model.toJSON(),design:this.designView.updatedProperties,integrations_settings:this.integrationsView.model.toJSON(),visibility:this.visibilityView.model.toJSON(),settings:JSON.stringify(this.settingsView.model.toJSON())};return e.design.custom_css=this.designView.cssEditor.getValue(),"embedded"===this.moduleType&&(e.display=this.displayView.model.toJSON()),e},saveChanges(t){t.preventDefault();const i=this.model.get("active"),a=e(t.currentTarget),o=String(a.data("active")),l=o!==i,d="0"!==o;SUI.closeNotice("hustle-only-active-notification"),this.disableButtonsOnSave(a),l&&d&&this.publishModal.open(),this.model.set("active",o,{silent:!0});this.save().done((t=>{if(!0===t.success){if(s.hasChanges=!1,this.switchStatusTo("saved"),l){if(d){const e="social_sharing"!==this.model.get("module_type")&&"1"===this.settingsView.model.get("is_schedule");let t=!1;if(e){t="1"!==this.settingsView.model.get("schedule").not_schedule_end}this.publishModal.setPublished(e,t)}this.updateViewOnActiveChange()}}else{const s=t.data;let a="";void 0===s.data?a=optinVars.messages.module_error_reload:(void 0!==s.data.icon_error?(_.each(s.data.icon_error,(function(t){e("#hustle-platform-"+t).find(".sui-error-message").show(),e("#hustle-platform-"+t+" .hustle-social-url-field").addClass("sui-form-field-error"),e("#hustle-platform-"+t).not(".sui-accordion-item--open").find(".sui-accordion-open-indicator").trigger("click")})),a='<a href="#" data-tab="services" class="notify-error-tab"> '+optinVars.module_tabs.services+" </a>"):void 0!==s.data.selector_error&&(_.each(s.data.selector_error,(function(t){e('input[name="'+t+'_css_selector"]').siblings(".sui-error-message").show(),e('input[name="'+t+'_css_selector"]').parent(".sui-form-field").addClass("sui-form-field-error")})),_.isEmpty(a)||(a+=" and "),a=a+'<a href="#" data-tab="display" class="notify-error-tab"> '+optinVars.module_tabs.display+" </a>"),a=optinVars.messages.module_error.replace("{page}",a)),l&&d&&SUI.closeModal(),this.model.set("active",i,{silent:!0}),this.switchStatusTo("unsaved"),n.Notification.open("error",a,!1)}})).always((()=>{this.enableSaveButtons()}))},updateModuleName(t){const i=e(t.target).val();if(i.length)this.$("#hustle-module-name-wrapper").removeClass("sui-form-field-error"),this.$("#hustle-module-name-error").hide(),this.$("#hustle-module-name-error").html(""),this.model.set("module_name",i);else{const e=this.$("#hustle-module-name-error").data("error-message");this.$("#hustle-module-name-wrapper").addClass("sui-form-field-error"),this.$("#hustle-module-name-error").html(e),this.$("#hustle-module-name-error").show()}},disableButtonsOnSave(e){e.addClass("sui-button-onload"),this.$(".hustle-action-save").prop("disabled",!0),this.$(".wpmudev-button-navigation").prop("disabled",!0)},enableSaveButtons(){this.$(".sui-button-onload").removeClass("sui-button-onload"),this.$(".hustle-action-save").prop("disabled",!1),this.$(".wpmudev-button-navigation").prop("disabled",!1)},switchStatusTo(e){"saved"===e?(this.$el.find("#hustle-unsaved-changes-status").addClass("sui-hidden"),this.$el.find("#hustle-saved-changes-status").removeClass("sui-hidden")):(this.$el.find("#hustle-unsaved-changes-status").removeClass("sui-hidden"),this.$el.find("#hustle-saved-changes-status").addClass("sui-hidden"))},updateViewOnActiveChange(){const e="1"===this.model.get("active"),t=this.$(".sui-status-module .sui-tag"),i=e?optinVars.messages.commons.published:optinVars.messages.commons.draft;t.text(i),e?t.addClass("sui-tag-blue"):t.removeClass("sui-tag-blue");const s=this.$("#hustle-draft-button-save-draft-text"),n=this.$("#hustle-draft-button-unpublish-text");e?(s.addClass("sui-hidden-important"),n.removeClass("sui-hidden-important")):(s.removeClass("sui-hidden-important"),n.addClass("sui-hidden-important"));const a=this.$(".hustle-publish-button"),o=e?a.data("update"):a.data("publish");a.find(".button-text").text(o)},removeErrorMessage(t){if(t.target.value){const i=e(t.target).parent(".sui-form-field");i.removeClass("sui-form-field-error"),i.find(".sui-error-message").hide()}},previewModule(t){t.preventDefault();const i=e(t.currentTarget);this.setContentFromTinymce(!0),this.sanitizeData();const s=_.extend({},this.model.toJSON(),this.getDataToSave()),n=s.module_name.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");s.module_name=n,this.getPreviewView().open(this.model.get("module_id"),this.model.get("module_type"),i,s)},getPreviewView(){if(!this.previewView){const e=Hustle.get("Modals.Preview");this.previewView=new e}return this.previewView},handleSingleModuleAction(e){a.moduleActionHandler.initAction(e,"listing",this)}}}))},5533:function(e,t,i){"use strict";i.r(t),i.d(t,{Model:function(){return n}});const s={};Hustle.define("Model",(function(e){return Backbone.Model.extend({initialize(){this.on("change",this.userHasChange,this),Backbone.Model.prototype.initialize.apply(this,arguments),e(window).on("beforeunload",this.changesNotSaved)},userHasChange(){s.hasChanges=!0,Hustle.Events.trigger("modules.view.switch_status","unsaved")},changesNotSaved(){if(s.hasChanges)return"You have unsaved changes"}})})),Hustle.define("Models.M",(function(){return Hustle.get("Model").extend({toJSON(){const e=_.clone(this.attributes);let t;for(t in e)(e[t]instanceof Backbone.Model||e[t]instanceof Backbone.Collection)&&(e[t]=e[t].toJSON());return e},set(e,t,i){let s,n,a;"string"==typeof e&&-1!==e.indexOf(".")?(s=e.split(".")[0],n=e.split(".")[1],a=this.get(s),a&&a instanceof Backbone.Model&&(a.set(n,t,i),this.trigger("change:"+e,e,t,i),this.trigger("change:"+s,e,t,i))):Backbone.Model.prototype.set.call(this,e,t,i)},get(e){let t,i;return"string"==typeof e&&-1!==e.indexOf(".")?(t=e.split(".")[0],i=e.split(".")[1],this.get(t).get(i)):Backbone.Model.prototype.get.call(this,e)}})})),Hustle.define("Models.Trigger",(function(){return Hustle.get("Model").extend({defaults:{trigger:["time"],on_time_delay:"0",on_time_unit:"seconds",on_scroll:"scrolled",on_scroll_page_percent:"20",on_scroll_css_selector:"",enable_on_click_element:"1",on_click_element:"",enable_on_click_shortcode:"1",on_exit_intent_per_session:"1",on_exit_intent_delayed_time:"5",on_exit_intent_delayed_unit:"seconds",on_adblock_delay:"0",on_adblock_delay_unit:"seconds"}})}));const n=Hustle.get("Models.M").extend({defaults:{module_name:"",moduleType:"popup",active:"0"}})},1771:function(e,t,i){var s=i(5533);!function(){"use strict";!function(){const e="_page_hustle_popup_listing";e===pagenow.substr(pagenow.length-e.length)&&new Optin.listingBase({moduleType:optinVars.current.module_type})}(),function(){const e="_page_hustle_popup";if(e!==pagenow.substr(pagenow.length-e.length))return;const t=Hustle.View.extend(Hustle.get("Mixins.Wizard_View")),i=Hustle.View.extend(Hustle.get("Mixins.Module_Content")),n=Hustle.View.extend(Hustle.get("Mixins.Module_Emails")),a=Hustle.View.extend(Hustle.get("Mixins.Module_Design")),o=Hustle.View.extend(Hustle.get("Mixins.Module_Visibility")),l=Hustle.View.extend(Hustle.get("Mixins.Module_Settings")),d=Hustle.get("Module.IntegrationsView"),r=s.Model,c=Hustle.get("Models.M");new t({model:new r(optinVars.current.data||{}),contentView:new i({BaseModel:c}),emailsView:new n({BaseModel:c}),designView:new a({BaseModel:c}),integrationsView:new d({BaseModel:c}),visibilityView:new o({BaseModel:c}),settingsView:new l({BaseModel:c})})}()}()},4553:function(){Hustle.define("ProviderNotice.View",(function(e){"use strict";new(Backbone.View.extend({el:".hustle-provider-notice",cookieKey:"",events:{"click .dismiss-provider-migration-notice":"HideProviderNotice"},initialize(){this.cookieKey="provider_migration_notice_",e(".hustle-provider-notice").length&&this.showProviderNotice()},HideProviderNotice(t){Optin.cookie.set(this.cookieKey+e(t.currentTarget).data("name"),1,7),location.reload()},showProviderNotice(){const t=e(".hustle-provider-notice").data("name");1!==Optin.cookie.get(this.cookieKey+t)&&e(".hustle_migration_notice__"+t).show()}}))}))},5552:function(e,t,i){var s=i(792);Hustle.define("Integration_Modal_Handler",(function(e){"use strict";return Backbone.View.extend({events:{"click .hustle-provider-connect":"connectAddOn","click .hustle-provider-disconnect":"disconnectAddOn","click .hustle-provider-next":"submitNextStep","click .hustle-provider-back":"goPrevStep","click .hustle-refresh-email-lists":"refreshLists","click .hustle-provider-form-disconnect":"disconnectAddOnForm","click .hustle-provider-clear-radio-options":"clearRadioOptions","change select#group":"showInterests"},initialize(e){return this.slug=e.slug,this.nonce=e.nonce,this.action=e.action,this.moduleId=e.moduleId,this.multi_id=e.multiId,this.globalMultiId=e.globalMultiId,this.step=0,this.next_step=!1,this.prev_step=!1,this.$el.off("close").on("close",(()=>this.modalClosed())),this.render()},render(){const e={};e.action=this.action,e._ajax_nonce=this.nonce,e.data={},e.data.slug=this.slug,e.data.step=this.step,e.data.current_step=this.step,this.moduleId&&(e.data.module_id=this.moduleId),this.multi_id&&(e.data.multi_id=this.multi_id),this.globalMultiId&&(e.data.global_multi_id=this.globalMultiId),this.request(e,!1,!0)},applyLoader(e){e.find(".sui-button:not(.disable-loader)").addClass("sui-button-onload")},resetLoader(e){e.find(".sui-button").removeClass("sui-button-onload")},request(t,i,n){const a=this;n&&(this.$el.find(".sui-box-body").addClass("sui-block-content-center").html('<p class="sui-loading-dialog" aria-label="Loading content"><i class="sui-icon-loader sui-loading" aria-hidden="true"></i></p>'),this.$el.find(".sui-box-footer").html(""),this.$el.find(".integration-header").html("")),this.applyLoader(this.$el),this.ajax=e.post({url:ajaxurl,type:"post",data:t}).done((function(e){if(e&&e.success){const t=e.data.data;if(i||!_.isUndefined(t.is_close)&&t.is_close?SUI.closeModal():(a.renderBody(e),a.renderFooter(e),a.onRender(t),a.resetLoader(a.$el)),!_.isUndefined(t.notification)&&!_.isUndefined(t.notification.type)&&!_.isUndefined(t.notification.text)){s.Notification.open(t.notification.type,t.notification.text)}if(!_.isUndefined(t.size)){const e=a.$el.closest(".sui-modal");"normal"===t.size&&e.removeClass("sui-modal-sm sui-modal-lg"),"small"===t.size&&(e.addClass("sui-modal-sm"),e.removeClass("sui-modal-lg")),"large"===t.size&&(e.addClass("sui-modal-lg"),e.removeClass("sui-modal-sm"))}if("mailchimp"===a.slug){const e=a.$el.find("#group");e.length&&e.trigger("change")}}else a.renderBody(e),a.renderFooter(e)})),this.ajax.always((function(e){a.$el.find(".hustle-modal-close").off("click").on("click",(function(){SUI.closeModal()})),a.$el.find(".sui-box-body").removeClass("sui-block-content-center"),a.$el.find(".sui-loading-dialog").remove(),e&&e.success&&e.data||a.showGenericErrorMessage()}))},renderBody(t){if(!t.data||!t.data.data)return;this.$el.find(".sui-box-body").html(t.data.data.html);const i=this.$el.find(".sui-box-body .integration-header").remove();if(0<i.length&&this.$el.find(".integration-header").html(i.html()),this.$el.find(".sui-box-body").html().trim().length){const t=this.$el.find(".sui-box-body").children();let i=!0;e.each(t,((t,s)=>{e(s).is(":hidden")||(i=!1)})),i?(this.$el.find(".sui-box-body").addClass("sui-hidden"),this.$el.find(".sui-box-footer").css("padding-top","")):this.$el.find(".sui-box-body .sui-notice").next().is('input[type="hidden"]')&&this.$el.find(".sui-box-body .sui-notice").css({"margin-bottom":"0"})}else this.$el.find(".sui-box-body").addClass("sui-hidden"),this.$el.find(".sui-box-footer").css("padding-top","")},renderFooter(e){if(!e.data||!e.data.data)return;const t=e.data.data.buttons,i=this.$el.find(".sui-box-body"),s=this.$el.find(".sui-box-footer");i.removeClass("sui-spacing-bottom--0").removeClass("sui-spacing-bottom--30"),s.removeClass("sui-hidden").removeClass("sui-hidden-important").removeClass("sui-content-center").removeClass("sui-content-right").removeClass("sui-content-separated").html(""),_.each(t,(function(e){s.append(e.markup)})),0===s.find(".sui-button").length?(s.addClass("sui-hidden-important"),i.addClass("sui-spacing-bottom--30")):(i.addClass("sui-spacing-bottom--0"),s.find(".sui-button").hasClass("sui-button-center")?s.addClass("sui-content-center"):s.find(".sui-button").hasClass("sui-button-right")?s.find(".sui-button").hasClass("sui-button-left")||s.addClass("sui-content-right"):s.addClass("sui-content-separated"))},onRender(t){this.delegateEvents(),_.isUndefined(t.opt_in_provider_current_step)||(this.step=+t.opt_in_provider_current_step),_.isUndefined(t.opt_in_provider_has_next_step)||(this.next_step=t.opt_in_provider_has_next_step),_.isUndefined(t.opt_in_provider_has_prev_step)||(this.prev_step=t.opt_in_provider_has_prev_step),this.$el.find(".sui-select").SUIselect2({dropdownCssClass:"sui-select-dropdown",dropdownParent:e("#hustle-integration-dialog .sui-box")})},refreshLists(t){t.preventDefault(),t.stopPropagation();const i=e(t.currentTarget),s=e("#list_id").length?e("#list_id"):e("#form_id"),n=this.moduleId,a=this.slug,o=e("#form_id").length?"forms":"lists",l=this.nonce;i.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:{action:"hustle_refresh_email_lists",id:n,slug:a,type:o,_ajax_nonce:l}}).done((t=>{if(t.success&&void 0!==t.data.select){const i=s.closest(".hui-select-refresh");s.SUIselect2("destroy"),s.remove();const n=e(t.data.select);i.prepend(n),n.SUIselect2({dropdownParent:this.$(".sui-box"),dropdownCssClass:"sui-select-dropdown"})}})).fail((()=>{})).always((()=>{i.removeClass("sui-button-onload")}))},submitNextStep(){const t={},i=this.$el.find("form"),s={slug:this.slug,step:this.getStep(),current_step:this.step};let n=i.serialize();this.moduleId&&(s.module_id=this.moduleId),n=n+"&"+e.param(s),t.action=this.action,t._ajax_nonce=this.nonce,t.data=n,this.request(t,!1,!1)},goPrevStep(){const e={},t={slug:this.slug,step:this.getPrevStep(),current_step:this.step};this.moduleId&&(t.module_id=this.moduleId),this.multi_id&&(t.multi_id=this.multi_id),e.action=this.action,e._ajax_nonce=this.nonce,e.data=t,this.request(e,!1,!1)},getStep(){return this.next_step?this.step+1:this.step},getPrevStep(){return this.prev_step?this.step-1:this.step},connectAddOn(){const t={},i=this.$el.find("form"),s={slug:this.slug,step:this.getStep(),current_step:this.step};let n=i.serialize();this.moduleId&&(s.module_id=this.moduleId),this.multi_id&&(s.multi_id=this.multi_id),n=n+"&"+e.param(s),t.action=this.action,t._ajax_nonce=this.nonce,t.data=n,this.request(t,!1,!1)},disconnectAddOn(){const t=this,i=this.$el.find(".sui-box-logo img").attr("src"),n=this.$el.find("#dialogTitle2").html(),a={},o={};let l={};a.action="hustle_provider_deactivate",a._ajax_nonce=this.nonce,a.data={},a.data.slug=this.slug,a.data.img=i,a.data.title=n,this.globalMultiId&&(a.data.global_multi_id=this.globalMultiId),o.action="hustle_provider_is_on_module",o._ajax_nonce=this.nonce,o.data={},o.data.slug=this.slug,o.data.globalMultiId=this.globalMultiId,this.$el.find(".sui-button:not(.disable-loader)").addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:o,success(e){!0===e.success&&(l=e)},complete(){!0===l.success?s.integrationsActiveRemove.open(l.data,a,t):t.request(a,!0,!1)}})},disconnectAddOnForm(){const t=this,i={},n=e("#hustle-integrations-active-count").val(),a=e("#hustle-integrations-active-integrations").val();i.action="hustle_provider_form_deactivate",i._ajax_nonce=this.nonce,i.data={},i.data.slug=this.slug,i.data.module_id=this.moduleId,this.multi_id&&(i.data.multi_id=this.multi_id),"1"===n&&a===this.slug&&"local_list"!==this.slug?s.integrationsAllRemove.open(i,t):"1"===n&&"local_list"===this.slug?(s.Notification.open("error",optinVars.messages.integraiton_required),SUI.closeModal()):this.request(i,!0,!1)},modalClosed(){this.ajax.abort(),Hustle.Events.trigger("hustle:providers:reload")},clearRadioOptions(){this.$("input[type=radio]",this.$el).prop("checked",!1)},showInterests(t){const i=this,s=e(t.currentTarget),n=s.data("nonce"),a=s.val(),o={},l=i.$el.find("form"),d={slug:i.slug,group:a,module_id:i.moduleId};let r=l.serialize();r=r+"&"+e.param(d),o.action="hustle_mailchimp_get_group_interests",o._ajax_nonce=n,o.data=r,i.applyLoader(i.$el),e.ajax({url:ajaxurl,type:"POST",data:o}).done((function(e){e.success&&(l.find(".sui-form-field").slice(1).remove(),l.find(".sui-form-field:first-child").after(e.data))})).fail((function(){})).always((function(){i.resetLoader(i.$el)}))},showGenericErrorMessage(){this.$el.find(".sui-box-body").html('<div id="hustle-request-error-reload-notice" role="alert" aria-live="assertive" class="sui-notice"></div>'),this.$el.find(".sui-box-footer").html(""),SUI.openNotice("hustle-request-error-reload-notice","<p>"+optinVars.messages.request_error_reload_notice+"</p>",{type:"error",autoclose:{show:!1}})}})}))},1553:function(e,t,i){var s=i(792);Hustle.define("Settings.Palettes",(function(e){"use strict";return Backbone.View.extend({el:"#palettes-box",events:{"click .hustle-create-palette":"openCreatePaletteModal","click .hustle-delete-button":"openDeletePaletteModal","click .hustle-button-delete":"delettePalette"},initialize(){const e=Hustle.get("Settings.Palettes_Modal");this.paletteModal=new e},openCreatePaletteModal(e){this.paletteModal.open(e)},openDeletePaletteModal(t){t.preventDefault();const i=e(t.currentTarget),n={id:i.data("id"),title:i.data("title"),description:i.data("description"),action:"delete",nonce:i.data("nonce"),actionClass:"hustle-button-delete"};s.deleteModal.open(n,i[0]),e(".hustle-button-delete").on("click",(e=>this.delettePalette(e)))},delettePalette(t){t.preventDefault();const i=e(t.currentTarget),n=i.data("form-id"),a=i.data(),o=e("#"+n),l=new FormData(o[0]);e.each(a,((e,t)=>l.append(e,t))),l.append("_ajax_nonce",optinVars.settings_palettes_action_nonce),l.append("action","hustle_handle_palette_actions"),e.ajax({url:ajaxurl,type:"POST",data:l,contentType:!1,processData:!1}).done((t=>{t.data.url?location.replace(t.data.url):t.data.notification&&s.Notification.open(t.data.notification.status,t.data.notification.message,t.data.notification.delay),t.data.url||e(".sui-button-onload").removeClass("sui-button-onload")})).fail((()=>{s.Notification.open("error",optinVars.messages.commons.generic_ajax_error),e(".sui-button-onload").removeClass("sui-button-onload")}))}})}))},3664:function(e,t,i){var s=i(792);Hustle.define("Settings.Data_Settings",(function(e){"use strict";return Backbone.View.extend({el:"#data-box",events:{"click #hustle-dialog-open--reset-data-settings":"dataDialog"},dataDialog(t){t.preventDefault();const i=this.$(t.target),s=e("#hustle-dialog--reset-data-settings");SUI.openModal("hustle-dialog--reset-data-settings",i[0],s.find(".sui-box-header .sui-button-icon")[0],!0),e("#hustle-reset-settings").off("click").on("click",(e=>this.settingsReset(e)))},settingsReset(t){const i=e(t.currentTarget),n=i.closest(".sui-modal").find("button, .sui-button");n.prop("disabled",!0),i.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:{action:"hustle_reset_settings",_ajax_nonce:i.data("nonce")},success(){e("#"+i.data("notice")).show(),SUI.closeModal(),i.removeClass("sui-button-onload"),n.prop("disabled",!1),s.Notification.open("success",optinVars.messages.settings_was_reset),window.setTimeout((()=>location.reload(!0)),2e3)},error(){SUI.closeModal(),i.removeClass("sui-button-onload"),n.prop("disabled",!1),s.Notification.open("error",optinVars.messages.something_went_wrong)}})}})}))},8616:function(e,t,i){var s=i(2947),n=i(792);Hustle.define("Settings.Palettes_Modal",(function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--edit-palette",events:{"click .hustle-button-action":"handleAction","click .hustle-modal-close":"closeCreatePaletteModal","change #hustle-palette-module-type":"updateModulesOptions"},initialize(){},open(t){void 0!==e(t.currentTarget).data("slug")?this.handleAction(t):(this.$("#hustle-palette-module-type").trigger("change"),SUI.openModal("hustle-dialog--edit-palette",t.currentTarget,"hustle-palette-name",!1))},handleAction(t){t.preventDefault();const i=this,a=e(t.currentTarget),o=a.data("form-id");a.addClass("sui-button-onload"),s.accessibleHide(this.$(".sui-error-message"));let l=new FormData,d=!1;if(void 0!==o){const t=e("#"+o);t.length&&(l=new FormData(t[0]),t.find(".hustle-required-field").each(((t,i)=>{const n=e(i);if(!n.val().trim().length){const e=n.data("error-message"),t=n.siblings(".sui-error-message");t.html(e),s.accessibleShow(t),d=!0}})))}if(d)return void e(".sui-button-onload").removeClass("sui-button-onload");const r=a.data();e.each(r,((e,t)=>l.append(e,t))),l.append("_ajax_nonce",optinVars.settings_palettes_action_nonce),l.append("action","hustle_handle_palette_actions"),e.ajax({url:ajaxurl,type:"POST",data:l,contentType:!1,processData:!1}).done((s=>{s.data.callback&&"function"==typeof i[s.data.callback]?i[s.data.callback](s.data,s.success,t):s.data.url?location.replace(s.data.url):s.data.notification&&n.Notification.open(s.data.notification.status,s.data.notification.message,s.data.notification.delay),s.data.url||e(".sui-button-onload").removeClass("sui-button-onload")})).fail((()=>{e(".sui-button-onload").removeClass("sui-button-onload")}))},actionOpenEditPalette(t,i,s){this.actionGoToSecondStep(t),SUI.openModal("hustle-dialog--edit-palette",s.currentTarget,"hustle-palette-name",!1),t.palette_data.name&&e("#hustle-dialog--edit-palette").find("#hustle-palette-name").val(t.palette_data.name)},actionGoToSecondStep(e){const t=this.$("#hustle-edit-palette-first-step"),i=this.$("#hustle-edit-palette-second-step"),n=this.$(".hustle-button-action"),a=e.palette_data,o=Optin.template("hustle-dialog--edit-palette-tpl");s.accessibleHide(t,!0),i.html(o(a)),this.initiateSecondStepElements(),s.accessibleShow(i,!0),i.trigger("focus"),n.data("step",3),n.addClass("sui-button-blue"),s.accessibleHide(n.find("#hustle-step-button-text")),s.accessibleShow(n.find("#hustle-finish-button-text"))},initiateSecondStepElements(){this.$(".sui-accordion").each((function(){SUI.suiAccordion(this)})),SUI.suiTabs(),SUI.tabs(),this.createPickers()},closeCreatePaletteModal(){const e=this,t=this.$("#hustle-edit-palette-first-step"),i=this.$("#hustle-edit-palette-second-step"),n=this.$(".hustle-button-action");setTimeout((function(){s.accessibleHide(e.$(".sui-error-message")),s.accessibleHide(i,!0),i.html(""),s.accessibleShow(t,!0),n.removeClass("sui-button-blue"),n.data("step",2),s.accessibleShow(n.find("#hustle-step-button-text")),s.accessibleHide(n.find("#hustle-finish-button-text"))}),500)},createPickers(){const t=this.$(".sui-colorpicker-input");t.wpColorPicker({change(t,i){const s=e(this);s.val()!==i.color.toCSS()&&s.val(i.color.toCSS()).trigger("change")},palettes:["#333333","#FFFFFF","#17A8E3","#E1F6FF","#666666","#AAAAAA","#E6E6E6"]}),t.hasClass("wp-color-picker")&&t.each((function(){const t=e(this),i=t.closest(".sui-colorpicker-wrap"),s=i.find(".sui-colorpicker-value span[role=button]"),n=i.find(".sui-colorpicker-value"),a=n.find("button"),o=n.find(".hustle-colorpicker-input"),l=t.closest(".wp-picker-container"),d=l.find(".wp-color-result"),r=d.find(".color-alpha"),c=l.find(".wp-picker-clear");let u="hex";!0===t.data("alpha")?(u="rgba",t.on("change",(function(){s.find("span").css({"background-color":r.css("background")}),"undefined"==typeof data&&o.val(t.val())}))):t.on("change",(function(){s.find("span").css({"background-color":d.css("background-color")}),"undefined"==typeof data&&o.val(t.val())})),o.on("change",(function(){t.val(o.val()),t.trigger("change",[{triggeredByUs:!0}])})),i.find(".sui-colorpicker").addClass("sui-colorpicker-"+u),i.find(".sui-button, span[role=button]").on("click",(function(e){d.trigger("click"),e.preventDefault(),e.stopPropagation()})),a.on("click",(function(i){const a=t.data("attribute"),o=e("#hustle-palette-module-fallback").val(),l=optinVars.palettes[o][a];c.trigger("click"),n.find("input").val(l),t.val(l).trigger("change"),s.find("span").css({"background-color":l}),i.preventDefault(),i.stopPropagation()}))}))},updateModulesOptions(t){const i=e(t.currentTarget).val(),s=this.$("#hustle-palette-module-name");let n="";e.each(optinVars.current[i],((e,t)=>{n+=`<option value="${e}">${t}</option>`})),s.html(n),this.$(".sui-select:not(.hustle-select-ajax)").SUIselect2({dropdownCssClass:"sui-select-dropdown",dropdownParent:this.$(".sui-box")})}})}))},9090:function(){Hustle.define("Settings.Permissions_View",(function(e){"use strict";return Backbone.View.extend({el:"#permissions-box",initialize(){e((function(){function t(){e(".select2-selection__rendered li:first-child .select2-selection__choice__remove").off("click").text("").on("click",(function(e){e.stopImmediatePropagation(),e.preventDefault()}))}e("select").on("change.select2",(function(){t()})),t()}))}})}))},5362:function(e,t,i){var s=i(792);Hustle.define("Settings.Privacy_Settings",(function(e){"use strict";return Backbone.View.extend({el:"#privacy-box",events:{"click #hustle-dialog-open--delete-ips":"openDeleteIpsDialog"},initialize(){e("#hustle-delete-ips-submit").on("click",this.handleIpDeletion)},openDeleteIpsDialog(t){SUI.openModal("hustle-dialog--delete-ips",e(t.currentTarget)[0],this.$("#hustle-dialog--delete-ips .sui-box-header .sui-button-icon")[0],!0),t.preventDefault()},handleIpDeletion(t){t.preventDefault();const i=e(t.currentTarget),n=e("#"+i.data("formId")),a=new FormData(n[0]);a.append("action","hustle_remove_ips"),a.append("_ajax_nonce",i.data("nonce")),i.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:a,contentType:!1,processData:!1,success(t){s.Notification.open("success",t.data.message),SUI.closeModal(),e(".sui-button-onload").removeClass("sui-button-onload")},error(){SUI.closeModal(),e(".sui-button-onload").removeClass("sui-button-onload"),s.Notification.open("error",optinVars.messages.something_went_wrong)}})}})}))},759:function(){Hustle.define("Settings.reCaptcha_Settings",(function(e){"use strict";return Backbone.View.extend({el:"#recaptcha-box",data:{},initialize(){this.maybeRenderRecaptchas()},maybeRenderRecaptchas(){const t=this,i=["v2_checkbox","v2_invisible","v3_recaptcha"];let s=!1;for(const n of i){const i=this.$(`#hustle-modal-recaptcha-${n}-0`),a=this.$(`input[name="${n}_site_key"]`).val().trim(),o=this.$(`input[name="${n}_secret_key"]`).val().trim();a&&o?(i.data("sitekey",a),s?HUI.maybeRenderRecaptcha(i.closest(".sui-form-field")):e.ajax({url:ajaxurl,type:"POST",data:{action:"hustle_load_recaptcha_preview"}}).done((e=>{e.success&&(s=!0,t.$("#hustle-recaptcha-script-container").html(e.data),setTimeout((()=>HUI.maybeRenderRecaptcha(i.closest(".sui-form-field"))),1e3))})),this.$(`.hustle-recaptcha-${n}-preview-notice`).hide(),i.show()):(this.$(`.hustle-recaptcha-${n}-preview-notice`).show(),i.hide())}}})}))},7202:function(){Hustle.define("Settings.Top_Metrics_View",(function(){"use strict";return Backbone.View.extend({el:"#top-metrics-box",events:{"click .sui-checkbox input":"maybeDisableInputs"},initialize(){this.maybeDisableInputs()},maybeDisableInputs(){const e=this.$el.find("input:checked"),t=this.$el.find("input:not(:checked)"),i=this.$el.find('button[type="submit"]'),s=i.parent(),n=t.next("span");3<=e.length?(t.prop("disabled",!0),n.addClass("sui-tooltip"),n.css("opacity","1"),i.prop("disabled",!1),s.removeClass("sui-tooltip")):(i.prop("disabled",!0),t.prop("disabled",!1),n.removeClass("sui-tooltip"),n.css("opacity",""),s.addClass("sui-tooltip"))}})}))},3901:function(e,t,i){var s=i(2947),n=i(792);Hustle.define("Settings.View",(function(e,t,i){"use strict";const a="_page_hustle_settings";if(a!==pagenow.substr(pagenow.length-a.length))return;new(Backbone.View.extend({el:".sui-wrap-hustle",events:{"click .sui-sidenav .sui-vertical-tab a":"sidenav","change select.sui-mobile-nav":"sidenavMobile","click .sui-pagination-wrap > button":"pagination","click .hustle-load-on-click":"addLoadingState","click .hustle-settings-save":"handleSave","submit form.sui-box-body":"preventSubmit"},initialize(){const t=Hustle.get("Settings.reCaptcha_Settings"),s=Hustle.get("Settings.Top_Metrics_View"),n=Hustle.get("Settings.Privacy_Settings"),a=Hustle.get("Settings.Permissions_View"),o=Hustle.get("Settings.Data_Settings"),l=Hustle.get("Settings.Palettes");this.recaptchaView=new t,new s,new n,new a,new o,new l,e(i).off("popstate",(e=>this.tabUpdate(e))),e(i).on("popstate",(e=>this.tabUpdate(e))),Hustle.Events.trigger("view.rendered",this),this.doActionsBasedOnUrl()},doActionsBasedOnUrl(){if(s.getUrlParam("show-notice")){const e="success"===s.getUrlParam("show-notice")?"success":"error",t=s.getUrlParam("notice"),i=t&&"undefined"!==optinVars.messages[t]?optinVars.messages[t]:s.getUrlParam("notice-message");void 0!==i&&i.length&&n.Notification.open(e,i)}else s.getUrlParam("404-downgrade-modal")&&this.$("#hustle-dialog--404-downgrade").length&&SUI.openModal("hustle-dialog--404-downgrade","hustle-popup-number")},sidenav(t){const i=e(t.target).data("tab");i&&this.tabJump(i,!0),t.preventDefault()},sidenavMobile(t){const i=e(t.currentTarget).val();i&&this.tabJump(i,!0)},tabUpdate(e){const t=e.originalEvent.state;t&&this.tabJump(t.tabSelected)},tabJump(e,t){const i=this.$el.find('a[data-tab="'+e+'"]'),s=i.closest(".sui-vertical-tabs").find(".sui-vertical-tab"),n=this.$el.find(".sui-box[data-tab]"),a=this.$el.find('.sui-box[data-tab="'+e+'"]');t&&history.pushState({tabSelected:e},"Hustle Settings","admin.php?page=hustle_settings&section="+e),s.removeClass("current"),n.hide(),i.parent().addClass("current"),a.show()},pagination(e){const t=this.$(e.target).closest(".sui-pagination-wrap"),i=t.find(".sui-button-icon"),s=t.next(".sui-pagination-filter");i.toggleClass("sui-active"),s.toggleClass("sui-open"),e.preventDefault(),e.stopPropagation()},preventSubmit(e){e.preventDefault()},handleSave(t){t.preventDefault();const i=this,s=e(t.currentTarget),a=s.data("form-id"),o=s.data();let l=new FormData;if(tinyMCE.triggerSave(),void 0!==a){const t=e("#"+a);t.length&&(l=new FormData(t[0]),e.each(t.find("input[type=checkbox]"),(function(){const t=e(this);t.is(":checked")||l.append(t.attr("name"),"0")})))}e.each(o,((e,t)=>l.append(e,t))),l.append("_ajax_nonce",optinVars.current.save_settings_nonce),l.append("action","hustle_save_settings"),s.addClass("sui-button-onload"),s.prop("disabled",!0),e.ajax({url:ajaxurl,type:"POST",data:l,contentType:!1,processData:!1}).done((t=>{t.data?(t.data.callback&&"undefined"!==i[t.data.callback]&&i[t.data.callback](s,t.data,t.success),t.data.url?!0===t.data.url?location.reload():location.replace(t.data.url):t.data.notification&&n.Notification.open(t.data.notification.status,t.data.notification.message,t.data.notification.delay),t.data.url||(e(".sui-button-onload").removeClass("sui-button-onload"),s.prop("disabled",!1))):(t.success?n.Notification.open("success",optinVars.messages.settings_saved):n.Notification.open("error",optinVars.messages.something_went_wrong_reload),e(".sui-button-onload").removeClass("sui-button-onload"),s.prop("disabled",!1))})).fail((()=>{e(".sui-button-onload").removeClass("sui-button-onload"),s.prop("disabled",!1),n.Notification.open("error",optinVars.messages.something_went_wrong)}))},actionSaveRecaptcha(){this.recaptchaView.maybeRenderRecaptchas()},addLoadingState(t){e(t.currentTarget).addClass("sui-button-onload")}}))}))},7570:function(e,t,i){var s=i(5533);!function(){"use strict";!function(){const e="_page_hustle_slidein_listing";e===pagenow.substr(pagenow.length-e.length)&&new Optin.listingBase({moduleType:optinVars.current.module_type})}(),function(){const e="_page_hustle_slidein";if(e!==pagenow.substr(pagenow.length-e.length))return;const t=Hustle.View.extend(Hustle.get("Mixins.Wizard_View")),i=Hustle.View.extend(Hustle.get("Mixins.Module_Content")),n=Hustle.View.extend(Hustle.get("Mixins.Module_Emails")),a=Hustle.View.extend(Hustle.get("Mixins.Module_Design")),o=Hustle.View.extend(Hustle.get("Mixins.Module_Visibility")),l=Hustle.View.extend(Hustle.get("Mixins.Module_Settings")),d=Hustle.get("Module.IntegrationsView"),r=s.Model,c=Hustle.get("Models.M");new t({model:new r(optinVars.current.data||{}),contentView:new i({BaseModel:c}),emailsView:new n({BaseModel:c}),designView:new a({BaseModel:c}),integrationsView:new d({BaseModel:c}),visibilityView:new o({BaseModel:c}),settingsView:new l({BaseModel:c})})}()}()},6699:function(e,t,i){var s=i(5533);!function(){"use strict";!function(){const e="_page_hustle_sshare_listing";e===pagenow.substr(pagenow.length-e.length)&&new Optin.listingBase({moduleType:optinVars.current.module_type})}(),function(){const e="_page_hustle_sshare";if(e!==pagenow.substr(pagenow.length-e.length))return;const t=Hustle.get("SShare.View"),i=Hustle.get("SShare.Content_View"),n=Hustle.get("SShare.Display_View"),a=Hustle.get("SShare.Design_View"),o=Hustle.View.extend(Hustle.get("Mixins.Module_Visibility")),l=s.Model,d=Hustle.get("Models.M");new t({model:new l(optinVars.current.data||{}),contentView:new i({BaseModel:d}),displayView:new n({BaseModel:d}),designView:new a({BaseModel:d}),visibilityView:new o({BaseModel:d})})}()}()},4526:function(e,t,i){var s=i(2947),n=i(792);Hustle.define("SShare.Content_View",(function(e){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Module_Content"),{el:"#hustle-wizard-content",activePlatforms:[],platformsModal:{},events:{"change select.hustle-select-field-variables":"addPlaceholderToField","click ul.wpmudev-tabs-menu li label":"toggleCheckbox","click .hustle-choose-platforms":"openPlatformsModal"},render(){const e=this,t=this.model.toJSON();if(void 0!==t.social_icons&&t.social_icons)for(const i in t.social_icons)e.addPlatformToPanel(i,t.social_icons[i]);const i=Hustle.get("Modals.Services_Platforms");this.platformsModal=new i,this.platformsModal.on("platforms:added",(e=>this.addNewPlatforms(e)));const a=this.$("#hustle-social-services").sortable({axis:"y",containment:".sui-box-builder"});a.on("sortupdate",(()=>this.platformsOrderChanged(a)));for(const t in optinVars.social_platforms)e.addPlatformToDialog(t);this.bindRemoveService(),"true"===s.getUrlParam("new")&&n.Notification.open("success",optinVars.messages.module_created,1e4)},bindRemoveService(){e("#hustle-wizard-content .hustle-remove-social-service").off("click").on("click",(e=>this.removeService(e)))},openPlatformsModal(){const e=this.model.get("social_icons"),t=void 0!==e?Object.keys(e):[];this.platformsModal.beforeOpen(t),SUI.openModal("hustle-dialog--add-platforms",this.$(".hustle-choose-platforms")[0],this.$("#hustle-dialog--add-platforms .hustle-modal-close")[0],!0)},addNewPlatforms(t){this.model.get("social_icons")||this.model.set("social_icons",{});const i=this,s=_.extend({},this.model.get("social_icons"));e.each(t,((e,t)=>{if(s&&t in s)return!0;i.addPlatformToPanel(t,{});const n=this.getPlatformDefaults(t);s[t]=n})),this.bindRemoveService(),this.model.set("social_icons",s),Hustle.Events.trigger("view.rendered",this)},addPlatformToPanel(e,t){const i=Optin.template("hustle-platform-row-tpl"),s=this.$("#hustle-social-services");t=_.extend({},this.getPlatformViewDefaults(e),t),this.activePlatforms.push(e),s.append(i(t))},addPlatformToDialog(t){const i=Optin.template("hustle-add-platform-li-tpl"),s=e("#hustle_add_platforms_container"),n=this.getPlatformViewDefaults(t);s.append(i(n))},getPlatformDefaults(e){const t={platform:e,label:e in optinVars.social_platforms?optinVars.social_platforms[e]:e,type:"click",counter:"0",link:""};return"email"===e&&(t.title="{post_title}",t.message=optinVars.social_platforms_data.email_message_default),t},getPlatformViewDefaults(e){const t=this.model.toJSON(),i=void 0===t.counter_enabled?"true":t.counter_enabled,s={fivehundredpx:"500px"},n=-1!==optinVars.social_platforms_with_endpoints.indexOf(e),a=-1!==optinVars.social_platforms_with_api.indexOf(e),o=e in s?s[e]:e;return _.extend({},this.getPlatformDefaults(e),{platform_style:o,counter_enabled:i,hasEndpoint:n,hasCounter:a})},platformsOrderChanged(e){const t=this.model.get("social_icons"),i=e.sortable("toArray",{attribute:"data-platform"}),s={};for(const e of i)s[e]=t[e];this.model.set("social_icons",s),this.model.trigger("change",this.model)},removeService(t){const i=e(t.currentTarget).data("platform"),s=this.model.get("social_icons");this.$("#hustle-platform-"+i).remove(),this.activePlatforms=_.without(this.activePlatforms,i),delete s[i],this.model.trigger("change",this.model),t.stopPropagation()},modelUpdated(e){const t=e.changed,i=void 0!==Object.keys(t)[0]?Object.keys(t)[0]:"";let s;if("service_type"in t&&this.serviceTypeUpdated(t.service_type),"click_counter"in t)this.clickCounterUpdated(t.click_counter);else if(-1!==i.indexOf("_counter")){const e=i.slice(0,-8);s=this.model.get("social_icons"),e in s&&(s[e].counter=parseInt(t[i])),this.model.unset(i,{silent:!0})}if(-1!==i.indexOf("_link")){const e=i.slice(0,-5);s=this.model.get("social_icons"),e in s&&(s[e].link=t[i]),this.model.unset(i,{silent:!0})}if(-1!==i.indexOf("_type")){const e=i.slice(0,-5);s=this.model.get("social_icons"),e in s&&(s[e].type="native"===t[i]?"native":"click"),this.model.unset(i,{silent:!0})}if("email_title"in t){const e="email";s=this.model.get("social_icons"),e in s&&(s[e].title=t[i]),this.model.unset(i,{silent:!0})}if("email_message"in t){const e="email";s=this.model.get("social_icons"),e in s&&(s[e].message=t[i]),this.model.unset(i,{silent:!0})}},serviceTypeUpdated(t){const i=this.$("#wpmudev-sshare-counter-options"),s=e(".wph-wizard-services-icons-native"),n=e(".wph-wizard-services-icons-custom");"native"===t?(i.removeClass("wpmudev-hidden"),n.addClass("wpmudev-hidden"),s.removeClass("wpmudev-hidden")):(i.addClass("wpmudev-hidden"),s.addClass("wpmudev-hidden"),n.removeClass("wpmudev-hidden"))},clickCounterUpdated(t){const i=e("#wpmudev-sshare-counter-options .hustle-twitter-notice");"native"===t?i.removeClass("wpmudev-hidden"):i.hasClass("wpmudev-hidden")||i.addClass("wpmudev-hidden"),e("#wph-wizard-services-icons-native .wpmudev-social-item").each((function(){const i=e(this).find(".toggle-checkbox").is(":checked"),s=e(this).find("input.wpmudev-input_number");"none"!==t&&i?s.removeClass("wpmudev-hidden"):s.hasClass("wpmudev-hidden")||s.addClass("wpmudev-hidden")})),e("#wph-wizard-services-icons-native #wpmudev-counter-title>strong").removeClass("wpmudev-hidden"),"none"===t?e("#wph-wizard-services-icons-native #wpmudev-counter-title>strong:first-child").addClass("wpmudev-hidden"):e("#wph-wizard-services-icons-native #wpmudev-counter-title>strong:nth-child(2)").addClass("wpmudev-hidden")},toggleCheckbox(e){e.preventDefault(),e.stopPropagation();const t=this.$(e.target).closest("li");if(t.hasClass("current"))return;t.addClass("current"),t.siblings().removeClass("current");const i=t.find("input"),s=i.data("attribute");this.model.set(s,i.val())},setSocialIcons(){let e=this.model.toJSON();e=this.getSocialIconsData(e),this.model.set("social_icons",e.social_icons,{silent:!0})},getSocialIconsData(t){const i=e("#wph-wizard-services-icons-"+t.service_type+" .wpmudev-social-item"),s={};return i.each((function(){const t=e(this),i=t.find("input.toggle-checkbox"),n=i.data("id"),a=t.find("input.wpmudev-input_number"),o=t.find("input.wpmudev-input_text");if(a.length){0>parseInt(a.val())&&a.val(0)}i.is(":checked")&&(s[n]={enabled:!0,counter:a.length?a.val():"0",link:o.length?o.val():""})})),i.length&&(t.social_icons=s),t},addPlaceholderToField(t){const i=e(t.currentTarget),s=i.val(),n=i.data("field"),a=e(`[name="${n}"]`),o=a.val()+s;a.val(o).trigger("change")}}))}))},2506:function(){Hustle.define("SShare.Design_View",(function(e){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Model_Updater"),Hustle.get("Mixins.Module_Design"),{beforeRender(){this.listenTo(this.model,"change",this.modelUpdated),Hustle.Events.off("modules.view.displayTypeUpdated").on("modules.view.displayTypeUpdated",(e=>this.viewChangedDisplayTab(e)))},render(){this.createPickers(e(".sui-colorpicker-input")),e('a[data-tab="appearance"]').on("click",this.updatePreview),e('.sui-box[data-tab="display"] .sui-button[data-direction="next"').on("click",this.updatePreview),e('.sui-box[data-tab="visibility"] .sui-button[data-direction="prev"').on("click",this.updatePreview),this.updateSocialIconsPickers(),setTimeout((()=>this.updatePreview()),100)},updatePreview(){e("#hui-preview-social-shares-floating").trigger("hustle_update_prewiev")},modelUpdated(e){const t=Object.keys(e.changed)[0],i=this.getActionOnContentModelUpdated(t);void 0!==i&&i(),this.updatePreview()},getActionOnContentModelUpdated(e){return{icon_style:()=>this.updateSocialIconsPickers()}[e]},updateSocialIconsPickers(){const t=this.model.get("icon_style");"flat"===t?(e("#hustle-floating-icons-custom-background").addClass("sui-hidden"),e("#hustle-widget-icons-custom-background").addClass("sui-hidden")):(e("#hustle-floating-icons-custom-background").removeClass("sui-hidden"),e("#hustle-widget-icons-custom-background").removeClass("sui-hidden")),"outline"===t?(this.$(".hustle-icon-bg-color-label").addClass("sui-hidden"),this.$(".hustle-icon-border-color-label").removeClass("sui-hidden"),e("#hustle-floating-counter-border").addClass("sui-hidden"),e("#hustle-widget-counter-border").addClass("sui-hidden")):(this.$(".hustle-icon-bg-color-label").removeClass("sui-hidden"),this.$(".hustle-icon-border-color-label").addClass("sui-hidden"),e("#hustle-floating-counter-border").removeClass("sui-hidden"),e("#hustle-widget-counter-border").removeClass("sui-hidden"))},viewChangedDisplayTab(t){const i=t.get("inline_enabled"),s=t.get("widget_enabled"),n=t.get("shortcode_enabled"),a=t.get("float_desktop_enabled"),o=t.get("float_mobile_enabled"),l=_.intersection([1,"1","true"],[i,s,n]).length,d=_.intersection([1,"1","true"],[o,a]).length;d?(e("#hustle-appearance-floating-icons-row").show(),e("#hustle-appearance-floating-icons-placeholder").hide()):(e("#hustle-appearance-floating-icons-row").hide(),e("#hustle-appearance-floating-icons-placeholder").show()),l?(e("#hustle-appearance-widget-icons-row").show(),e("#hustle-appearance-widget-icons-placeholder").hide()):(e("#hustle-appearance-widget-icons-row").hide(),e("#hustle-appearance-widget-icons-placeholder").show()),l||d?(e("#hustle-appearance-icons-style").show(),e("#hustle-appearance-empty-message").hide()):(e("#hustle-appearance-icons-style").hide(),e("#hustle-appearance-empty-message").show(),e("#hustle-appearance-floating-icons-placeholder").hide(),e("#hustle-appearance-widget-icons-placeholder").hide())},colorPickerCleared(e,t){const i=t.data("attribute"),s=optinVars.palettes.sshare_defaults[i],n=t.closest(".sui-colorpicker-wrap"),a=n.find(".sui-colorpicker-value"),o=n.find(".sui-colorpicker-value span[role=button]");t.closest(".wp-picker-container").find(".wp-picker-clear").trigger("click"),a.find("input").val(s),t.val(s).trigger("change"),o.find("span").css({"background-color":s}),e.preventDefault(),e.stopPropagation()},updatePickers(){const e=this;if(void 0!==optinVars.palettes.sshare_defaults){const t=optinVars.palettes.sshare_defaults;_.each(t,(function(t,i){e.$('input[data-attribute="'+i+'"]').val(t).trigger("change")}))}}}))}))},9156:function(){Hustle.define("SShare.Display_View",(function(){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Module_Display"),{viewChanged(e){_.intersection(["float_desktop_enabled","float_mobile_enabled","inline_enabled","widget_enabled","shortcode_enabled"],Object.keys(e)).length?Hustle.Events.trigger("modules.view.displayTypeUpdated",this.model):"float_desktop_position"in e?"right"===e.float_desktop_position?(this.$("#hustle-float_desktop-left-offset-label").addClass("sui-hidden"),this.$("#hustle-float_desktop-right-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_desktop-offset-x-wrapper").removeClass("sui-hidden")):"left"===e.float_desktop_position?(this.$("#hustle-float_desktop-left-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_desktop-right-offset-label").addClass("sui-hidden"),this.$("#hustle-float_desktop-offset-x-wrapper").removeClass("sui-hidden")):this.$("#hustle-float_desktop-offset-x-wrapper").addClass("sui-hidden"):"float_desktop_position_y"in e?"bottom"===e.float_desktop_position_y?(this.$("#hustle-float_desktop-top-offset-label").addClass("sui-hidden"),this.$("#hustle-float_desktop-bottom-offset-label").removeClass("sui-hidden")):(this.$("#hustle-float_desktop-top-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_desktop-bottom-offset-label").addClass("sui-hidden")):"float_mobile_position"in e?"right"===e.float_mobile_position?(this.$("#hustle-float_mobile-left-offset-label").addClass("sui-hidden"),this.$("#hustle-float_mobile-right-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_mobile-offset-x-wrapper").removeClass("sui-hidden")):"left"===e.float_mobile_position?(this.$("#hustle-float_mobile-left-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_mobile-right-offset-label").addClass("sui-hidden"),this.$("#hustle-float_mobile-offset-x-wrapper").removeClass("sui-hidden")):this.$("#hustle-float_mobile-offset-x-wrapper").addClass("sui-hidden"):"float_mobile_position_y"in e&&("bottom"===e.float_mobile_position_y?(this.$("#hustle-float_mobile-top-offset-label").addClass("sui-hidden"),this.$("#hustle-float_mobile-bottom-offset-label").removeClass("sui-hidden")):(this.$("#hustle-float_mobile-top-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_mobile-bottom-offset-label").addClass("sui-hidden")))}}))}))},4327:function(){Hustle.define("Modals.Services_Platforms",(function(){"use strict";return Backbone.View.extend({el:"#hustle-dialog--add-platforms",selectedPlatforms:[],events:{"click .sui-box-selector input":"selectPlatforms","click #hustle-add-platforms":"addPlatforms"},beforeOpen(e){this.selectedPlatforms=e,this.$(".hustle-add-platforms-option").prop("checked",!1).prop("disabled",!1);for(const e of this.selectedPlatforms)this.$("#hustle-social--"+e).prop("checked",!0).prop("disabled",!0)},selectPlatforms(e){const t=this.$(e.target),i=this.$el.find('label[for="'+t.attr("id")+'"]'),s=t.val();i.toggleClass("selected"),t.prop("checked")?this.selectedPlatforms.push(s):this.selectedPlatforms=_.without(this.selectedPlatforms,s)},checkPlatforms(){for(const e of this.selectedPlatforms)this.$("#hustle-social--"+e).prop("checked")||(this.selectedPlatforms=_.without(this.selectedPlatforms,e))},addPlatforms(e){const t=this.$(e.target);t.addClass("sui-button-onload"),this.checkPlatforms(),this.trigger("platforms:added",this.selectedPlatforms),setTimeout((function(){SUI.closeModal(),t.removeClass("sui-button-onload")}),500)}})}))},6357:function(){Hustle.define("SShare.View",(function(e){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Wizard_View"),{_events:{"hustle_update_prewiev #hui-preview-social-shares-floating":"updatePreview"},updatePreview(){const t=_.extend({},this.model.toJSON(),this.getDataToSave());e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"hustle_preview_module",id:this.model.get("module_id"),previewData:t},success(t){if(t.success){const i=e("#hui-preview-social-shares-floating"),s=e("#hui-preview-social-shares-widget");i.html(t.data.floatingHtml),s.html(t.data.widgetHtml),t.data.style&&i.append(t.data.style),e(".hustle-share-icon").on("click",(e=>e.preventDefault()))}}})},setTabsViews(e){this.contentView=e.contentView,this.displayView=e.displayView,this.designView=e.designView,this.visibilityView=e.visibilityView,this.moduleType=this.model.get("module_type")},renderTabs(){this.contentView.delegateEvents(),this.designView.delegateEvents(),this.displayView.delegateEvents(),this.visibilityView.delegateEvents(),this.visibilityView.afterRender()},sanitizeData(){},getDataToSave(){return{content:this.contentView.model.toJSON(),display:this.displayView.model.toJSON(),design:this.designView.model.toJSON(),visibility:this.visibilityView.model.toJSON()}}}))}))},2947:function(e,t,i){"use strict";i.r(t),i.d(t,{getUrlParam:function(){return o},showHideDependencyOnSelectChange:function(){return l},accessibleHide:function(){return d},accessibleShow:function(){return r},moduleActionHandler:function(){return c}});var s=i(3609),n=i.n(s),a=i(792);const o=function(e,t=!1){const i=optinVars.urlParams;return void 0!==i[e]?i[e]:t},l=function(e){(e?e.find("select.hustle-select-with-container"):n()("select.hustle-select-with-container")).each((function(){const e=n()(this),t=n()(`[data-field-content="${this.name}"]`),i=!!e.data("content-on")&&e.data("content-on").split(","),s=!!e.data("content-off")&&e.data("content-off").split(","),a=()=>{const n=e.val();(i?i.includes(n):!s.includes(n))?r(t):d(t)};a(),e.on("change",(()=>a()))}))},d=function(e,t=!1,i=!1){e.hide(),e.attr("aria-hidden",!0),e.prop("hidden",!0),t&&e.prop("tabindex","-1"),i&&void 0!==i.name&&(void 0!==i.value?e.attr(i.name,i.value):e.removeAttr(i.name))},r=function(e,t=!1,i=!1){e.show(),e.prop("aria-hidden",!1),e.removeClass("sui-hidden"),e.prop("hidden",!1),t&&e.attr("tabindex","0"),i&&void 0!==i.name&&(void 0!==i.value?e.attr(i.name,i.value):e.removeAttr(i.name))},c={context:"",$target:null,responseData:{},initAction(e,t){e.preventDefault(),this.context=t,this.$target=n()(e.currentTarget);const i=this,s=this.$target.data("form-id"),o=this.$target.data();let l=new FormData;if(void 0!==s){const e=n()("#"+s);e.length&&(l=new FormData(e[0]))}n().each(o,((e,t)=>l.append(e,t))),l.append("context",this.context),l.append("_ajax_nonce",optinVars.single_module_action_nonce),l.append("action","hustle_module_handle_single_action"),n().ajax({url:ajaxurl,type:"POST",data:l,contentType:!1,processData:!1}).done((e=>{e.data.callback&&"function"==typeof i[e.data.callback]?(this.responseData=e.data,i[e.data.callback]()):e.data.url?window.location.assign(e.data.url):e.data.notification?a.Notification.open(e.data.notification.status,e.data.notification.message,e.data.notification.delay):e.success||a.Notification.open("error",optinVars.messages.something_went_wrong,!1),e.data.url||n()(".sui-button-onload").removeClass("sui-button-onload")})).fail((()=>{n()(".sui-button-onload").removeClass("sui-button-onload")}))},actionToggleTracking(){let e,t;if(this.responseData.is_embed_or_sshare){const i=n()('.hustle-manage-tracking-button[data-module-id="'+this.$target.data("module-id")+'"]');i.data("tracking-types",this.responseData.enabled_types),t=0!==this.responseData.enabled_types.length,e=i.parents(".sui-accordion-item"),SUI.closeModal()}else t=1-(this.responseData.was_enabled?1:0),e=this.$target.parents(".sui-accordion-item"),this.$target.data("enabled",t),this.$target.find(".hustle-toggle-tracking-button-description").toggleClass("sui-hidden");e.hasClass("sui-accordion-item--open")&&e.find(".sui-accordion-open-indicator").trigger("click").trigger("click");const i=this.responseData.is_active&&!t;this.toggleTrackingDisabledTag(i,e),a.Notification.open("success",this.responseData.message,1e4)},actionToggleStatus(){"listing"===this.context?this.listingToggleStatus():this.dashboardToggleStatus()},listingToggleStatus(){const e=this.$target.closest(".sui-accordion-item"),t=e.find(".sui-accordion-item-title span.sui-tag");t.toggleClass("sui-tag-blue"),t.find(".hustle-toggle-status-button-description").toggleClass("sui-hidden"),this.$target.find(".hustle-toggle-status-button-description").toggleClass("sui-hidden"),e.hasClass("sui-accordion-item--open")&&e.find(".sui-accordion-open-indicator").trigger("click").trigger("click");const i=this.responseData.is_active&&!this.responseData.is_tracking_enabled;this.toggleTrackingDisabledTag(i,e)},dashboardToggleStatus(){const e=this.responseData.is_active;this.$target.find(".hustle-toggle-status-button-description").toggleClass("sui-hidden");const t=this.$target.parents("td.hui-status").find("span.sui-tooltip");t.removeClass("sui-draft sui-published"),e?t.addClass("sui-published").attr("data-tooltip",optinVars.messages.commons.published):t.addClass("sui-draft").attr("data-tooltip",optinVars.messages.commons.draft)},actionImportDisplayError(){const e=this.responseData.message,t=this.$target.closest(".sui-modal"),i=t.find(".sui-modal-content").attr("id")+"-error-notice";a.Notification.open("error",e,!1,i,!1),t.find('input[name="import_file"]').trigger("focus")},toggleTrackingDisabledTag(e,t){const i=t.find(".hustle-analytics-disabled-tag");e?i.removeClass("sui-hidden"):i.addClass("sui-hidden")}}},792:function(e,t,i){"use strict";i.r(t),i.d(t,{Notification:function(){return o},integrationsModal:function(){return l},integrationsAllRemove:function(){return d},integrationsActiveRemove:function(){return r},ProviderMigration:function(){return c},deleteModal:function(){return u}});var s=i(3609),n=i.n(s),a=i(792);const o={id:null,$floatingContainer:null,open(e,t,i=4e3,s="hustle-only-active-notification",a=!0){this.id=s;const o={type:e||"",icon:"info",dismiss:{},autoclose:{}};if(a){if(this.$floatingContainer=n()("#hustle-floating-notifications-wrapper"),this.createFloatingNoticeWrapper(),!1!==i){const e=parseInt(i);isNaN(e)&&(i=4e3)}o.dismiss={show:!1===i,label:optinVars.messages.commons.dismiss},o.autoclose={show:!1!==i,time:i}}else o.autoclose.show=!1,o.dismiss.show=!1;t=`<p>${t}</p>`,SUI.openNotice(s,t,o)},createFloatingNoticeWrapper(){const e=this.id;n()("#"+e).length||this.$floatingContainer.append(`<div\n\t\t\t\trole="alert"\n\t\t\t\tid="${e}"\n\t\t\t\tclass="sui-notice"\n\t\t\t\taria-live="assertive"\n\t\t\t></div>`)}},l={$popup:{},open(e){const t=this;let i=n()(e.target);i.hasClass("connect-integration")||(i=i.closest(".connect-integration")),n()("#hustle-integration-dialog").closest(".sui-modal").length&&n()("#hustle-integration-dialog").closest(".sui-modal").remove();const s=i.data("nonce"),a=i.data("slug"),o=i.data("title"),l=i.data("image"),d=i.data("action"),r=i.data("module_id"),c=i.data("multi_id"),u=i.data("global_multi_id"),h=Optin.template("hustle-integration-dialog-tpl");n()(".sui-wrap-hustle").append(h({image:l,title:o})),this.$popup=n()("#hustle-integration-dialog");const p=Hustle.get("Integration_Modal_Handler");this.view=new p({slug:a,nonce:s,action:d,moduleId:r,multiId:c,globalMultiId:u,el:this.$popup}),this.$popup.on("close",(()=>t.close())),SUI.openModal("hustle-integration-dialog",i[0],this.$popup.find(".sui-box .hustle-modal-close")[0],!0),this.$popup.on("click",".sui-tab-item",(function(e){const t=n()(e.currentTarget);t.closest(".sui-side-tabs").find(".sui-tab-item").removeClass("active"),t.addClass("active")}))},close(){this.view&&(this.$popup.closest(".sui-modal").remove(),this.view.remove())}},d={referrer:{},open(e,t){const i=this;this.referrer=t;const s=n()("#hustle-dialog--final-delete"),a=s.find(".sui-box-header .sui-button-icon");a.on("click",i.close),s.find("#hustle-delete-final-button-cancel").on("click",i.close),n()("#hustle-delete-final-button").off("click").on("click",(function(){var s,a,o;n()("#hustle-delete-final-button").addClass("sui-button-onload"),s=e,a=t,i.deleteIntegration(s,a),o=e,i.insertLocalList(o),i.close()})),n()("#hustle-delete-final-button").prop("disabled",!1);const o=n()('#hustle-connected-providers-section button[data-slug="'+e.data.slug+'"]');SUI.replaceModal("hustle-dialog--final-delete",o[0],a[0],!0)},close(){n()("#hustle-delete-final-button").removeClass("sui-button-onload"),n()("#hustle-delete-final-button").prop("disabled",!1)},confirmDelete(e,t){this.deleteIntegration(e,t),this.insertLocal(e),this.close()},deleteIntegration(e,t){t.request(e,!0,!1)},insertLocalList(e){const t={id:e.data.module_id,_ajax_nonce:e._ajax_nonce,action:"hustle_provider_insert_local_list"};n().ajax({url:ajaxurl,type:"POST",data:t,success(e){e.success?Hustle.Events.trigger("hustle:providers:reload"):a.Notification.open("error",optinVars.messages.something_went_wrong)},error(){a.Notification.open("error",optinVars.messages.something_went_wrong)}})}},r={$popup:{},_deferred:{},open(e,t,i){const s=this,a=n()("#hustle-dialog--remove-active"),o=Optin.template("hustle-modules-active-integration-tpl"),l=Optin.template("hustle-modules-active-integration-img-tpl"),d=Optin.template("hustle-modules-active-integration-header-tpl"),r=Optin.template("hustle-modules-active-integration-desc-tpl");n()("#hustle-dialog--remove-active tbody").html(""),n()("#hustle-dialog--remove-active .sui-box-logo").html(""),n()("#hustle-dialog--remove-active #hustle-dialog--remove-active-title").html(""),n()("#hustle-dialog--remove-active #hustle-dialog--remove-active-description").html(""),n()("#hustle-dialog--remove-active .sui-box-logo").append(l({image:t.data.img,title:t.data.slug})),n()("#hustle-dialog--remove-active #hustle-dialog--remove-active-title").append(d({title:t.data.title.replace(/Connect|Configure/gi," ")})),n()("#hustle-dialog--remove-active #hustle-dialog--remove-active-description").append(r({title:t.data.title.replace(/Connect|Configure/gi," ")})),n().each(e,(function(e,t){n()("#hustle-dialog--remove-active tbody").append(o({name:t.name,type:t.type,editUrl:t.edit_url}))})),a.find("#hustle-remove-active-integration-back").off("click").on("click",(function(){s.back(i)})),n()("#hustle-remove-active-button").off("click").on("click",(function(){var a,o,l;n()(this).addClass("sui-button-onload"),a=t,o=i,l=e,s.removeIntegration(a,o,l)}));let c="";c=i.globalMultiId?n()('button[data-global_multi_id="'+i.globalMultiId+'"]'):n()('button[data-slug="'+t.data.slug+'"]'),SUI.replaceModal("hustle-dialog--remove-active",c[0],a.find(".hustle-modal-close")[0],!0)},close(){SUI.closeModal()},back(e){this.close(),"hubspot"===e.slug||"constantcontact"===e.slug||"zapier"===e.slug?n()('button[data-slug="'+e.slug+'"]').trigger("click"):n()('button[data-global_multi_id="'+e.globalMultiId+'"]').trigger("click")},removeIntegration(e,t,i){const s=this;n().each(i,(function(t,i){e.data.slug===i.active.active_integrations&&s.insertLocalList(e,t)})),t.request(e,!0,!1),n()("#hustle-remove-active-button").removeClass("sui-button-onload")},insertLocalList(e,t){const i={id:t,_ajax_nonce:e._ajax_nonce,action:"hustle_provider_insert_local_list"};n().ajax({url:ajaxurl,type:"POST",data:i,success(e){!1===e.success&&a.Notification.open("error",optinVars.messages.something_went_wrong)},error(){a.Notification.open("error",optinVars.messages.something_went_wrong)}})}},c={$popup:{},open(e,t=null){const i=n()("#hustle-dialog-migrate--"+e),s=this;t&&n()("#integration-migrate").attr("data-id",t),setTimeout((()=>SUI.openModal("hustle-dialog-migrate--"+e,n()(".sui-header-title")[0],n()("#hustle-dialog-migrate--"+e+" .sui-box-header .sui-button-icon")[0],!0)),300),i.find("#integration-migrate").on("click",(()=>{const a=i.find("form"),o={},l={slug:e,global_multi_id:t};let d=a.serialize();n()("#integration-migrate").addClass("sui-button-onload"),o._ajax_nonce=n()("#integration-migrate").data("nonce"),o.action="hustle_provider_migrate_aweber",d=d+"&"+n().param(l),o.data=d,s.reauth(i,o,t,e)}))},reauth(e,t,i,s){const o=n()(".hustle_migration_notice__"+s+'[data-id="'+i+'"]');this.ajax=n().post({url:ajaxurl,type:"post",data:t}).done((function(t){t&&t.success?(SUI.closeModal(),o.hide(),a.Notification.open("success",optinVars.messages.aweber_migration_success,!1)):(n()(e).find("#integration-migrate").removeClass("sui-button-onload"),n()(e).find(".sui-error-message").removeClass("sui-hidden"),n()(e).find(".sui-form-field").addClass("sui-form-field-error"))}))}},u={open(e,t){const i="hustle-dialog--delete",s=Optin.template("hustle-dialog--delete-tpl")(e);n()("#"+i+" #hustle-delete-dialog-content").html(s),n()("#"+i+" #hustle-dialog--delete-title").html(e.title),n()("#"+i+" .hustle-cancel-button").on("click",(()=>SUI.closeModal(i))),n()("#"+i+" .hustle-delete-confirm").on("click",(function(e){n()(e.currentTarget).addClass("sui-button-onload")})),SUI.openModal(i,t,n()("#"+i+".hustle-modal-close")[0],!0)}}},8169:function(){Hustle.define("imageUploader",(function(){"use strict";return Backbone.View.extend({events:{"click .hustle-image-uploader-browse":"open","click .hustle-image-uploader-clear":"clear"},mediaFrame:!1,initialize(e){if(this.attribute=e.attribute,!this.model||!this.attribute)throw new Error("Undefined model or attribute.");this.render()},render(){return this.defineMediaFrame(),this},showImagePreviewOrButton(){const e=this.model.get(this.attribute);""===e||void 0===e?this.$el.removeClass("sui-has_file"):this.$el.addClass("sui-has_file")},defineMediaFrame(){const e=this;this.mediaFrame=wp.media({title:optinVars.media_uploader.select_or_upload,button:{text:optinVars.media_uploader.use_this_image},multiple:!1}).on("select",(function(){const t=e.mediaFrame.state().get("selection").first().toJSON();let i,s;t&&t.url&&(i=t.url,s="",e.model.set(e.attribute,i),t.sizes&&t.sizes.thumbnail&&t.sizes.thumbnail.url&&(s=t.sizes.thumbnail.url),e.$el.find(".sui-upload-file .hustle-upload-file-url").text(i),e.$el.find(".sui-image-preview").css("background-image","url( "+s+" )"),e.showImagePreviewOrButton())}))},open(e){e.preventDefault(),this.mediaFrame.open()},clear(e){e.preventDefault(),this.model.set(this.attribute,""),this.$el.find(".sui-upload-file .hustle-upload-file-url").text(""),this.$el.find(".sui-image-preview").css("background-image","url()"),this.showImagePreviewOrButton()}})}))},5554:function(e,t,i){var s=i(2947);Hustle.define("Modals.Edit_Field",(function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--edit-field",events:{'change input[name="time_format"]':"changeTimeFormat",'blur input[name="name"]':"trimName","change input":"fieldUpdated",'click input[type="radio"]':"fieldUpdated","change select":"fieldUpdated",'change input[name="version"]':"handleCaptchaSave"},initialize(e){this.field=e.field,this.changed={},this.fieldData=e.fieldData,this.model=e.model,this.render(),this.$el.off("close").on("close",(()=>this.modalClosed())),this.$("#hustle-apply-changes").off("mouseup").on("mouseup",(e=>this.applyChanges(e)))},render(){this.renderHeader(),this.renderLabels(),this.renderSettings(),this.renderStyling(),this.handleCaptchaSave(),this.$(".hustle-data-pane").first().trigger("click"),SUI.select.init(this.$(".sui-select"))},renderHeader(){this.$(".hustle-field-tag-container").length||this.$(".sui-box-header").append('<div class="sui-actions-left hustle-field-tag-container"><span class="sui-tag"></span></div>'),this.$(".sui-box-header .sui-tag").text(this.field.type)},renderLabels(){if(-1!==e.inArray(this.field.type,["recaptcha","gdpr","submit"]))return this.$("#hustle-data-tab--labels").removeClass("hustle-data-pane").addClass("sui-hidden"),void this.$("#hustle-data-pane--labels").addClass("sui-hidden");this.$("#hustle-data-tab--labels").removeClass("sui-hidden").addClass("hustle-data-pane"),this.$("#hustle-data-pane--labels").removeClass("sui-hidden");let t="hustle-"+this.field.type+"-field-labels-tpl";e("#"+t).length||(t="hustle-common-field-labels-tpl");const i=Optin.template(t);this.$("#hustle-data-pane--labels").html(i(this.fieldData)),Hustle.Events.trigger("view.rendered",this)},renderSettings(){if("hidden"===this.field.type)return this.$("#hustle-data-tab--settings").removeClass("hustle-data-pane").addClass("sui-hidden"),this.$("#hustle-data-pane--settings").addClass("sui-hidden"),void s.accessibleHide(this.$("[data-tabs]"));s.accessibleShow(this.$("[data-tabs]")),this.$("#hustle-data-tab--settings").removeClass("sui-hidden").addClass("hustle-data-pane"),this.$("#hustle-data-pane--settings").removeClass("sui-hidden"),e(document).on("focusin",(function(t){e(t.target).closest(".wp-link-input").length&&t.stopImmediatePropagation()}));let t="hustle-"+this.field.type+"-field-settings-tpl";e("#"+t).length||(t="hustle-common-field-settings-tpl");const i=Optin.template(t);if(this.$("#hustle-data-pane--settings").html(i(this.fieldData)),Hustle.Events.trigger("view.rendered",this),"gdpr"===this.field.type){const e={tinymce:{wpautop:!1,toolbar1:"bold,italic,strikethrough,link",valid_elements:"a[href|target=_blank],strong/b,i,u,s,em,del",forced_root_block:""},quicktags:{buttons:"strong,em,del,link"}};wp.editor.remove("gdpr_message"),wp.editor.initialize("gdpr_message",e)}else if("recaptcha"===this.field.type){const e={tinymce:{toolbar:["bold italic link alignleft aligncenter alignright"]},quicktags:!0};wp.editor.remove("v3_recaptcha_badge_replacement"),wp.editor.initialize("v3_recaptcha_badge_replacement",e),wp.editor.remove("v2_invisible_badge_replacement"),wp.editor.initialize("v2_invisible_badge_replacement",e)}},renderStyling(){if("hidden"===this.field.type)return this.$("#hustle-data-tab--styling").removeClass("hustle-data-pane").addClass("sui-hidden"),void this.$("#hustle-data-pane--styling").addClass("sui-hidden");this.$("#hustle-data-tab--styling").removeClass("sui-hidden").addClass("hustle-data-pane"),this.$("#hustle-data-pane--styling").removeClass("sui-hidden");let t="hustle-"+this.field.type+"-field-styling-tpl";e("#"+t).length||(t="hustle-common-field-styling-tpl");const i=Optin.template(t);this.$("#hustle-data-pane--styling").html(i(this.fieldData))},fieldUpdated(t){const i=e(t.target),s=i.attr("name"),n=i.is(":checkbox")?i.is(":checked"):i.val();this.changed[s]=n},modalClosed(){this.undelegateEvents(),this.stopListening()},changeTimeFormat(t){"12"===e(t.target).val()?(e("#hustle-date-format").closest(".sui-form-field").show(),e('input[name="time_hours"]').prop("min",1).prop("max",12)):(e("#hustle-date-format").closest(".sui-form-field").hide(),e('input[name="time_hours"]').prop("min",0).prop("max",23))},handleCaptchaSave(){if("recaptcha"!==this.field.type)return;let t=e("#available_recaptchas").val();if(t){t=t.split(",");const i=e('input[name="version"]:checked').val();-1===_.indexOf(t,i)?e("#hustle-dialog--edit-field").find("#hustle-apply-changes").attr("disabled","disabled"):e("#hustle-dialog--edit-field").find("#hustle-apply-changes").attr("disabled",!1)}else e("#hustle-dialog--edit-field").find("#hustle-apply-changes").attr("disabled","disabled")},trimName(e){const t=this.$(e.target),i=t.val().trim().replace(/ /g,"_");t.val(i)},applyChanges(e){const t=this.$(e.target),i=Object.assign({},this.model.get("form_elements"));if("gdpr"===this.field.type&&"undefined"!=typeof tinyMCE){const e=tinyMCE.get("gdpr_message"),t=this.$("textarea#gdpr_message"),i="true"===t.attr("aria-hidden")?e.getContent():t.val();this.changed.gdpr_message=i}else if("recaptcha"===this.field.type&&"undefined"!=typeof tinyMCE){const e=tinyMCE.get("v3_recaptcha_badge_replacement"),t=this.$("textarea#v3_recaptcha_badge_replacement"),i="true"===t.attr("aria-hidden")?e.getContent():t.val();this.changed.v3_recaptcha_badge_replacement=i;const s=tinyMCE.get("v2_invisible_badge_replacement"),n=this.$("textarea#v2_invisible_badge_replacement"),a="true"===n.attr("aria-hidden")?s.getContent():n.val();this.changed.v2_invisible_badge_replacement=a}if(Object.keys(this.changed).length){const e=_.extend({},this.field);if(_.extend(this.field,this.changed),("name"in this.changed&&"email"!==e.name&&"email"===this.field.name||"name"in this.changed&&!this.field.name.trim().length)&&(this.field.name=e.name,delete this.changed.name),"email"===e.name&&(this.field.name="email",delete this.changed.name),this.field.name!==e.name){const e=this.field.name;let t=0,s=e;for(;s in i;)t++,s=e+"-"+t;this.field.name=s,this.changed.name=s}"name"in this.changed||(i[this.field.name]=this.field,this.model.unset("form_elements",{silent:!0}),this.model.set("form_elements",i)),this.trigger("field:updated",this.field,this.changed,e)}t.addClass("sui-button-onload"),setTimeout((()=>t.removeClass("sui-button-onload")),300)}})}))},1802:function(e,t,i){var s=i(792),n=i(2947);Hustle.define("Modals.EditSchedule",(function(e){"use strict";return Backbone.View.extend({el:"#hustle-schedule-dialog-content",dialogId:"hustle-dialog--add-schedule",events:{"click #hustle-schedule-save":"saveSchedule","click .hustle-schedule-cancel":"cancel","click .hustle-schedule-delete":"openDeleteModal","change .hustle-datepicker-field[name=start_date]":"changeMinDate","change [name=not_schedule_start]":"changeMinDate",'change .hustle-checkbox-with-dependencies input[type="checkbox"]':"checkboxWithDependenciesChanged",'change select[name="custom_timezone"]':"customTimezoneChanged"},initialize(e){this.model=e.model},open(){const t=this.dialogId;this.renderContent(),e(".hustle-datepicker-field").datepicker({beforeShow(){e("#ui-datepicker-div").addClass("sui-calendar")},dateFormat:"m/d/yy"}),SUI.select.init(this.$(".sui-select")),this.changeMinDate(),SUI.openModal(t,"hustle-schedule-focus",undefined,!1)},changeMinDate(){let t;e("[name=not_schedule_end]").is(":checked")||e("[name=not_schedule_start]").is(":checked")||(t=e("[name=start_date]").val()),e(".hustle-datepicker-field[name=end_date]").datepicker("option",{minDate:t})},renderContent(){const t=Optin.template("hustle-schedule-dialog-content-tpl"),i=e("#hustle-schedule-dialog-content"),s=Object.assign({},this.model.get("schedule"));s.is_schedule=this.model.get("is_schedule"),s.serverCurrentTime=this.getTimeToDisplay("server"),s.customCurrentTime=this.getTimeToDisplay("custom"),this.setElement(t(s)),i.html(this.$el),Hustle.Events.trigger("view.rendered",this),this.refreshViewOnRender(s)},refreshViewOnRender(t){this.$(".hustle-checkbox-with-dependencies input").each((function(){e(this).trigger("change")})),"server"===t.time_to_use?e("#tab-timezone-server").trigger("click"):e("#tab-timezone-custom").trigger("click"),"all"===t.active_days?e("#tab-schedule-everyday").trigger("click"):e("#tab-schedule-somedays").trigger("click");const i=this.$('select[name="custom_timezone"]').val(),s=t.custom_timezone;s!==i&&this.$('select[name="custom_timezone"]').val(s).trigger("change")},getTimeToDisplay(e,t=!1){const i=this.model.get("schedule");let s=!1,n=!1;if("server"===e)s=optinVars.schedule.wp_gmt_offset||0;else{const e=t||i.custom_timezone;if(e.includes("UTC")){const t=e.replace("UTC","");s=t.length?parseFloat(t):0}else{n=moment().tz(e).format("hh:mm a")}}if(!1===n&&!1!==s){const e=Date.now()+3600*s*1e3;n=moment.utc(e).format("hh:mm a")}return n},saveSchedule(t){const i=e(t.currentTarget),n=this.processFormForSave(),a="1"===this.model.get("is_schedule");i.addClass("sui-button-onload"),i.prop("disabled",!0),setTimeout((()=>{i.removeClass("sui-button-onload"),i.prop("disabled",!1)}),500),this.model.set("is_schedule","1"),this.model.set("schedule",n),this.model.userHasChange(),this.closeModal(),a||s.Notification.open("success",optinVars.schedule.new_schedule_set,!1),this.trigger("schedule:updated")},processFormForSave(){const t=e("#hustle-edit-schedule-form");return this.serializeObject(t)},cancel(){this.renderContent(),this.closeModal()},openDeleteModal(t){const i="hustle-dialog--delete-schedule",s=Optin.template("hustle-delete-schedule-dialog-content-tpl"),n=e(t.currentTarget),a={id:n.data("id"),title:n.data("title"),description:n.data("description"),action:"delete",actionClass:"hustle-button-delete"},o=s(a),l=e("#"+i+" #hustle-delete-schedule-dialog-content");l.find("button.hustle-delete-confirm").length||l.append(o),e("#"+i+" #hustle-dialog--delete-schedule-title").html(a.title),e("#"+i+" #hustle-dialog--delete-schedule-description").html(a.description),SUI.replaceModal(i,"hustle-schedule-notice",undefined,!0),e("#hustle-delete-schedule-dialog-content").off("submit").on("submit",(e=>this.deactivateSchedule(e)))},deactivateSchedule(e){e.preventDefault(),this.closeModal(),this.model.set("is_schedule","0"),this.model.userHasChange(),this.trigger("schedule:updated")},checkboxWithDependenciesChanged(t){const i=e(t.currentTarget),s=i.data("disable-on"),a=i.data("hide-on");if(s){const e=this.$(`[data-checkbox-content="${s}"]`);i.is(":checked")?(e.addClass("sui-disabled"),e.prop("disabled",!0),e.parent().hasClass("select-container")&&e.parent().addClass("sui-disabled")):(e.removeClass("sui-disabled"),e.prop("disabled",!1),e.parent().hasClass("select-container")&&e.parent().removeClass("sui-disabled"))}if(a){const e=this.$(`[data-checkbox-content="${a}"]`);i.is(":checked")?n.accessibleHide(e):n.accessibleShow(e)}},customTimezoneChanged(t){const i=e(t.currentTarget).val(),s=this.$("#hustle-custom-timezone-current-time"),n=this.getTimeToDisplay("custom",i);s.text(n)},closeModal(){e(".hustle-datepicker-field").datepicker("destroy"),SUI.closeModal()},serializeObject(t){const i={},s=t.serializeArray();return e.each(s,(function(){void 0!==i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""})),t.find("input:disabled[name]").each((function(){i[this.name]=this.value||""})),t.find("select:disabled[name]").each((function(){i[this.name]=this.value||""})),t.find('input[type="checkbox"]:not(:checked)').each((function(){void 0===i[this.name]?i[this.name]="0":"0"!==i[this.name]||t.find(`input[name="${this.name}"]:checked`).length?Array.isArray(i[this.name])||(i[this.name]=[i[this.name]]):i[this.name]=[]})),i}})}))},4554:function(){Hustle.define("Modals.Optin_Fields",(function(){"use strict";return Backbone.View.extend({el:"#hustle-dialog--optin-fields",model:{},selectedFields:[],events:{"click .sui-box-selector input":"selectFields","click #hustle-insert-fields":"insertFields"},initialize(e){this.model=e.model,this.selectedFields=[],this.$el.off("close").on("close",(()=>this.closeModalActions()))},selectFields(e){const t=this.$(e.target),i=t.val();this.$el.find('label[for="'+t.attr("id")+'"]').toggleClass("selected"),t.prop("checked")?this.selectedFields.push(i):this.selectedFields=_.without(this.selectedFields,i)},insertFields(e){const t=this.$(e.target);t.addClass("sui-button-onload"),this.trigger("fields:added",this.selectedFields),setTimeout((function(){t.removeClass("sui-button-onload"),SUI.closeModal()}),300)},closeModalActions(){this.undelegateEvents(),this.stopListening();const e=Object.keys(this.model.get("form_elements"));let t=".sui-box-selector";e.includes("recaptcha")&&(t+=":not(.hustle-optin-insert-field-label--recaptcha)"),e.includes("gdpr")&&(t+=":not(.hustle-optin-insert-field-label--gdpr)");const i=this.$el.find(t),s=i.find("input");setTimeout((()=>{i.removeClass("selected"),s.prop("checked",!1),s[0].checked=!1}),200)}})}))},90:function(){Hustle.define("Modals.PublishFlow",(function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--publish-flow",initialize(){},open(){let t=this.$("#hustle-dialog--publish-flow-icon");t.length||(t=e('<span id="hustle-dialog--publish-flow-icon" class="sui-lg" aria-hidden="true" style="margin-bottom: 20px;"></span>'),t.insertBefore("#hustle-dialog--publish-flow-title")),this.setLoading(),this.$(".sui-box").find(".sui-image").css("max-height",""),SUI.openModal("hustle-dialog--publish-flow",e(".hustle-publish-button")[0],this.$(".hustle-modal-close")[0],!0)},setLoading(){const e=this.$("#hustle-dialog--publish-flow-icon"),t=this.$(".sui-box"),i=this.$(".sui-box-header .hustle-modal-close"),s=this.$("#hustle-dialog--publish-flow-title"),n=this.$("#hustle-dialog--publish-flow-description"),a=this.$("#hustle-published-notice-with-schedule-end");e.removeClass("sui-icon-"+t.data("ready-icon")),e.addClass("sui-icon-"+t.data("loading-icon")),"loader"===t.attr("data-loading-icon")&&e.addClass("sui-loading"),s.text(t.data("loading-title")),n.text(t.data("loading-desc")),a.hide(),i.hide()},setPublished(e,t){const i=this.$("#hustle-dialog--publish-flow-icon"),s=this.$(".sui-box"),n=this.$(".sui-box-header .hustle-modal-close"),a=this.$("#hustle-dialog--publish-flow-title"),o=this.$("#hustle-dialog--publish-flow-description"),l=this.$("#hustle-published-notice-with-schedule-end"),d=e?s.data("ready-desc-alt"):s.data("ready-desc");i.removeClass("sui-icon-"+s.data("loading-icon")),i.addClass("sui-icon-"+s.data("ready-icon")),"loader"===s.attr("data-loading-icon")&&i.removeClass("sui-loading"),e&&t?(s.find(".sui-image").css("max-height","120px"),l.show()):l.hide(),a.text(s.data("ready-title")),o.text(d),a.trigger("focus"),n.show()}})}))},9103:function(){Hustle.define("Modals.Visibility_Conditions",(function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--visibility-options",selectedConditions:[],opts:{groupId:0,conditions:[]},events:{"click .sui-box-selector input":"selectConditions"},initialize(t){e("#hustle-add-conditions").off("click").on("click",(e=>this.addConditions(e))),this.opts=_.extend({},this.opts,t),this.selectedConditions=this.opts.conditions,this.$(".hustle-visibility-condition-option").prop("checked",!1).prop("disabled",!1);for(const e of this.selectedConditions)this.$("#hustle-condition--"+e).prop("checked",!0).prop("disabled",!0)},selectConditions(e){const t=this.$(e.target),i=this.$el.find('label[for="'+t.attr("id")+'"]'),s=t.val();i.toggleClass("selected"),t.prop("checked")?this.selectedConditions.push(s):this.selectedConditions=_.without(this.selectedConditions,s)},addConditions(e){const t=this,i=this.$(e.target);i.addClass("sui-button-onload"),this.trigger("conditions:added",{groupId:this.opts.groupId,conditions:this.selectedConditions}),setTimeout((function(){SUI.closeModal(),i.removeClass("sui-button-onload"),t.undelegateEvents()}),500)}})}))},3609:function(e){"use strict";e.exports=jQuery}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";i(6018),i(5492),i(1442),i(7212),i(8341),i(5032),i(4404),i(262),i(527);var e=i(3609),t=i.n(e);const s={},n=Hustle.View.extend({conditionId:"",className:"sui-builder-field sui-accordion-item sui-accordion-item--open",_template:Optin.template("hustle-visibility-rule-tpl"),template:!1,_defaults:{typeName:"",conditionName:""},_events:{"change input":"changeInput","change textarea":"changeInput","change select":"changeInput"},init(e){return this.undelegateEvents(),this.$el.removeData().off(),this.type=e.type,this.groupId=e.groupId,this.filter_type=e.filter_type,this.id=this.conditionId,this.template=void 0!==this.cpt?Optin.template("hustle-visibility-rule-tpl--post_type"):Optin.template("hustle-visibility-rule-tpl--"+this.conditionId),this._defaults={typeName:optinVars.module_type_name,conditionName:optinVars.messages.conditions[this.conditionId]?optinVars.messages.conditions[this.conditionId]:this.conditionId,groupId:this.groupId,id:this.conditionId,source:e.source},this.data=this.getData(),this.render(),this.events=t().extend(!0,{},this.events,this._events),this.delegateEvents(),this.onInit&&_.isFunction(this.onInit)&&this.onInit.apply(this,arguments),this},getData(){return _.extend({},this._defaults,this.defaults(),this.model.get(this.conditionId),{type:this.type})},getTitle(){return this.title.replace("{type_name}",this.data.typeName)},getBody(){return"function"==typeof this.body?this.body.apply(this,arguments):this.body.replace("{type_name}",this.data.typeName)},getHeader(){return this.header},countLines:e=>e.replace(/\s+$/g,"").split("\n").length,render(){this.setProperties();const e=this._template(_.extend({},{title:this.getTitle(),body:this.getBody(),header:this.getHeader()},this._defaults,{type:this.type}));return this.$el.html(""),this.$el.html(e),t()(".wph-conditions--box .wph-conditions--item:not(:last-child)").removeClass("wph-conditions--open").addClass("wph-conditions--closed"),t()(".wph-conditions--box .wph-conditions--item:not(:last-child) section").hide(),this.rendered&&"function"==typeof this.rendered&&this.rendered.apply(this,arguments),this},updateAttribute(e,t){this.data=this.model.get(this.conditionId),this.data[e]=t,this.model.set(this.conditionId,this.data),this.model.trigger("change")},getAttribute(e){const t=this.model.get(this.conditionId);return!(!t||!t[e])&&t[e]},refreshLabel(){const e=this.getHeader();this.$el.find(".wph-condition--preview").html(""),this.$el.find(".sui-accordion-item-header .sui-tag").html(e)},changeInput(e){const i=e.target,s=t()(i);let n=s.is(".sui-select")?s.val():e.target.value;if(e.stopImmediatePropagation(),s.is(":checkbox")&&(n=s.is(":checked")),s.is(".select2-search__field"))return!1;const a=i.getAttribute("data-attribute");this.updateAttribute(a,n),this.refreshLabel()},getConfigs(){return this.defaults()||!0}}),a=function(){t()(".wph-conditions--items").data("select2ScrollPosition",{})},o={events:{'change input[type="radio"]':"setCurrentLi"},setCurrentLi(e){const i=t()(e.target),s=i.closest("li");s.siblings().removeClass("current"),s.toggleClass("current",i.is(":checked"))}};s.posts=n.extend(_.extend({},o,{conditionId:"posts",setProperties(){this.title=optinVars.messages.conditions.posts},defaults:()=>({filter_type:"except",posts:[]}),onInit(){},getHeader(){return this.getAttribute("posts").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("posts").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:e=>({action:"get_new_condition_ids",search:e.term,postType:"post"}),processResults:e=>({results:e.data}),cache:!0},createTag:()=>!1}).on("select2:selecting",a).on("select2:unselecting",a)}})),s.pages=n.extend(_.extend({},o,{conditionId:"pages",setProperties(){this.title=optinVars.messages.conditions.pages},defaults:()=>({filter_type:"except",pages:[]}),onInit(){},getHeader(){return this.getAttribute("pages").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("pages").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:e=>({action:"get_new_condition_ids",search:e.term,postType:"page"}),processResults:e=>({results:e.data}),cache:!0},createTag:()=>!1}).on("select2:selecting",a).on("select2:unselecting",a)}})),optinVars.post_types&&_.each(optinVars.post_types,(function(e,t){s[e.name]=n.extend(_.extend({},o,{conditionId:e.name,cpt:!0,setProperties(){this.title=e.label},defaults:()=>({filter_type:"except",selected_cpts:[],postType:t,postTypeLabel:e.label}),getHeader(){return this.getAttribute("selected_cpts").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("selected_cpts").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:e=>({action:"get_new_condition_ids",search:e.term,postType:t}),processResults:e=>({results:e.data}),cache:!0},createTag:()=>!1}).on("select2:selecting",a).on("select2:unselecting",a)}}))})),s.categories=n.extend(_.extend({},o,{conditionId:"categories",setProperties(){this.title=optinVars.messages.conditions.categories},defaults:()=>({filter_type:"except",categories:[]}),onInit(){},getHeader(){return this.getAttribute("categories").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("categories").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:e=>({action:"get_new_condition_ids",search:e.term,postType:"category"}),processResults:e=>({results:e.data}),cache:!0},createTag:()=>!1}).on("select2:selecting",a).on("select2:unselecting",a)}})),s.tags=n.extend(_.extend({},o,{conditionId:"tags",setProperties(){this.title=optinVars.messages.conditions.tags},defaults:()=>({filter_type:"except",tags:[]}),onInit(){},getHeader(){return this.getAttribute("tags").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("tags").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".hustle-select-ajax").SUIselect2({width:"100%",tags:"true",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:e=>({action:"get_new_condition_ids",search:e.term,postType:"tag"}),processResults:e=>({results:e.data}),cache:!0},createTag:()=>!1}).on("select2:selecting",a).on("select2:unselecting",a)}})),s.visitor_logged_in_status=n.extend({conditionId:"visitor_logged_in_status",setProperties(){this.title=optinVars.messages.conditions.visitor_logged_in},defaults:()=>({show_to:"logged_in"}),getHeader(){return this.getAttribute("show_to").length&&"logged_out"===this.getAttribute("show_to")?optinVars.messages.condition_labels.logged_out:optinVars.messages.condition_labels.logged_in},body(){return this.template(this.getData())}}),s.shown_less_than=n.extend({conditionId:"shown_less_than",setProperties(){this.title=optinVars.messages.conditions.shown_less_than},defaults:()=>({less_or_more:"less_than",less_than:""}),getHeader(){return 0<this.getAttribute("less_than")?"less_than"===this.getAttribute("less_or_more")?optinVars.messages.condition_labels.number_views.replace("{number}",this.getAttribute("less_than")):optinVars.messages.condition_labels.number_views_more.replace("{number}",this.getAttribute("less_than")):optinVars.messages.condition_labels.any},body(){return this.template(this.getData())}}),s.visitor_device=n.extend({conditionId:"visitor_device",setProperties(){this.title=optinVars.messages.conditions.only_on_mobile},defaults:()=>({filter_type:"mobile"}),getHeader(){return"not_mobile"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.desktop_only:optinVars.messages.condition_labels.mobile_only},body(){return this.template(this.getData())}}),s.from_referrer=n.extend({conditionId:"from_referrer",disable:["from_referrer"],setProperties(){this.title=optinVars.messages.conditions.from_specific_ref},defaults:()=>({filter_type:"true",refs:""}),getHeader(){let e=0;return this.getAttribute("refs").length&&(e=this.countLines(this.getAttribute("refs"))),e?("false"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.except_these:optinVars.messages.condition_labels.only_these).replace("{number}",e):"false"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.any:optinVars.messages.condition_labels.none},body(){return this.template(this.getData())}}),s.source_of_arrival=n.extend({conditionId:"source_of_arrival",setProperties(){this.title=optinVars.messages.conditions.from_search_engine},defaults:()=>({source_direct:"false",source_external:"false",source_internal:"false",source_not_search:"false",source_search:"false"}),getHeader(){let e=0;const t=_.isTrue(this.getAttribute("source_direct"))&&++e,i=_.isTrue(this.getAttribute("source_external"))&&++e,s=_.isTrue(this.getAttribute("source_internal"))&&++e,n=_.isTrue(this.getAttribute("source_search"))&&++e,a=_.isTrue(this.getAttribute("source_not_search"))&&++e;return n&&a||t&&s&&i?optinVars.messages.condition_labels.any:e?optinVars.messages.condition_labels.any_conditions.replace("{number}",e):optinVars.messages.condition_labels.any},body(){return this.template(this.getData())}}),s.on_url=n.extend({conditionId:"on_url",setProperties(){this.title=optinVars.messages.conditions.on_specific_url},defaults:()=>({filter_type:"except",urls:""}),getHeader(){let e=0;return this.getAttribute("urls").length&&(e=this.countLines(this.getAttribute("urls"))),e?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",e):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())}}),s.on_browser=n.extend({conditionId:"on_browser",setProperties(){this.title=optinVars.messages.conditions.on_specific_browser},defaults:()=>({browsers:"",filter_type:"except"}),getHeader(){return this.getAttribute("browsers").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("browsers").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".sui-select").val(this.getAttribute("browsers")),SUI.select.init(this.$(".sui-select")),this.$(".sui-select").on("select2:selecting",a).on("select2:unselecting",a)}}),s.visitor_commented=n.extend({conditionId:"visitor_commented",setProperties(){this.title=optinVars.messages.conditions.visitor_has_never_commented},defaults:()=>({filter_type:"true"}),getHeader(){return"false"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.false:optinVars.messages.condition_labels.true},body(){return this.template(this.getData())}}),s.user_roles=n.extend({conditionId:"user_roles",setProperties(){this.title=optinVars.messages.conditions.on_specific_roles},defaults:()=>({roles:"",filter_type:"except"}),getHeader(){return this.getAttribute("roles").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("roles").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".sui-select").val(this.getAttribute("roles")),SUI.select.init(this.$(".sui-select")),this.$(".sui-select").on("select2:selecting",a).on("select2:unselecting",a)}}),s.page_templates=n.extend({conditionId:"page_templates",setProperties(){this.title=optinVars.messages.conditions.on_specific_templates},defaults:()=>({templates:"",filter_type:"except"}),getHeader(){return this.getAttribute("templates").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("templates").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".sui-select").val(this.getAttribute("templates")),SUI.select.init(this.$(".sui-select")),this.$(".sui-select").on("select2:selecting",a).on("select2:unselecting",a)}}),s.user_registration=n.extend({conditionId:"user_registration",setProperties(){this.title=optinVars.messages.conditions.user_registration},defaults:()=>({from_date:0,to_date:0}),getHeader(){return(0<this.getAttribute("from_date")?optinVars.messages.condition_labels.reg_date.replace("{number}",this.getAttribute("from_date")):optinVars.messages.condition_labels.immediately)+" - "+(0<this.getAttribute("to_date")?optinVars.messages.condition_labels.reg_date.replace("{number}",this.getAttribute("to_date")):optinVars.messages.condition_labels.forever)},body(){return this.template(this.getData())}}),s.visitor_country=n.extend({conditionId:"visitor_country",setProperties(){this.title=optinVars.messages.conditions.not_in_a_country},defaults:()=>({countries:"",filter_type:"except"}),getHeader(){return this.getAttribute("countries").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("countries").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".sui-select").val(this.getAttribute("countries")),SUI.select.init(this.$(".sui-select")),this.$(".sui-select").on("select2:selecting",a).on("select2:unselecting",a)}}),s.wp_conditions=n.extend({conditionId:"wp_conditions",setProperties(){this.title=optinVars.messages.conditions.wp_conditions},defaults:()=>({wp_conditions:"",filter_type:"except"}),getHeader(){return this.getAttribute("wp_conditions").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("wp_conditions").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".sui-select").val(this.getAttribute("wp_conditions")),SUI.select.init(this.$(".sui-select")),this.$(".sui-select").on("select2:selecting",a).on("select2:unselecting",a)}}),s.archive_pages=n.extend({conditionId:"archive_pages",setProperties(){this.title=optinVars.messages.conditions.archive_pages},defaults:()=>({archive_pages:"",filter_type:"except"}),getHeader(){return this.getAttribute("archive_pages").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("archive_pages").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".sui-select").val(this.getAttribute("archive_pages")),SUI.select.init(this.$(".sui-select")),this.$(".sui-select").on("select2:selecting",a).on("select2:unselecting",a)}}),s.wc_pages=n.extend(_.extend({},o,{conditionId:"wc_pages",setProperties(){this.title=optinVars.messages.conditions.wc_pages},defaults:()=>({filter_type:"all"}),getHeader(){return"none"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())}})),s.wc_categories=n.extend(_.extend({},o,{conditionId:"wc_categories",setProperties(){this.title=optinVars.messages.conditions.wc_categories},defaults:()=>({filter_type:"except",wc_categories:[]}),onInit(){},getHeader(){return this.getAttribute("wc_categories").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("wc_categories").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:e=>({action:"get_new_condition_ids",search:e.term,postType:"wc_category"}),processResults:e=>({results:e.data}),cache:!0},createTag:()=>!1}).on("select2:selecting",a).on("select2:unselecting",a)}})),s.wc_tags=n.extend(_.extend({},o,{conditionId:"wc_tags",setProperties(){this.title=optinVars.messages.conditions.wc_tags},defaults:()=>({filter_type:"except",wc_tags:[]}),onInit(){},getHeader(){return this.getAttribute("wc_tags").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("wc_tags").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:e=>({action:"get_new_condition_ids",search:e.term,postType:"wc_tag"}),processResults:e=>({results:e.data}),cache:!0},createTag:()=>!1}).on("select2:selecting",a).on("select2:unselecting",a)}})),s.wc_archive_pages=n.extend({conditionId:"wc_archive_pages",setProperties(){this.title=optinVars.messages.conditions.wc_archive_pages},defaults:()=>({wc_archive_pages:"",filter_type:"except"}),getHeader(){return this.getAttribute("wc_archive_pages").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("wc_archive_pages").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".sui-select").val(this.getAttribute("wc_archive_pages")),SUI.select.init(this.$(".sui-select")),this.$(".sui-select").on("select2:selecting",a).on("select2:unselecting",a)}}),s.wc_static_pages=n.extend({conditionId:"wc_static_pages",setProperties(){this.title=optinVars.messages.conditions.wc_static_pages},defaults:()=>({wc_static_pages:"",filter_type:"except"}),getHeader(){return this.getAttribute("wc_static_pages").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("wc_static_pages").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body(){return this.template(this.getData())},rendered(){this.$(".sui-select").val(this.getAttribute("wc_static_pages")),SUI.select.init(this.$(".sui-select")),this.$(".sui-select").on("select2:selecting",a).on("select2:unselecting",a)}}),s.cookie_set=n.extend({conditionId:"cookie_set",setProperties(){this.title=optinVars.messages.conditions.cookie_set},defaults:()=>({cookie_name:"",cookie_value:"",filter_type:"exists",cookie_value_conditions:"anything"}),changeInput(e){const i=e.target,s=t()(i);let n,a,o,l,d=s.is(".sui-select")?s.val():e.target.value;if(e.stopImmediatePropagation(),void 0!==s.find(":selected").data("switcher-menu")&&(a=s.closest(".select-content-switcher-wrapper").find(`.select-switcher-content[data-switcher-content="${s.find(":selected").data("switcher-menu")}"] input`),o=a.val(),o=o||"",n=this.updateAttribute("cookie_value",o)),"filter_type"===s.data("attribute")&&(l=s.closest(".sui-side-tabs").find('.sui-tab-boxed:not(.active) input[data-attribute="cookie_name"]').val(),s.closest(".sui-side-tabs").find('.sui-tab-boxed.active input[data-attribute="cookie_name"]').val(l),n=this.updateAttribute("cookie_name",l)),s.is(":checkbox")&&(d=s.is(":checked")),s.is(".select2-search__field"))return!1;const r=i.getAttribute("data-attribute");return n=this.updateAttribute(r,d),this.refreshLabel(),n},getHeader(){return this.getAttribute("cookie_name")?"exists"===this.getAttribute("filter_type")?"anything"===this.getAttribute("cookie_value_conditions")?optinVars.messages.condition_labels.cookie_anything.replace("{name}",this.getAttribute("cookie_name")).replace(/(<([^>]+)>)/gi,""):optinVars.messages.condition_labels.cookie_value.replace("{name}",this.getAttribute("cookie_name")).replace("{value_condition}",optinVars.wp_cookie_set[this.getAttribute("cookie_value_conditions")]).replace("{value}",this.getAttribute("cookie_value")).replace(/(<([^>]+)>)/gi,""):optinVars.messages.condition_labels.cookie_doesnt_exist.replace("{name}",this.getAttribute("cookie_name")).replace(/(<([^>]+)>)/gi,""):"-"},body(){return this.template(this.getData())},rendered(){SUI.select.init(this.$(".sui-select"))}});i(8169),i(5554),i(1802),i(4554),i(90),i(9103),i(3379),i(5013),i(7580),i(8327),i(4484),i(831),i(9547),i(4114),i(4592),i(8567);var l=i(2947);Hustle.define("Mixins.Module_Visibility",(function(e){return _.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-conditions-group",events:{"click .hustle-add-new-visibility-group":"addNewGroup","click .hustle-choose-conditions":"openConditionsModal","click .hustle-remove-visibility-group":"removeGroup","change .visibility-group-filter-type":"updateAttribute","change .visibility-group-show-hide":"updateAttribute","change .visibility-group-apply-on":"updateGroupApplyOn"},init(t){const i=t.BaseModel.extend({defaults:{conditions:""},initialize(e){if(_.extend(this,e),!(this.get("conditions")instanceof Backbone.Model)){_.isEmpty(this.get("conditions"))&&_.isArray(this.get("conditions"))&&(this.conditions={});const e=Hustle.get("Model");this.set("conditions",new e(this.conditions),{silent:!0})}}});this.model=new i(optinVars.current.visibility||{}),this.moduleType=optinVars.current.data.module_type,this.activeConditions={},this.render(),e("#hustle-general-conditions").on("click",(e=>this.switchConditions(e))),e("#hustle-wc-conditions").on("click",(e=>this.switchConditions(e))),this.groupId=""},render(){const t=this,i=this.model.get("conditions").toJSON();if(e.isEmptyObject(i))this.addNewGroup();else{for(const e in i){let i=this.model.get("conditions."+e);i instanceof Backbone.Model||(_.isEmpty(i)&&_.isArray(i)&&(i={}),i=this.getConditionsGroupModel(i),t.model.set("conditions."+e,i,{silent:!0})),this.addGroupToPanel(i,"render")}this.maybeToggleGroupsBin()}},afterRender(){this.bindRemoveConditions()},bindRemoveConditions(){e("#hustle-conditions-group .hustle-remove-visibility-condition").off("click").on("click",(e=>this.removeCondition(e)))},openConditionsModal(t){const i=this,s=e(t.currentTarget),n=s.data("group-id"),a=this.model.get("conditions."+n),o=void 0!==a?Object.keys(a.toJSON()):[];new(Hustle.get("Modals.Visibility_Conditions"))({groupId:n,conditions:o}).on("conditions:added",(e=>i.addNewConditions(e))),this.groupId=n,SUI.openModal("hustle-dialog--visibility-options",s[0],this.$("#hustle-dialog--visibility-options .sui-box-header .sui-button-icon")[0],!0)},addNewConditions(t){const i=this,s=t.groupId,n=t.conditions,a=this.model.get("conditions."+s);e.each(n,((e,t)=>{if(a.get(t))return!0;i.addConditionToPanel(t,{},s,a,"new")})),this.bindRemoveConditions(),Hustle.Events.trigger("view.rendered",this)},addGroupToPanel(t,i){const s=t.get("group_id"),n=e("#hustle-visibility-conditions-box"),a=Optin.template("hustle-visibility-group-box-tpl")(_.extend({},{groupId:s,apply_on_floating:t.get("apply_on_floating"),apply_on_inline:t.get("apply_on_inline"),apply_on_widget:t.get("apply_on_widget"),apply_on_shortcode:t.get("apply_on_shortcode"),show_or_hide_conditions:t.get("show_or_hide_conditions"),filter_type:t.get("filter_type")})),o=e(a);o.insertBefore(n.find(".hustle-add-new-visibility-group")),SUI.select.init(o.find(".sui-select")),this.activeConditions[s]={};const l=this,d=t.toJSON();e.each(d,(function(e,n){if("object"!=typeof n)return!0;l.addConditionToPanel(e,n,s,t,i)}))},addConditionToPanel(t,i,n,a,o){if(void 0===s[t])return;const l=new s[t]({type:this.moduleType,model:a,groupId:n,source:o});if(!l)return;const d=this.$("#hustle-visibility-group-"+n+" .sui-box-builder-body");return d.find(".sui-builder-field").length||(d.find(".sui-box-builder-message-block").hide(),d.find(".sui-button-dashed").show()),e.isEmptyObject(i)?a.set(t,l.getConfigs()):a.set(t,i),this.activeConditions[n][t]=l,e(l.$el).appendTo(d.find(".sui-builder-fields")),l},addNewGroup(){const e=this.getConditionsGroupModel(),t=e.get("group_id");this.model.set("conditions."+t,e),this.addGroupToPanel(e,"new"),this.maybeToggleGroupsBin(),Hustle.Events.trigger("view.rendered",this)},switchConditions(t){t.preventDefault();"hustle-wc-conditions"===e(t.currentTarget).prop("id")?(e("#hustle-dialog--visibility-options .general_condition").hide(),e("#hustle-dialog--visibility-options .wc_condition").show()):(e("#hustle-dialog--visibility-options .wc_condition").hide(),e("#hustle-dialog--visibility-options .general_condition").show())},removeGroup(t){const i=e(t.currentTarget).data("group-id"),s=this.$("#hustle-visibility-group-"+i);delete this.activeConditions[i],this.model.get("conditions").unset(i),s.remove(),Object.keys(this.activeConditions).length||this.addNewGroup(),this.maybeToggleGroupsBin()},removeCondition(t){const i=e(t.currentTarget),s=i.data("condition-id"),n=i.data("group-id"),a=this.$("#hustle-visibility-group-"+n+" .sui-box-builder-body");this.activeConditions[n][s].remove(),delete this.activeConditions[n][s],this.model.get("conditions."+n).unset(s),a.find(".sui-builder-field").length||a.find(".sui-box-builder-message-block").show(),this.bindRemoveConditions()},updateAttribute(t){t.stopPropagation();const i=e(t.target),s=i.data("group-id"),n=i.data("group-attribute"),a=i.val();this.model.get("conditions."+s).set(n,a)},updateGroupApplyOn(t){t.stopPropagation();const i=e(t.target),s=i.data("group-id"),n=i.data("property"),a=i.is(":checked"),o=this.model.get("conditions."+s);("embedded"===this.moduleType&&-1!==e.inArray(n,["apply_on_inline","apply_on_widget","apply_on_shortcode"])||"social_sharing"===this.moduleType&&-1!==e.inArray(n,["apply_on_floating","apply_on_inline","apply_on_widget","apply_on_shortcode"]))&&o.set(n,a)},getConditionsGroupModel(e){if(e)"embedded"!==this.moduleType||e.apply_on_inline&&e.apply_on_widget&&e.apply_on_shortcode?"social_sharing"!==this.moduleType||e.apply_on_floating&&e.apply_on_inline&&e.apply_on_widget&&e.apply_on_shortcode||(e.apply_on_floating||(e.apply_on_floating=!0),e.apply_on_inline||(e.apply_on_inline=!0),e.apply_on_widget||(e.apply_on_widget=!0),e.apply_on_shortcode||(e.apply_on_shortcode=!1)):(e.apply_on_inline||(e.apply_on_inline=!0),e.apply_on_widget||(e.apply_on_widget=!0),e.apply_on_shortcode||(e.apply_on_shortcode=!1));else{const t=(new Date).getTime().toString(16);this.model.get("conditions."+t),e={group_id:t,show_or_hide_conditions:"show",filter_type:"all"},"embedded"===this.moduleType?(e.apply_on_inline=!0,e.apply_on_widget=!0,e.apply_on_shortcode=!1):"social_sharing"===this.moduleType&&(e.apply_on_floating=!0,e.apply_on_inline=!0,e.apply_on_widget=!0,e.apply_on_shortcode=!1)}return new(Hustle.get("Model"))(e)},maybeToggleGroupsBin(){const t=this.model.get("conditions"),i=e("#hustle-conditions-group .sui-box-builder-header .hustle-remove-visibility-group");1===Object.keys(t.toJSON()).length?l.accessibleHide(i):l.accessibleShow(i)}})}));i(5229),i(1553),i(3664),i(8616),i(9090),i(5362),i(759),i(7202),i(5552),i(5533),i(792),i(2947),i(4526),i(2506),i(9156),i(4327),i(6357),i(1771),i(7570),i(6415),i(6699),i(7373),i(4475),i(981),i(4553),i(3901)}()}();